{"version":3,"file":"js/55.6ec2271a.js","mappings":"0JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACG,YAAY,CAAC,mBAAmB,OAAO,gBAAgB,OAAO,QAAU,YAAY,aAAa,aAAa,gBAAgB,QAAQ,CAACH,EAAG,SAAS,CAACI,MAAM,CAAC,KAAON,EAAIO,KAAK,OAAS,aAAa,CAACL,EAAG,QAAQ,CAACI,MAAM,CAAC,OAAS,KAAK,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,IAAI,CAACJ,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,UAAU,CAACJ,EAAG,UAAU,CAACI,MAAM,CAAC,YAAc,YAAYE,MAAM,CAACC,MAAOT,EAAIO,KAAgB,YAAEG,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIO,KAAM,cAAeI,EAAI,EAAEE,WAAW,uBAAuB,IAAI,GAAGX,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,IAAI,CAACJ,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,UAAU,CAACI,MAAM,CAAC,YAAc,WAAWE,MAAM,CAACC,MAAOT,EAAIO,KAAW,OAAEG,SAAS,SAAUC,GAAMX,EAAIY,KAAKZ,EAAIO,KAAM,SAAUI,EAAI,EAAEE,WAAW,kBAAkB,IAAI,GAAGX,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,IAAI,CAACJ,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQ,MAAW,CAACJ,EAAG,QAAQ,CAACE,YAAY,OAAOE,MAAM,CAAC,KAAO,KAAK,KAAO,aAAaJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,SAAS,IAAI,IAAI,IAAI,IAAI,GAAGJ,EAAG,MAAM,CAACG,YAAY,CAAC,mBAAmB,OAAO,QAAU,cAAc,aAAa,aAAa,aAAa,SAAS,gBAAgB,QAAQ,CAACH,EAAG,cAAc,CAACI,MAAM,CAAC,QAAUN,EAAIc,UAAU,QAAUd,EAAIe,QAAQ,eAAiBf,EAAIgB,gBAAgBC,GAAG,CAAC,iBAAiB,SAASC,GAAQlB,EAAIc,UAAUI,CAAM,EAAE,iBAAiB,SAASA,GAAQlB,EAAIe,QAAQG,CAAM,EAAE,aAAelB,EAAImB,UAAU,CAACjB,EAAG,QAAQ,CAACG,YAAY,CAAC,eAAe,QAAQC,MAAM,CAAC,KAAO,MAAMW,GAAG,CAAC,SAAWjB,EAAIoB,kBAAkBlB,EAAG,QAAQ,CAACG,YAAY,CAAC,eAAe,QAAQC,MAAM,CAAC,KAAO,OAAO,KAAO,YAAYJ,EAAG,QAAQ,CAACG,YAAY,CAAC,eAAe,QAAQC,MAAM,CAAC,KAAO,cAAc,GAAGJ,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,SAAS,QAAUN,EAAIe,QAAQ,cAAcf,EAAIqB,SAAS,OAAS,CAAEC,EAAGtB,EAAIuB,aAAc,UAAWC,GAAWA,EAAOC,GAAG,WAAazB,EAAI0B,WAAW,aAAe1B,EAAI2B,aAAa,QAAU3B,EAAI4B,eAAe,KAAO5B,EAAIc,WAAWG,GAAG,CAAC,OAASjB,EAAI6B,aAAaC,YAAY9B,EAAI+B,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,GAAM,OAAOhC,EAAG,OAAO,CAAC,EAAE,CAACA,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACN,EAAImC,GAAGnC,EAAIoC,GAAGF,OAAU,EAAE,GAAG,CAACF,IAAI,SAASC,GAAG,SAASC,EAAMV,GAAQ,OAAOtB,EAAG,OAAO,CAAC,EAAE,CAACA,EAAG,IAAI,CAACE,YAAY,OAAOE,MAAM,CAAC,KAAO,gBAAgBW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIoB,eAAeI,EAAO,IAAI,CAACxB,EAAImC,GAAG,QAAQjC,EAAG,IAAI,CAACE,YAAY,MAAME,MAAM,CAAC,KAAO,gBAAgBW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIqC,SAASb,EAAO,IAAI,CAACxB,EAAImC,GAAG,SAAS,QAAQ,IAC17E,EACIG,EAAkB,G,gCC2GtB,GACIC,KAAM,aACNC,OAAQ,CAAC,MACT,IAAAC,GACI,MAAO,CACHlB,YAAa,EACbhB,KAAM,CACFmC,YAAa,GACbC,OAAQ,IAGpB,EAEA,OAAAC,GACI3C,KAAKc,QAAU,CAEX,CACI8B,MAAO,KACPC,UAAW,KACXd,IAAK,KACLe,aAAc,CAACb,EAAMV,EAAQwB,IAAU,GAAGA,EAAQ,IAClDC,MAAO,IAEX,CACIJ,MAAO,QACPC,UAAW,cACXd,IAAK,eAET,CACIa,MAAO,OACPC,UAAW,WACXd,IAAK,YAET,CACIa,MAAO,OACPC,UAAW,SACXd,IAAK,SACLF,YAAa,CAAEiB,aAAc,WAEjC,CACIF,MAAO,OACPC,UAAW,YACXd,IAAK,YAELkB,QAAQ,EACRC,UAAU,EACVF,MAAO,KAEX,CACIJ,MAAO,MACPC,UAAW,WACXd,IAAK,YAET,CACIa,MAAO,KACPC,UAAW,SACXd,IAAK,SACLF,YAAa,CAAEiB,aAAc,YAIrC9C,KAAKe,eAAiBoC,KAAKC,MAAMD,KAAKE,UAAUrD,KAAKc,UAAUwC,KAC1DC,IACGA,EAAKC,SAAU,EACRD,KAGfvD,KAAKyD,WAAU,KACXzD,KAAKsB,aAAc,EAAAoC,EAAA,GAAe,CAAElC,GAAI,UAAW,GAE3D,EAEAmC,QAAS,CACL,cAAAxC,CAAeI,IACX,OACI,CACIqB,MAAOrB,EAAS,SAAW,SAC3ByB,MAAO,SAEX,CAAEY,UAAWC,mBAErB,EAEA,SAAAC,CAAUC,GAEN/D,KAAK2B,gBAAiB,EACtBqC,YAAW,KACP,IAAIC,EAAQ,GACZ,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,IACrBD,EAAMC,GAAK,CACP1C,GAAI0C,EACJzB,YAAa,IAAMyB,EAAEC,WAAWC,SAAS,EAAG,KAC5CC,SAAUC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiB,EAC3C9B,OAAQ,OAASwB,EACjBO,UAAW,sBACXC,SAAU,MAAQR,GAG1BH,EAAQY,kBAAoBZ,EAAQY,mBACpCZ,EAAQa,iBACJb,EAAQa,gBAAgB,CAAEC,MAAOZ,EAAOa,WAAY,KAAM,GAC/D,IACP,EAEA,QAAA1C,CAASb,GAELvB,KAAK+E,SAAS,CACVnC,MAAO,OACPoC,QAAS,SACTC,KAAM,KACFjF,KAAK2B,gBAAiB,EACtBqC,YAAW,KAEPhE,KAAKkB,SAAS,GACf,IAAI,GAGnB,IClO8I,I,UCQlJ0C,GAAY,OACd,EACA9D,EACAuC,GACA,EACA,KACA,WACA,MAIF,EAAeuB,EAAiB,O","sources":["webpack://data-v2/./src/views/scrap-module/scrap-defective-list/scrap-defective-list.vue?45e3","webpack://data-v2/src/views/scrap-module/scrap-defective-list/scrap-defective-list.vue","webpack://data-v2/./src/views/scrap-module/scrap-defective-list/scrap-defective-list.vue?d2be","webpack://data-v2/./src/views/scrap-module/scrap-defective-list/scrap-defective-list.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex-user\"},[_c('div',{staticStyle:{\"background-color\":\"#fff\",\"margin-bottom\":\"10px\",\"padding\":\"12px 24px\",\"box-sizing\":\"border-box\",\"border-radius\":\"4px\"}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"}},[_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":4}},[_c('a-form-item',{attrs:{\"label\":\"不良品编号\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入不良品编号\"},model:{value:(_vm.form.productCode),callback:function ($$v) {_vm.$set(_vm.form, \"productCode\", $$v)},expression:\"form.productCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-form-item',{attrs:{\"label\":\"报废原因\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入报废原因\"},model:{value:(_vm.form.reason),callback:function ($$v) {_vm.$set(_vm.form, \"reason\", $$v)},expression:\"form.reason\"}})],1)],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-form-item',{attrs:{\"label\":'\\u00a0'}},[_c('g-btn',{staticClass:\"mr-2\",attrs:{\"text\":\"查询\",\"type\":\"primary\"}}),_c('g-btn',{attrs:{\"text\":\"重置\"}})],1)],1)],1)],1)],1),_c('div',{staticStyle:{\"background-color\":\"#fff\",\"padding\":\"12px 24px 0\",\"box-sizing\":\"border-box\",\"overflow-y\":\"hidden\",\"border-radius\":\"4px\"}},[_c('g-table-bar',{attrs:{\"spacing\":_vm.tableSize,\"columns\":_vm.columns,\"virtualColumns\":_vm.virtualColumns},on:{\"update:spacing\":function($event){_vm.tableSize=$event},\"update:columns\":function($event){_vm.columns=$event},\"refreshTable\":_vm.refresh}},[_c('g-btn',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"text\":\"添加\"},on:{\"callback\":_vm.addOrEditScrap}}),_c('g-btn',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"text\":\"批量删除\",\"type\":\"danger\"}}),_c('g-btn',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"text\":\"导出excel\"}})],1),_c('a-table',{attrs:{\"id\":\"tables\",\"columns\":_vm.columns,\"data-source\":_vm.dataList,\"scroll\":{ y: _vm.tableheight },\"row-key\":(record) => record.id,\"pagination\":_vm.pagination,\"rowSelection\":_vm.rowSelection,\"loading\":_vm.isTableLoading,\"size\":_vm.tableSize},on:{\"change\":_vm.tableChange},scopedSlots:_vm._u([{key:\"reason\",fn:function(text){return _c('span',{},[_c('a-tag',{attrs:{\"color\":\"red\"}},[_vm._v(_vm._s(text))])],1)}},{key:\"action\",fn:function(text, record){return _c('span',{},[_c('a',{staticClass:\"mr-1\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addOrEditScrap(record)}}},[_vm._v(\"编辑\")]),_c('a',{staticClass:\"del\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.delScrap(record)}}},[_vm._v(\"删除\")])])}}])})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"flex-user\">\r\n        <!-- 搜索区域 -->\r\n        <div\r\n            style=\"\r\n                background-color: #fff;\r\n                margin-bottom: 10px;\r\n                padding: 12px 24px;\r\n                box-sizing: border-box;\r\n                border-radius: 4px;\r\n            \"\r\n        >\r\n            <a-form :form=\"form\" layout=\"vertical\">\r\n                <a-row :gutter=\"24\">\r\n                    <a-col :span=\"4\">\r\n                        <a-form-item label=\"不良品编号\">\r\n                            <a-input\r\n                                placeholder=\"请输入不良品编号\"\r\n                                v-model=\"form.productCode\"\r\n                            ></a-input>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                    <a-col :span=\"4\">\r\n                        <a-form-item label=\"报废原因\">\r\n                            <a-input\r\n                                placeholder=\"请输入报废原因\"\r\n                                v-model=\"form.reason\"\r\n                            ></a-input>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                    <a-col :span=\"4\">\r\n                        <a-form-item :label=\"'\\u00a0'\">\r\n                            <g-btn\r\n                                text=\"查询\"\r\n                                class=\"mr-2\"\r\n                                type=\"primary\"\r\n                            ></g-btn>\r\n                            <g-btn text=\"重置\"></g-btn>\r\n                        </a-form-item>\r\n                    </a-col>\r\n                </a-row>\r\n            </a-form>\r\n        </div>\r\n\r\n        <!-- 数据表格 -->\r\n        <div\r\n            style=\"\r\n                background-color: #fff;\r\n                padding: 12px 24px 0;\r\n                box-sizing: border-box;\r\n                overflow-y: hidden;\r\n                border-radius: 4px;\r\n            \"\r\n        >\r\n            <g-table-bar\r\n                :spacing.sync=\"tableSize\"\r\n                :columns.sync=\"columns\"\r\n                :virtualColumns=\"virtualColumns\"\r\n                @refreshTable=\"refresh\"\r\n            >\r\n                <g-btn\r\n                    text=\"添加\"\r\n                    style=\"margin-right: 10px\"\r\n                    @callback=\"addOrEditScrap\"\r\n                ></g-btn>\r\n                <g-btn\r\n                    text=\"批量删除\"\r\n                    type=\"danger\"\r\n                    style=\"margin-right: 10px\"\r\n                ></g-btn>\r\n                <g-btn text=\"导出excel\" style=\"margin-right: 10px\"></g-btn>\r\n            </g-table-bar>\r\n            <a-table\r\n                id=\"tables\"\r\n                :columns=\"columns\"\r\n                :data-source=\"dataList\"\r\n                :scroll=\"{ y: tableheight }\"\r\n                :row-key=\"(record) => record.id\"\r\n                :pagination=\"pagination\"\r\n                :rowSelection=\"rowSelection\"\r\n                @change=\"tableChange\"\r\n                :loading=\"isTableLoading\"\r\n                :size=\"tableSize\"\r\n            >\r\n                <!-- 报废原因 -->\r\n                <span slot=\"reason\" slot-scope=\"text\">\r\n                    <a-tag color=\"red\">{{ text }}</a-tag>\r\n                </span>\r\n                <!-- 操作 -->\r\n                <span slot=\"action\" slot-scope=\"text, record\">\r\n                    <a\r\n                        href=\"javascript:;\"\r\n                        class=\"mr-1\"\r\n                        @click=\"addOrEditScrap(record)\"\r\n                        >编辑</a\r\n                    >\r\n                    <a href=\"javascript:;\" class=\"del\" @click=\"delScrap(record)\"\r\n                        >删除</a\r\n                    >\r\n                </span>\r\n            </a-table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getTableScroll } from \"@/utils/getTableScroll\";\r\nimport createModal from \"@/utils/modal\";\r\nimport { tableBase } from \"@/utils\";\r\nexport default {\r\n    name: \"scrap-list\",\r\n    mixins: [tableBase],\r\n    data() {\r\n        return {\r\n            tableheight: 0,\r\n            form: {\r\n                productCode: \"\", // 不良品编号\r\n                reason: \"\", // 报废原因\r\n            },\r\n        };\r\n    },\r\n\r\n    mounted() {\r\n        this.columns = [\r\n            // 序号 index\r\n            {\r\n                title: \"序号\",\r\n                dataIndex: \"id\",\r\n                key: \"id\",\r\n                customRender: (text, record, index) => `${index + 1}`,\r\n                width: 80,\r\n            },\r\n            {\r\n                title: \"不良品编号\",\r\n                dataIndex: \"productCode\",\r\n                key: \"productCode\",\r\n            },\r\n            {\r\n                title: \"报废数量\",\r\n                dataIndex: \"quantity\",\r\n                key: \"quantity\",\r\n            },\r\n            {\r\n                title: \"报废原因\",\r\n                dataIndex: \"reason\",\r\n                key: \"reason\",\r\n                scopedSlots: { customRender: \"reason\" },\r\n            },\r\n            {\r\n                title: \"报废时间\",\r\n                dataIndex: \"scrapTime\",\r\n                key: \"scrapTime\",\r\n                // 排序\r\n                sorter: true,\r\n                ellipsis: true,\r\n                width: 200,\r\n            },\r\n            {\r\n                title: \"操作员\",\r\n                dataIndex: \"operator\",\r\n                key: \"operator\",\r\n            },\r\n            {\r\n                title: \"操作\",\r\n                dataIndex: \"action\",\r\n                key: \"action\",\r\n                scopedSlots: { customRender: \"action\" },\r\n            },\r\n        ];\r\n        //this.columns数组深拷贝this.virtualColumns\r\n        this.virtualColumns = JSON.parse(JSON.stringify(this.columns)).map(\r\n            (item) => {\r\n                item.checked = true;\r\n                return item;\r\n            }\r\n        );\r\n        this.$nextTick(() => {\r\n            this.tableheight = getTableScroll({ id: \"tables\" });\r\n        });\r\n    },\r\n\r\n    methods: {\r\n        addOrEditScrap(record) {\r\n            createModal(\r\n                {\r\n                    title: record ? \"编辑报废记录\" : \"添加报废记录\",\r\n                    width: \"800px\",\r\n                },\r\n                { component: CreateOrEditScrap } // 使用新的组件\r\n            );\r\n        },\r\n\r\n        fetchData(request) {\r\n            // 手动循环生成数据 200条\r\n            this.isTableLoading = true;\r\n            setTimeout(() => {\r\n                var _data = [];\r\n                for (let i = 0; i < 200; i++) {\r\n                    _data[i] = {\r\n                        id: i,\r\n                        productCode: \"P\" + i.toString().padStart(5, \"0\"),\r\n                        quantity: Math.floor(Math.random() * 10) + 1, // 1-10之间的随机数\r\n                        reason: \"质量问题\" + i,\r\n                        scrapTime: \"2022-01-01 00:00:00\",\r\n                        operator: \"操作员\" + i,\r\n                    };\r\n                }\r\n                request.finishedCallback && request.finishedCallback();\r\n                request.successCallback &&\r\n                    request.successCallback({ items: _data, totalCount: 200 });\r\n            }, 200);\r\n        },\r\n\r\n        delScrap(record) {\r\n            // 删除 延时\r\n            this.$confirm({\r\n                title: \"确认删除\",\r\n                content: \"确认删除吗?\",\r\n                onOk: () => {\r\n                    this.isTableLoading = true;\r\n                    setTimeout(() => {\r\n                        // 刷新\r\n                        this.refresh();\r\n                    }, 500);\r\n                },\r\n            });\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.flex-user {\r\n    box-sizing: border-box;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scrap-defective-list.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scrap-defective-list.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./scrap-defective-list.vue?vue&type=template&id=59d043a5&scoped=true\"\nimport script from \"./scrap-defective-list.vue?vue&type=script&lang=js\"\nexport * from \"./scrap-defective-list.vue?vue&type=script&lang=js\"\nimport style0 from \"./scrap-defective-list.vue?vue&type=style&index=0&id=59d043a5&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"59d043a5\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","form","model","value","callback","$$v","$set","expression","tableSize","columns","virtualColumns","on","$event","refresh","addOrEditScrap","dataList","y","tableheight","record","id","pagination","rowSelection","isTableLoading","tableChange","scopedSlots","_u","key","fn","text","_v","_s","delScrap","staticRenderFns","name","mixins","data","productCode","reason","mounted","title","dataIndex","customRender","index","width","sorter","ellipsis","JSON","parse","stringify","map","item","checked","$nextTick","getTableScroll","methods","component","CreateOrEditScrap","fetchData","request","setTimeout","_data","i","toString","padStart","quantity","Math","floor","random","scrapTime","operator","finishedCallback","successCallback","items","totalCount","$confirm","content","onOk"],"sourceRoot":""}