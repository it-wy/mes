{"version":3,"file":"js/9273.660cd7e5.js","mappings":"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","sources":["webpack://data-v2/./src/views/setting/code-editor/code-editor.vue?35c5","webpack://data-v2/src/views/setting/code-editor/code-editor.vue","webpack://data-v2/./src/views/setting/code-editor/code-editor.vue?5c72","webpack://data-v2/./src/views/setting/code-editor/code-editor.vue","webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue?4d16","webpack://data-v2/src/views/setting/code-editor/components/MonacoEditor.vue","webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue?5047","webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"code-editor-container\"},[_c('a-card',{attrs:{\"bordered\":false}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"editor-header\"},[_c('div',{staticClass:\"left\"},[_c('span',[_vm._v(\"代码编辑器\")]),_c('a-select',{staticStyle:{\"width\":\"120px\",\"margin\":\"0 16px\"},on:{\"change\":_vm.handleLanguageChange},model:{value:(_vm.currentLanguage),callback:function ($$v) {_vm.currentLanguage=$$v},expression:\"currentLanguage\"}},[_c('a-select-option',{attrs:{\"value\":\"javascript\"}},[_vm._v(\"JavaScript\")]),_c('a-select-option',{attrs:{\"value\":\"html\"}},[_vm._v(\"HTML\")])],1)],1),_c('div',{staticClass:\"right\"},[_c('a-button-group',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleRun}},[_c('a-icon',{attrs:{\"type\":\"play-circle\"}}),_vm._v(\"运行 \")],1),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.togglePreview}},[_c('a-icon',{attrs:{\"type\":\"eye\"}}),_vm._v(\"预览 \")],1)],1)],1)])]),_c('div',{staticClass:\"editor-content\",class:{ 'with-preview': _vm.showPreview }},[_c('div',{staticClass:\"editor-panel\"},[_c('MonacoEditor',{ref:\"monacoEditor\",attrs:{\"language\":_vm.currentLanguage,\"options\":_vm.editorOptions},on:{\"change\":_vm.onChange},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1),(_vm.showPreview)?_c('div',{staticClass:\"preview-panel\"},[_c('div',{staticClass:\"preview-header\"},[_c('span',[_vm._v(\"预览\")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":_vm.togglePreview}},[_c('a-icon',{attrs:{\"type\":\"close\"}})],1)],1),_c('div',{staticClass:\"preview-content\"},[(_vm.currentLanguage === 'html')?_c('iframe',{ref:\"previewFrame\",staticClass:\"preview-frame\"}):_c('div',{staticClass:\"console-output\"},[_c('div',{staticClass:\"console-header\"},[_c('span',[_vm._v(\"控制台输出\")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":_vm.clearConsole}},[_c('a-icon',{attrs:{\"type\":\"delete\"}}),_vm._v(\"清除 \")],1)],1),_c('div',{staticClass:\"console-content\"},[_vm._l((_vm.consoleOutput),function(log,index){return [_c('div',{key:index,class:['log-item', log.type]},[_c('span',{staticClass:\"log-icon\"},[_vm._v(_vm._s(log.type === 'error' ? '❌' : '✅'))]),_c('span',{staticClass:\"log-content\"},[_vm._v(_vm._s(log.content))])])]})],2)])])]):_vm._e()])],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"code-editor-container\">\n    <a-card :bordered=\"false\">\n      <template slot=\"title\">\n        <div class=\"editor-header\">\n          <div class=\"left\">\n            <span>代码编辑器</span>\n            <a-select v-model=\"currentLanguage\" style=\"width: 120px; margin: 0 16px\" @change=\"handleLanguageChange\">\n              <a-select-option value=\"javascript\">JavaScript</a-select-option>\n              <a-select-option value=\"html\">HTML</a-select-option>\n            </a-select>\n          </div>\n          <div class=\"right\">\n            <a-button-group>\n              <a-button type=\"primary\" @click=\"handleRun\">\n                <a-icon type=\"play-circle\" />运行\n              </a-button>\n              <a-button type=\"primary\" @click=\"togglePreview\">\n                <a-icon type=\"eye\" />预览\n              </a-button>\n            </a-button-group>\n          </div>\n        </div>\n      </template>\n      <div class=\"editor-content\" :class=\"{ 'with-preview': showPreview }\">\n        <div class=\"editor-panel\">\n          <MonacoEditor\n            ref=\"monacoEditor\"\n            v-model=\"code\"\n            :language=\"currentLanguage\"\n            :options=\"editorOptions\"\n            @change=\"onChange\"\n          />\n        </div>\n        <div v-if=\"showPreview\" class=\"preview-panel\">\n          <div class=\"preview-header\">\n            <span>预览</span>\n            <a-button type=\"link\" @click=\"togglePreview\">\n              <a-icon type=\"close\" />\n            </a-button>\n          </div>\n          <div class=\"preview-content\">\n            <iframe v-if=\"currentLanguage === 'html'\" ref=\"previewFrame\" class=\"preview-frame\"></iframe>\n         \n            <div v-else class=\"console-output\">\n              <div class=\"console-header\">\n                <span>控制台输出</span>\n                <a-button type=\"link\" @click=\"clearConsole\">\n                  <a-icon type=\"delete\" />清除\n                </a-button>\n              </div>\n              <div class=\"console-content\">\n                <template v-for=\"(log, index) in consoleOutput\">\n                  <div :key=\"index\" :class=\"['log-item', log.type]\">\n                    <span class=\"log-icon\">{{ log.type === 'error' ? '❌' : '✅' }}</span>\n                    <span class=\"log-content\">{{ log.content }}</span>\n                  </div>\n                </template>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </a-card>\n  </div>\n</template>\n\n<script>\nimport MonacoEditor from './components/MonacoEditor.vue'\n\nexport default {\n  name: 'CodeEditor',\n  components: {\n    MonacoEditor\n  },\n  data() {\n    return {\n      code: '',\n      currentLanguage: 'javascript',\n      showPreview: false,\n      consoleOutput: [],\n      editorOptions: {\n        theme: 'vs-dark',\n        fontSize: 14,\n        lineNumbers: 'on',\n        roundedSelection: false,\n        scrollBeyondLastLine: false,\n        readOnly: false,\n        minimap: {\n          enabled: true\n        }\n      }\n    }\n  },\n  methods: {\n    handleLanguageChange(value) {\n      this.currentLanguage = value\n      this.clearConsole()\n      if (this.showPreview) {\n        this.$nextTick(() => {\n          this.updatePreview()\n        })\n      }\n    },\n    onChange(value) {\n      this.code = value\n      if (this.showPreview && this.currentLanguage === 'html') {\n        this.updatePreview()\n      }\n    },\n    togglePreview() {\n      this.showPreview = !this.showPreview\n      if (this.showPreview) {\n        this.$nextTick(() => {\n          this.updatePreview()\n        })\n      }\n    },\n    handleRun() {\n      if (this.currentLanguage === 'javascript') {\n        this.runJavaScript()\n      } else {\n        this.updatePreview()\n      }\n    },\n    runJavaScript() {\n      this.clearConsole()\n      try {\n        // 创建一个安全的执行环境\n        const consoleLog = (...args) => {\n          this.consoleOutput.push({\n            type: 'log',\n            content: args.join(' ')\n          })\n        }\n        const consoleError = (...args) => {\n          this.consoleOutput.push({\n            type: 'error',\n            content: args.join(' ')\n          })\n        }\n        \n        // 创建一个新的Function来执行代码\n        const runCode = new Function('console', \n          'try { ' + \n          this.code +\n          ' } catch (error) { console.error(error.message); }'\n        )\n        \n        // 执行代码\n        runCode({\n          log: consoleLog,\n          error: consoleError\n        })\n        \n        if (!this.showPreview) {\n          this.togglePreview()\n        }\n      } catch (error) {\n        this.consoleOutput.push({\n          type: 'error',\n          content: error.message\n        })\n      }\n    },\n    updatePreview() {\n      if (this.currentLanguage === 'html') {\n        const frame = this.$refs.previewFrame\n        if (frame) {\n          const doc = frame.contentDocument || frame.contentWindow.document\n          doc.open()\n          doc.write(this.code)\n          doc.close()\n        }\n      }\n    },\n    clearConsole() {\n      this.consoleOutput = []\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.code-editor-container {\n  height: 100%;\n  padding: 24px;\n\n  .editor-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    .left {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .editor-content {\n    display: flex;\n    gap: 16px;\n    height: 500px;\n    overflow-y: auto;\n    min-height: 400px;\n    margin-top: 16px;\n    flex-direction: row;\n\n    .editor-panel {\n    //   flex: 1;\n      height: 100%;\n      width: 50% !important;\n      max-width: 50% !important;\n    }\n\n    .preview-panel {\n      flex: 1;\n      height: 100%;\n      width: 50%;\n      max-width: 50%;\n      border: 1px solid #303030;\n      border-radius: 4px;\n      overflow: hidden;\n      display: flex;\n      flex-direction: column;\n\n      .preview-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 16px;\n        border-bottom: 1px solid #303030;\n      }\n\n      .preview-content {\n        flex: 1;\n        overflow: hidden;\n      }\n\n      .preview-frame {\n        width: 100%;\n        height: 100%;\n        border: none;\n        background: white;\n      }\n\n      .console-output {\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n\n        .console-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 8px 16px;\n        }\n\n        .console-content {\n          flex: 1;\n          padding: 16px;\n          overflow-y: auto;\n          font-family: monospace;\n\n          .log-item {\n            margin-bottom: 8px;\n            display: flex;\n            align-items: flex-start;\n            \n            &.error {\n              color: #ff4d4f;\n            }\n\n            .log-icon {\n              margin-right: 8px;\n            }\n\n            .log-content {\n              word-break: break-all;\n            }\n          }\n        }\n      }\n    }\n\n    &:not(.with-preview) {\n      .editor-panel {\n        width: 100%;\n        max-width: 100%;\n      }\n    }\n  }\n}\n</style> ","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./code-editor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./code-editor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./code-editor.vue?vue&type=template&id=ad898174&scoped=true\"\nimport script from \"./code-editor.vue?vue&type=script&lang=js\"\nexport * from \"./code-editor.vue?vue&type=script&lang=js\"\nimport style0 from \"./code-editor.vue?vue&type=style&index=0&id=ad898174&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad898174\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"container\",staticClass:\"monaco-editor-container\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"monaco-editor-container\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MonacoEditor',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    language: {\r\n      type: String,\r\n      default: 'javascript'\r\n    },\r\n    options: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      monaco: null,\r\n      subscription: null\r\n    }\r\n  },\r\n  watch: {\r\n    value(newValue) {\r\n      if (this.editor && newValue !== this.editor.getValue()) {\r\n        this.editor.setValue(newValue)\r\n      }\r\n    },\r\n    language(newVal) {\r\n      if (this.editor) {\r\n        this.monaco.editor.setModelLanguage(this.editor.getModel(), newVal)\r\n      }\r\n    },\r\n    options: {\r\n      deep: true,\r\n      handler(newVal) {\r\n        if (this.editor) {\r\n          this.editor.updateOptions(newVal)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMonaco()\r\n  },\r\n  beforeDestroy() {\r\n    this.destroyMonaco()\r\n  },\r\n  methods: {\r\n    async initMonaco() {\r\n      // 动态加载 Monaco Editor\r\n      const script = document.createElement('script')\r\n      script.src = 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js'\r\n      script.onload = () => {\r\n        window.require.config({\r\n          paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' }\r\n        })\r\n\r\n        window.require(['vs/editor/editor.main'], () => {\r\n          this.monaco = window.monaco\r\n          this.initEditor()\r\n        })\r\n      }\r\n      document.body.appendChild(script)\r\n    },\r\n    initEditor() {\r\n      const options = {\r\n        value: this.value,\r\n        language: this.language,\r\n        ...this.options\r\n      }\r\n\r\n      this.editor = this.monaco.editor.create(this.$refs.container, options)\r\n\r\n      // 监听内容变化\r\n      this.subscription = this.editor.onDidChangeModelContent(() => {\r\n        const value = this.editor.getValue()\r\n        this.$emit('input', value)\r\n        this.$emit('change', value)\r\n      })\r\n\r\n      // 自适应容器大小\r\n      window.addEventListener('resize', this.handleResize)\r\n    },\r\n    handleResize() {\r\n      if (this.editor) {\r\n        this.editor.layout()\r\n      }\r\n    },\r\n    destroyMonaco() {\r\n      if (this.subscription) {\r\n        this.subscription.dispose()\r\n      }\r\n      if (this.editor) {\r\n        this.editor.dispose()\r\n      }\r\n      window.removeEventListener('resize', this.handleResize)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.monaco-editor-container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style> ","import mod from \"-!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MonacoEditor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MonacoEditor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MonacoEditor.vue?vue&type=template&id=2b10c320&scoped=true\"\nimport script from \"./MonacoEditor.vue?vue&type=script&lang=js\"\nexport * from \"./MonacoEditor.vue?vue&type=script&lang=js\"\nimport style0 from \"./MonacoEditor.vue?vue&type=style&index=0&id=2b10c320&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b10c320\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","staticStyle","on","handleLanguageChange","model","value","callback","$$v","currentLanguage","expression","handleRun","togglePreview","class","showPreview","ref","editorOptions","onChange","code","clearConsole","_l","log","index","key","type","_s","content","_e","staticRenderFns","name","components","MonacoEditor","data","consoleOutput","theme","fontSize","lineNumbers","roundedSelection","scrollBeyondLastLine","readOnly","minimap","enabled","methods","$nextTick","updatePreview","runJavaScript","consoleLog","args","push","join","consoleError","runCode","Function","error","message","frame","$refs","previewFrame","doc","contentDocument","contentWindow","document","open","write","close","component","props","String","default","language","options","Object","editor","monaco","subscription","watch","newValue","getValue","setValue","newVal","setModelLanguage","getModel","deep","handler","updateOptions","mounted","initMonaco","beforeDestroy","destroyMonaco","script","createElement","src","onload","window","require","config","paths","vs","initEditor","body","appendChild","create","container","onDidChangeModelContent","$emit","addEventListener","handleResize","layout","dispose","removeEventListener"],"sourceRoot":""}