{"version":3,"file":"js/1066.90134988.js","mappings":"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","sources":["webpack://data-v2/./src/views/container-manager/container-relation/container-relation.vue?390a","webpack://data-v2/src/views/container-manager/container-relation/container-relation.vue","webpack://data-v2/./src/views/container-manager/container-relation/container-relation.vue?4605","webpack://data-v2/./src/views/container-manager/container-relation/container-relation.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\"}},[_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('g-container-list',{on:{\"change\":_vm.onSearch},model:{value:(_vm.entity.mainContainer),callback:function ($$v) {_vm.$set(_vm.entity, \"mainContainer\", $$v)},expression:\"entity.mainContainer\"}})],1)]},proxy:true},{key:\"expand-card\",fn:function(){return [_c('div',{staticClass:\"expand-card\"},[_c('g-collapse',{attrs:{\"headerName\":\"批次信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.entity)+\" \")]},proxy:true}])})],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":12}},[_c('g-collapse',{attrs:{\"headerName\":\"待关联批次\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-input',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"placeholder\":\"输入批次号快速添加\"},on:{\"pressEnter\":_vm.addByContainer},model:{value:(_vm.searchContainer),callback:function ($$v) {_vm.searchContainer=$$v},expression:\"searchContainer\"}}),_c('a-table',{attrs:{\"columns\":_vm.pendingColumns,\"data-source\":_vm.pendingContainers,\"row-key\":(record) => record.containerName,\"row-selection\":{\n                  selectedRowKeys: _vm.setOfCheckedId,\n                  onChange: _vm.onSelectChange,\n                },\"pagination\":false,\"bordered\":\"\",\"size\":\"small\"}})]},proxy:true}])})],1),_c('a-col',{attrs:{\"span\":12}},[_c('g-collapse',{attrs:{\"headerName\":\"已关联批次\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-table',{attrs:{\"columns\":_vm.relatedColumns,\"data-source\":_vm.relatedContainers,\"pagination\":false,\"bordered\":\"\",\"size\":\"small\"}})]},proxy:true}])})],1)],1)]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":_vm.refresh}}),_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"关联\",\"type\":\"primary\"},on:{\"callback\":_vm.relation}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-form-model\r\n    ref=\"form\"\r\n    :model=\"entity\"\r\n    layout=\"vertical\"\r\n    autocomplete=\"off\"\r\n    class=\"h-father\"\r\n  >\r\n    <g-body-form-layout>\r\n      <!-- 搜索插槽 -->\r\n      <template #search-card>\r\n        <div class=\"search-card\">\r\n          <g-container-list\r\n            v-model=\"entity.mainContainer\"\r\n            @change=\"onSearch\"\r\n          >\r\n          </g-container-list>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 展开插槽 -->\r\n      <template #expand-card>\r\n        <div class=\"expand-card\">\r\n          <g-collapse headerName=\"批次信息\">\r\n            <template #content>\r\n              <!-- 这里显示主批次信息，可以使用 g-container-basic-info 组件 -->\r\n              {{entity}}\r\n            </template>\r\n          </g-collapse>\r\n        </div>\r\n      </template>\r\n\r\n      <template #card-body>\r\n        <a-row :gutter=\"24\">\r\n          <a-col :span=\"12\">\r\n            <g-collapse headerName=\"待关联批次\">\r\n              <template #content>\r\n                <a-input\r\n                  v-model=\"searchContainer\"\r\n                  placeholder=\"输入批次号快速添加\"\r\n                  @pressEnter=\"addByContainer\"\r\n                  style=\"margin-bottom: 10px;\"\r\n                />\r\n                <a-table\r\n                  :columns=\"pendingColumns\"\r\n                  :data-source=\"pendingContainers\"\r\n                  :row-key=\"(record) => record.containerName\"\r\n                  :row-selection=\"{\r\n                    selectedRowKeys: setOfCheckedId,\r\n                    onChange: onSelectChange,\r\n                  }\"\r\n                  :pagination=\"false\"\r\n                  bordered\r\n                  size=\"small\"\r\n                >\r\n                </a-table>\r\n               \r\n              </template>\r\n            </g-collapse>\r\n          </a-col>\r\n          <a-col :span=\"12\">\r\n            <g-collapse headerName=\"已关联批次\">\r\n              <template #content>\r\n                <a-table\r\n                  :columns=\"relatedColumns\"\r\n                  :data-source=\"relatedContainers\"\r\n                  :pagination=\"false\"\r\n                  bordered\r\n                  size=\"small\"\r\n                >\r\n                </a-table>\r\n              </template>\r\n            </g-collapse>\r\n          </a-col>\r\n        </a-row>\r\n      </template>\r\n\r\n      <template #g-fixed-row>\r\n        <div class=\"g-fixed-row\">\r\n          <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh\"></g-btn>\r\n          <g-btn\r\n            size=\"large\"\r\n            text=\"关联\"\r\n            type=\"primary\"\r\n            @callback=\"relation\"\r\n          ></g-btn>\r\n        </div>\r\n      </template>\r\n    </g-body-form-layout>\r\n  </a-form-model>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n  name: 'DataV2ContainerRelation',\r\n\r\n  data() {\r\n    return {\r\n      entity: {\r\n        mainContainer: '', // 主批次\r\n      },\r\n      pendingContainers: [], // 待关联批次列表\r\n      relatedContainers: [], // 已关联批次列表\r\n      setOfCheckedId: [], // 选中的待关联批次ID\r\n      searchContainer: '', // 手动输入批次号\r\n      pendingColumns: [\r\n        {\r\n          title: '批次号',\r\n          dataIndex: 'containerName',\r\n        },\r\n        {\r\n          title: '状态',\r\n          dataIndex: 'status',\r\n        },\r\n      ],\r\n      relatedColumns: [\r\n        {\r\n          title: '批次号',\r\n          dataIndex: 'containerName',\r\n        },\r\n        {\r\n          title: '状态',\r\n          dataIndex: 'status',\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  mounted() {},\r\n\r\n  methods: {\r\n    // 选择主批次\r\n    onSearch(value) {\r\n      this.entity.mainContainer = value;\r\n      this.setOfCheckedId = [];\r\n      this.searchContainer = '';\r\n      this.pendingContainers = [];\r\n      this.relatedContainers = [];\r\n\r\n      if (value) {\r\n        this.getRelationContainer(value);\r\n      }\r\n    },\r\n\r\n    // 获取可关联批次列表\r\n    async getRelationContainer(containerName) {\r\n      // 模拟数据\r\n      const res = {\r\n        output: {\r\n          containerList: [\r\n            { containerName: 'A001', status: '已入库' },\r\n            { containerName: 'A002', status: '已入库' },\r\n            { containerName: 'A003', status: '已入库' },\r\n          ],\r\n          relationContainerList: [\r\n            { containerName: 'B001', status: '已入库' },\r\n            { containerName: 'B002', status: '已入库' },\r\n          ],\r\n        },\r\n      };\r\n      if (res && res.output) {\r\n        this.pendingContainers = res.output.containerList || [];\r\n        this.relatedContainers = res.output.relationContainerList || [];\r\n      }\r\n    },\r\n\r\n    // 选择待关联批次\r\n    onSelectChange(selectedRowKeys) {\r\n      this.setOfCheckedId = selectedRowKeys;\r\n    },\r\n\r\n    // 手动输入批次号\r\n    addByContainer() {\r\n      const container = this.pendingContainers.find(\r\n        (item) => item.containerName === this.searchContainer.trim()\r\n      );\r\n      if (container) {\r\n        if (!this.setOfCheckedId.includes(container.containerName)) {\r\n          this.setOfCheckedId.push(container.containerName);\r\n        }\r\n        this.searchContainer = '';\r\n      } else {\r\n        this.$message.warning('该批次不在待关联列表中');\r\n      }\r\n    },\r\n\r\n    // 关联批次\r\n    relation() {\r\n      if (!this.entity.mainContainer) {\r\n        this.$message.warning('请选择主批次');\r\n        return;\r\n      }\r\n      if (this.setOfCheckedId.length === 0) {\r\n        this.$message.warning('请选择要关联的批次');\r\n        return;\r\n      }\r\n\r\n      // 调用 API 进行关联\r\n      // ...\r\n\r\n      this.$message.success('关联成功');\r\n      this.refresh();\r\n    },\r\n\r\n    // 刷新\r\n    refresh() {\r\n      this.onSearch(this.entity.mainContainer);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-card {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.g-fixed-row {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./container-relation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./container-relation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./container-relation.vue?vue&type=template&id=c9ba66e8&scoped=true\"\nimport script from \"./container-relation.vue?vue&type=script&lang=js\"\nexport * from \"./container-relation.vue?vue&type=script&lang=js\"\nimport style0 from \"./container-relation.vue?vue&type=style&index=0&id=c9ba66e8&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9ba66e8\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","entity","scopedSlots","_u","key","fn","on","onSearch","model","value","callback","$$v","$set","expression","proxy","_v","_s","staticStyle","addByContainer","searchContainer","pendingColumns","pendingContainers","record","containerName","selectedRowKeys","setOfCheckedId","onChange","onSelectChange","relatedColumns","relatedContainers","refresh","relation","staticRenderFns","name","data","mainContainer","title","dataIndex","mounted","methods","getRelationContainer","res","output","containerList","status","relationContainerList","container","find","item","trim","includes","push","$message","warning","length","success","component"],"sourceRoot":""}