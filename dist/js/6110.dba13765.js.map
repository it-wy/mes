{"version":3,"file":"js/6110.dba13765.js","mappings":"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","sources":["webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?0ab2","webpack://data-v2/src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?4880","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/views/container-manager/close-open/close-open.vue?3e7f","webpack://data-v2/src/views/container-manager/close-open/close-open.vue","webpack://data-v2/./src/views/container-manager/close-open/close-open.vue?65da","webpack://data-v2/./src/views/container-manager/close-open/close-open.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"sign-container\"},[_c('h3',{staticClass:\"sign-title\"},[_vm._v(_vm._s(_vm.title || '请在下方区域签名'))]),_c('g-sign',{ref:\"signBoard\",attrs:{\"line-width\":_vm.lineWidth,\"line-color\":_vm.lineColor,\"background-color\":_vm.backgroundColor,\"save-format\":_vm.saveFormat},on:{\"save\":_vm.handleSave,\"clear\":_vm.handleClear,\"save-error\":_vm.handleError}})],1)]),_c('div',{staticClass:\"modal-footer\"},[_c('g-btn',{attrs:{\"text\":\"确认\",\"type\":\"primary\"},on:{\"callback\":_vm.save}}),_c('g-btn',{attrs:{\"text\":\"取消\"},on:{\"callback\":function($event){return _vm.$emit('closeModal')}}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"sign-container\">\r\n        <h3 class=\"sign-title\">{{ title || '请在下方区域签名' }}</h3>\r\n        <g-sign\r\n          ref=\"signBoard\"\r\n          :line-width=\"lineWidth\"\r\n          :line-color=\"lineColor\"\r\n          :background-color=\"backgroundColor\"\r\n          :save-format=\"saveFormat\"\r\n          @save=\"handleSave\"\r\n          @clear=\"handleClear\"\r\n          @save-error=\"handleError\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <g-btn text=\"确认\" @callback=\"save\" type=\"primary\"></g-btn>\r\n      <g-btn text=\"取消\" @callback=\"$emit('closeModal')\"></g-btn>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GSign from '@/components/g-sign/g-sign.vue';\r\n\r\nexport default {\r\n  name: \"GSignModal\",\r\n  components: {\r\n    GSign\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    saveFormat: {\r\n      type: String,\r\n      default: 'png',\r\n      validator: (value) => ['png', 'jpeg', 'webp'].includes(value)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      signatureData: null,\r\n      hasSignature: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleSave(imageData) {\r\n      this.signatureData = imageData;\r\n      this.hasSignature = true;\r\n    },\r\n    \r\n    handleClear() {\r\n      this.signatureData = null;\r\n      this.hasSignature = false;\r\n    },\r\n    \r\n    handleError(message) {\r\n      this.$message.error(message);\r\n    },\r\n    \r\n    save() {\r\n      if (!this.hasSignature) {\r\n        this.$message.error('请先进行签名');\r\n        return;\r\n      }\r\n      \r\n      this.$emit('success', this.signatureData);\r\n      this.$emit('closeModal');\r\n    },\r\n    \r\n    clearSignature() {\r\n      if (this.$refs.signBoard) {\r\n        this.$refs.signBoard.clearCanvas();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.modal {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.modal-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow: auto;\r\n}\r\n\r\n.sign-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.sign-title {\r\n  margin-top: 0;\r\n  margin-bottom: 16px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 12px 20px;\r\n  border-top: 1px solid #e8e8e8;\r\n  \r\n  :deep(.g-btn) {\r\n    margin-left: 8px;\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./g-sign-modal.vue?vue&type=template&id=e39a081c&scoped=true\"\nimport script from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nexport * from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./g-sign-modal.vue?vue&type=style&index=0&id=e39a081c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e39a081c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\",\"rules\":_vm.rules}},[_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('g-container-list',{attrs:{\"value\":_vm.entity.containerName},on:{\"update:value\":function($event){return _vm.$set(_vm.entity, \"containerName\", $event)}}})],1)]},proxy:true},{key:\"expand-card\",fn:function(){return [_c('div',{staticClass:\"expand-card\"},[_c('g-collapse',{attrs:{\"headerName\":\"批次信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"批次编号\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.entity.batchNo),callback:function ($$v) {_vm.$set(_vm.entity, \"batchNo\", $$v)},expression:\"entity.batchNo\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"物料编码\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.entity.materialCode),callback:function ($$v) {_vm.$set(_vm.entity, \"materialCode\", $$v)},expression:\"entity.materialCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"物料名称\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.entity.materialName),callback:function ($$v) {_vm.$set(_vm.entity, \"materialName\", $$v)},expression:\"entity.materialName\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"当前状态\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.entity.currentStatus),callback:function ($$v) {_vm.$set(_vm.entity, \"currentStatus\", $$v)},expression:\"entity.currentStatus\"}})],1)],1)],1)]},proxy:true}])})],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('g-collapse',{attrs:{\"headerName\":\"操作类型\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"操作类型\",\"prop\":\"operationType\",\"rules\":[{ required: true, message: '请选择操作类型' }]}},[_c('a-radio-group',{on:{\"change\":_vm.operationTypeChange},model:{value:(_vm.entity.operationType),callback:function ($$v) {_vm.$set(_vm.entity, \"operationType\", $$v)},expression:\"entity.operationType\"}},[_c('a-radio',{attrs:{\"value\":\"close\"}},[_vm._v(\"关闭\")]),_c('a-radio',{attrs:{\"value\":\"open\"}},[_vm._v(\"打开\")])],1)],1)],1),(_vm.entity.operationType === 'close')?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"关闭原因\",\"prop\":\"reasonId\",\"rules\":[{ required: true, message: '请选择关闭原因' }]}},[_c('a-select',{attrs:{\"placeholder\":\"请选择关闭原因\"},model:{value:(_vm.entity.reasonId),callback:function ($$v) {_vm.$set(_vm.entity, \"reasonId\", $$v)},expression:\"entity.reasonId\"}},_vm._l((_vm.closeReasons),function(item){return _c('a-select-option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1):_vm._e(),(_vm.entity.operationType === 'open')?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"打开原因\",\"prop\":\"reasonId\",\"rules\":[{ required: true, message: '请选择打开原因' }]}},[_c('a-select',{attrs:{\"placeholder\":\"请选择打开原因\"},model:{value:(_vm.entity.reasonId),callback:function ($$v) {_vm.$set(_vm.entity, \"reasonId\", $$v)},expression:\"entity.reasonId\"}},_vm._l((_vm.openReasons),function(item){return _c('a-select-option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1):_vm._e()],1)]},proxy:true}])}),_c('g-collapse',{attrs:{\"headerName\":\"数据采集\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('g-data-points',{attrs:{\"dataPoints\":_vm.entity.dataPoints,\"validDataName\":\"dataPoints\"}})]},proxy:true}])}),_c('g-collapse',{attrs:{\"headerName\":\"操作说明\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"操作说明\",\"prop\":\"description\",\"rules\":[{ required: true, message: '请输入操作说明' }]}},[_c('a-textarea',{attrs:{\"rows\":\"4\",\"placeholder\":\"请输入操作说明\",\"max-length\":1000},model:{value:(_vm.entity.description),callback:function ($$v) {_vm.$set(_vm.entity, \"description\", $$v)},expression:\"entity.description\"}})],1)],1)],1)]},proxy:true}])})]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":function($event){return _vm.refresh()}}}),_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"提交\",\"type\":\"primary\"},on:{\"callback\":function($event){return _vm.submitOperation()}}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-form-model\r\n    ref=\"form\"\r\n    :model=\"entity\"\r\n    layout=\"vertical\"\r\n    autocomplete=\"off\"\r\n    :rules=\"rules\"\r\n    class=\"h-father\"\r\n  >\r\n    <g-body-form-layout>\r\n      <!-- 搜索插槽 -->\r\n      <template #search-card>\r\n        <div class=\"search-card\">\r\n          <g-container-list :value.sync=\"entity.containerName\">\r\n          </g-container-list>\r\n        </div>\r\n      </template>\r\n      <!-- 展开插槽 -->\r\n      <template #expand-card>\r\n        <div class=\"expand-card\">\r\n          <g-collapse headerName=\"批次信息\">\r\n            <template #content>\r\n              <a-row :gutter=\"24\">\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"批次编号\">\r\n                    <a-input v-model=\"entity.batchNo\" disabled />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"物料编码\">\r\n                    <a-input v-model=\"entity.materialCode\" disabled />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"物料名称\">\r\n                    <a-input v-model=\"entity.materialName\" disabled />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"当前状态\">\r\n                    <a-input v-model=\"entity.currentStatus\" disabled />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </template>\r\n          </g-collapse>\r\n        </div>\r\n      </template>\r\n      <template #card-body>\r\n        <g-collapse headerName=\"操作类型\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"6\">\r\n                <a-form-model-item label=\"操作类型\" prop=\"operationType\" :rules=\"[{ required: true, message: '请选择操作类型' }]\">\r\n                  <a-radio-group v-model=\"entity.operationType\" @change=\"operationTypeChange\">\r\n                    <a-radio value=\"close\">关闭</a-radio>\r\n                    <a-radio value=\"open\">打开</a-radio>\r\n                  </a-radio-group>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"6\" v-if=\"entity.operationType === 'close'\">\r\n                <a-form-model-item label=\"关闭原因\" prop=\"reasonId\" :rules=\"[{ required: true, message: '请选择关闭原因' }]\">\r\n                  <a-select v-model=\"entity.reasonId\" placeholder=\"请选择关闭原因\">\r\n                    <a-select-option v-for=\"item in closeReasons\" :key=\"item.id\" :value=\"item.id\">\r\n                      {{ item.name }}\r\n                    </a-select-option>\r\n                  </a-select>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"6\" v-if=\"entity.operationType === 'open'\">\r\n                <a-form-model-item label=\"打开原因\" prop=\"reasonId\" :rules=\"[{ required: true, message: '请选择打开原因' }]\">\r\n                  <a-select v-model=\"entity.reasonId\" placeholder=\"请选择打开原因\">\r\n                    <a-select-option v-for=\"item in openReasons\" :key=\"item.id\" :value=\"item.id\">\r\n                      {{ item.name }}\r\n                    </a-select-option>\r\n                  </a-select>\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n        \r\n        <g-collapse headerName=\"数据采集\">\r\n          <template #content>\r\n            <g-data-points\r\n              :dataPoints=\"entity.dataPoints\"\r\n              validDataName=\"dataPoints\"\r\n            >\r\n            </g-data-points>\r\n          </template>\r\n        </g-collapse>\r\n        \r\n        <g-collapse headerName=\"操作说明\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"12\">\r\n                <a-form-model-item label=\"操作说明\" prop=\"description\" :rules=\"[{ required: true, message: '请输入操作说明' }]\">\r\n                  <a-textarea\r\n                    rows=\"4\"\r\n                    v-model=\"entity.description\"\r\n                    placeholder=\"请输入操作说明\"\r\n                    :max-length=\"1000\"\r\n                  ></a-textarea>\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n      </template>\r\n      <template #g-fixed-row>\r\n        <div class=\"g-fixed-row\">\r\n          <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh()\"></g-btn>\r\n          <g-btn size=\"large\" text=\"提交\" type=\"primary\" @callback=\"submitOperation()\">\r\n          </g-btn>\r\n        </div>\r\n      </template>\r\n    </g-body-form-layout>\r\n  </a-form-model>\r\n</template>\r\n\r\n<script>\r\nimport GSignModal from '@/components/g-sign-modal/g-sign-modal.vue';\r\nimport { createModal } from '@/utils';\r\n\r\nexport default {\r\n  name: 'DataV2CloseOpen',\r\n\r\n  data() {\r\n    return {\r\n      entity: {\r\n        containerName: \"\",\r\n        batchNo: \"\",\r\n        materialCode: \"\",\r\n        materialName: \"\",\r\n        currentStatus: \"\",\r\n        operationType: \"close\", // 默认关闭\r\n        reasonId: \"\",\r\n        description: \"\",\r\n        dataPoints: [\r\n          {\r\n            dataValue: \"\",\r\n            dataPointName: \"操作人员\",\r\n            isRequired: true,\r\n            dataType: \"String\",\r\n          },\r\n          {\r\n            dataValue: \"\",\r\n            dataPointName: \"操作时间\",\r\n            isRequired: true,\r\n            dataType: \"Timestamp\",\r\n          }\r\n        ],\r\n      },\r\n      rules: {\r\n        containerName: [\r\n          { required: true, message: '请选择批次', trigger: 'change' }\r\n        ],\r\n        operationType: [\r\n          { required: true, message: '请选择操作类型', trigger: 'change' }\r\n        ],\r\n        reasonId: [\r\n          { required: true, message: '请选择原因', trigger: 'change' }\r\n        ],\r\n        description: [\r\n          { required: true, message: '请输入操作说明', trigger: 'blur' }\r\n        ]\r\n      },\r\n      closeReasons: [\r\n        { id: '1', name: '质量问题' },\r\n        { id: '2', name: '设备故障' },\r\n        { id: '3', name: '流程结束' },\r\n        { id: '4', name: '其他原因' }\r\n      ],\r\n      openReasons: [\r\n        { id: '1', name: '恢复生产' },\r\n        { id: '2', name: '问题解决' },\r\n        { id: '3', name: '特殊放行' },\r\n        { id: '4', name: '其他原因' }\r\n      ]\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    \"entity.containerName\": {\r\n      handler() {\r\n        this.$refs.form && this.$refs.form.validateField(\"containerName\");\r\n        if (this.entity.containerName) {\r\n          this.fetchBatchInfo();\r\n        }\r\n      },\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    // 初始化页面数据\r\n  },\r\n\r\n  methods: {\r\n    // 获取批次信息\r\n    fetchBatchInfo() {\r\n      // 模拟获取批次信息\r\n      // 实际项目中应该调用API获取批次信息\r\n      setTimeout(() => {\r\n        this.entity.batchNo = \"B\" + Math.floor(Math.random() * 10000);\r\n        this.entity.materialCode = \"M\" + Math.floor(Math.random() * 10000);\r\n        this.entity.materialName = \"测试物料\";\r\n        this.entity.currentStatus = \"在库\";\r\n      }, 500);\r\n    },\r\n    \r\n    // 操作类型变更\r\n    operationTypeChange() {\r\n      // 切换操作类型时清空原因选择\r\n      this.entity.reasonId = \"\";\r\n    },\r\n    \r\n    // 提交操作\r\n    submitOperation() {\r\n      this.$refs.form.validate().then((valid) => {\r\n        if (!valid) {\r\n          return;\r\n        }\r\n        \r\n        this.createSignModal();\r\n      });\r\n    },\r\n\r\n     // 创建签名弹窗\r\n    createSignModal() {\r\n      createModal({\r\n        title: '签名确认',\r\n        width: '600px',\r\n      },{\r\n        component: GSignModal,\r\n        success: (v) => {\r\n          console.log('签名信息:', v);\r\n          this.saveOperation();\r\n        },\r\n      },);\r\n    },\r\n    \r\n    // 保存操作\r\n    saveOperation() {\r\n      // 模拟API调用\r\n      const operationText = this.entity.operationType === 'close' ? '关闭' : '打开';\r\n      this.$message.success(`批次${operationText}操作成功`);\r\n      this.refresh();\r\n    },\r\n    \r\n    // 刷新页面\r\n    refresh() {\r\n      this.entity = {\r\n        containerName: \"\",\r\n        batchNo: \"\",\r\n        materialCode: \"\",\r\n        materialName: \"\",\r\n        currentStatus: \"\",\r\n        operationType: \"close\",\r\n        reasonId: \"\",\r\n        description: \"\",\r\n        dataPoints: [\r\n          {\r\n            dataValue: \"\",\r\n            dataPointName: \"操作人员\",\r\n            isRequired: true,\r\n            dataType: \"String\",\r\n          },\r\n          {\r\n            dataValue: \"\",\r\n            dataPointName: \"操作时间\",\r\n            isRequired: true,\r\n            dataType: \"Timestamp\",\r\n          }\r\n        ],\r\n      };\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.search-card {\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.g-fixed-row {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./close-open.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./close-open.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./close-open.vue?vue&type=template&id=891a1dc0&scoped=true\"\nimport script from \"./close-open.vue?vue&type=script&lang=js\"\nexport * from \"./close-open.vue?vue&type=script&lang=js\"\nimport style0 from \"./close-open.vue?vue&type=style&index=0&id=891a1dc0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"891a1dc0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","title","ref","attrs","lineWidth","lineColor","backgroundColor","saveFormat","on","handleSave","handleClear","handleError","save","$event","$emit","staticRenderFns","name","components","GSign","props","type","String","default","Number","validator","value","includes","data","signatureData","hasSignature","methods","imageData","message","$message","error","clearSignature","$refs","signBoard","clearCanvas","component","entity","rules","scopedSlots","_u","key","fn","containerName","$set","proxy","model","callback","$$v","expression","required","operationTypeChange","operationType","_l","item","id","_e","dataPoints","refresh","submitOperation","batchNo","materialCode","materialName","currentStatus","reasonId","description","dataValue","dataPointName","isRequired","dataType","trigger","closeReasons","openReasons","watch","handler","form","validateField","fetchBatchInfo","mounted","setTimeout","Math","floor","random","validate","then","valid","createSignModal","width","success","v","console","log","saveOperation","operationText"],"sourceRoot":""}