"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[2369,8511],{99319:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-content"},[t("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:e.rules,model:e.copyForm}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:e.copyForm.value,callback:function(t){e.$set(e.copyForm,"value",t)},expression:"copyForm.value"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:e.copyForm.copyValue,callback:function(t){e.$set(e.copyForm,"copyValue",t)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),t("div",{staticClass:"modal-footer"},[t("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:e.save}}),t("g-btn",{attrs:{text:"取消"},on:{callback:function(t){return e.$emit("closeModal")}}})],1)])},n=[],o=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((e=>{e&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),i=o,r=a(1001),l=(0,r.Z)(i,s,n,!1,null,"04e98444",null),d=l.exports},42369:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("g-body-layout",{attrs:{pageIndex:e.pageNumber,pageSize:e.pageSize,total:e.total,filterText:e.filterText},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},pageIndexChange:e.pageIndexChange,pageSizeChange:e.pageSizeChange,suffixSearchCallback:e.onFilterReady},scopedSlots:e._u([{key:"btnGroup",fn:function(){return[t("g-btn-group",{attrs:{buttonLists:e.btnList},on:{btnCallBack:e.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[t("g-ndo-table",{attrs:{id:e.id,handName:"批次等级",dataList:e.dataList,isTableLoading:e.loading,total:e.total},on:{rowClick:e.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[e.isShowEdit?t("create-or-edit-batch-level",{attrs:{ndoEditParams:e.ndoEditParams,refreshTag:e.refreshTag,saveTag:e.saveTag,resetTag:e.resetTag},on:{childRefresh:function(t){return e.childRefresh(t)},rowClick:function(t){return e.rowClick(t)}}}):t("g-empty")]},proxy:!0}])})},n=[],o=a(58511),i=a(99319),r=a(36026),l={name:"BatchLevel",mixins:[r.He],components:{CreateOrEditBatchLevel:o["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:i.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:e=>{console.log(e),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(e.value,e.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该批次等级吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(e){this.loading=!0,setTimeout((()=>{e.finishedCallback();let t=[];const a=["质量等级","工艺等级","性能等级","安全等级","环保等级","其他等级"],s=["启用","禁用"];for(let e=0;e<25;e++){const n=e%6;let o,i,r;switch(n){case 0:const t=[{code:"A",name:"A级",desc:"最高质量标准"},{code:"B",name:"B级",desc:"良好质量标准"},{code:"C",name:"C级",desc:"一般质量标准"},{code:"D",name:"D级",desc:"次品"}],a=e%4;o=t[a].code,i=t[a].name,r=t[a].desc;break;case 1:const s=[{code:"P1",name:"工艺一级",desc:"最高工艺要求"},{code:"P2",name:"工艺二级",desc:"标准工艺要求"},{code:"P3",name:"工艺三级",desc:"基础工艺要求"}],n=e%3;o=s[n].code,i=s[n].name,r=s[n].desc;break;case 2:const l=[{code:"H",name:"高性能",desc:"高性能要求"},{code:"M",name:"中性能",desc:"中等性能要求"},{code:"L",name:"低性能",desc:"基础性能要求"}],d=e%3;o=l[d].code,i=l[d].name,r=l[d].desc;break;case 3:const c=[{code:"S1",name:"安全一级",desc:"最高安全要求"},{code:"S2",name:"安全二级",desc:"标准安全要求"},{code:"S3",name:"安全三级",desc:"基础安全要求"}],m=e%3;o=c[m].code,i=c[m].name,r=c[m].desc;break;case 4:const u=[{code:"E1",name:"环保一级",desc:"最高环保要求"},{code:"E2",name:"环保二级",desc:"标准环保要求"},{code:"E3",name:"环保三级",desc:"基础环保要求"}],p=e%3;o=u[p].code,i=u[p].name,r=u[p].desc;break;case 5:const h=[{code:"O1",name:"其他一级",desc:"其他特殊要求"},{code:"O2",name:"其他二级",desc:"其他一般要求"}],y=e%2;o=h[y].code,i=h[y].name,r=h[y].desc;break}t[e]={id:e+1,levelCode:`BL${String(e+1).padStart(4,"0")}`,name:i,levelType:a[n],levelCode:o,description:r,status:s[e%2],createdBy:"admin",createdTime:"2024-03-19 "+(10+e%10)+":"+e%60}}this.filterText&&(console.log(this.filterText),t=t.filter((e=>e.levelCode.indexOf(this.filterText)>-1||e.name.indexOf(this.filterText)>-1||e.levelType.indexOf(this.filterText)>-1||e.description.indexOf(this.filterText)>-1))),e.successCallback({items:t,totalCount:2*t.length})}),1e3)}}},d=l,c=a(1001),m=(0,c.Z)(d,s,n,!1,null,"287d83ee",null),u=m.exports},58511:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelCode",attrs:{label:"等级编码",prop:"levelCode"}},[t("a-input",{attrs:{placeholder:"请输入等级编码，格式为BL开头加4位数字",name:"levelCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.levelCode,callback:function(t){e.$set(e.entity,"levelCode",t)},expression:"entity.levelCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"等级名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入等级名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelType",attrs:{label:"等级类型",prop:"levelType"}},[t("a-select",{attrs:{placeholder:"请选择等级类型",name:"levelType"},model:{value:e.entity.levelType,callback:function(t){e.$set(e.entity,"levelType",t)},expression:"entity.levelType"}},[t("a-select-option",{attrs:{value:"质量等级"}},[e._v("质量等级")]),t("a-select-option",{attrs:{value:"工艺等级"}},[e._v("工艺等级")]),t("a-select-option",{attrs:{value:"性能等级"}},[e._v("性能等级")]),t("a-select-option",{attrs:{value:"安全等级"}},[e._v("安全等级")]),t("a-select-option",{attrs:{value:"环保等级"}},[e._v("环保等级")]),t("a-select-option",{attrs:{value:"其他等级"}},[e._v("其他等级")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelCode",attrs:{label:"等级代码",prop:"levelCode"}},[t("a-input",{attrs:{placeholder:"请输入等级代码",name:"levelCode"},on:{change:e.inChange},model:{value:e.entity.levelCode,callback:function(t){e.$set(e.entity,"levelCode",t)},expression:"entity.levelCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"等级描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述",rows:2,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"等级标准"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-standard-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addStandard}},[e._v("添加标准")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.standardColumns,dataSource:e.entity.standards,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"standardName",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准名称"},model:{value:e.entity.standards[n].standardName,callback:function(t){e.$set(e.entity.standards[n],"standardName",t)},expression:"entity.standards[index].standardName"}})]}},{key:"standardValue",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准值"},model:{value:e.entity.standards[n].standardValue,callback:function(t){e.$set(e.entity.standards[n],"standardValue",t)},expression:"entity.standards[index].standardValue"}})]}},{key:"standardUnit",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准单位"},model:{value:e.entity.standards[n].standardUnit,callback:function(t){e.$set(e.entity.standards[n],"standardUnit",t)},expression:"entity.standards[index].standardUnit"}})]}},{key:"note",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.entity.standards[n].note,callback:function(t){e.$set(e.entity.standards[n],"note",t)},expression:"entity.standards[index].note"}})]}},{key:"action",fn:function(a,s,n){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeStandard(n)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},n=[],o=a(36026),i={name:"CreateOrEditBatchLevel",mixins:[o.GE],data(){return{loading:!1,entity:{id:void 0,levelCode:"",name:"",levelType:"",levelCode:"",description:"",standards:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{levelCode:[{required:!0,message:"请输入等级编码",trigger:"change"},{pattern:/^BL\d{4}$/,message:"等级编码必须为BL开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入等级名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"等级名称不能包含前后空格",trigger:"change"}],levelType:[{required:!0,message:"请选择等级类型",trigger:"change"}],levelCode:[{required:!0,message:"请输入等级代码",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},standardColumns:[{title:"标准名称",dataIndex:"standardName",key:"standardName",width:"25%",scopedSlots:{customRender:"standardName"}},{title:"标准值",dataIndex:"standardValue",key:"standardValue",width:"25%",scopedSlots:{customRender:"standardValue"}},{title:"标准单位",dataIndex:"standardUnit",key:"standardUnit",width:"20%",scopedSlots:{customRender:"standardUnit"}},{title:"说明",dataIndex:"note",key:"note",width:"20%",scopedSlots:{customRender:"note"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,levelCode:"",name:"",levelType:"",levelCode:"",description:"",standards:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,standards:e.standards||[]}}},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(e){console.log(e.target.value)},addStandard(){this.entity.standards.push({id:Date.now(),standardName:"",standardValue:"",standardUnit:"",note:""})},removeStandard(e){this.entity.standards.splice(e,1)}}},r=i,l=a(1001),d=(0,l.Z)(r,s,n,!1,null,"f34a6c66",null),c=d.exports}}]);
//# sourceMappingURL=2369.8b0bcef2.js.map