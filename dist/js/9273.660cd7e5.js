"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[9273,7136],{69273:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"code-editor-container"},[e("a-card",{attrs:{bordered:!1}},[e("template",{slot:"title"},[e("div",{staticClass:"editor-header"},[e("div",{staticClass:"left"},[e("span",[t._v("代码编辑器")]),e("a-select",{staticStyle:{width:"120px",margin:"0 16px"},on:{change:t.handleLanguageChange},model:{value:t.currentLanguage,callback:function(e){t.currentLanguage=e},expression:"currentLanguage"}},[e("a-select-option",{attrs:{value:"javascript"}},[t._v("JavaScript")]),e("a-select-option",{attrs:{value:"html"}},[t._v("HTML")])],1)],1),e("div",{staticClass:"right"},[e("a-button-group",[e("a-button",{attrs:{type:"primary"},on:{click:t.handleRun}},[e("a-icon",{attrs:{type:"play-circle"}}),t._v("运行 ")],1),e("a-button",{attrs:{type:"primary"},on:{click:t.togglePreview}},[e("a-icon",{attrs:{type:"eye"}}),t._v("预览 ")],1)],1)],1)])]),e("div",{staticClass:"editor-content",class:{"with-preview":t.showPreview}},[e("div",{staticClass:"editor-panel"},[e("MonacoEditor",{ref:"monacoEditor",attrs:{language:t.currentLanguage,options:t.editorOptions},on:{change:t.onChange},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}})],1),t.showPreview?e("div",{staticClass:"preview-panel"},[e("div",{staticClass:"preview-header"},[e("span",[t._v("预览")]),e("a-button",{attrs:{type:"link"},on:{click:t.togglePreview}},[e("a-icon",{attrs:{type:"close"}})],1)],1),e("div",{staticClass:"preview-content"},["html"===t.currentLanguage?e("iframe",{ref:"previewFrame",staticClass:"preview-frame"}):e("div",{staticClass:"console-output"},[e("div",{staticClass:"console-header"},[e("span",[t._v("控制台输出")]),e("a-button",{attrs:{type:"link"},on:{click:t.clearConsole}},[e("a-icon",{attrs:{type:"delete"}}),t._v("清除 ")],1)],1),e("div",{staticClass:"console-content"},[t._l(t.consoleOutput,(function(i,o){return[e("div",{key:o,class:["log-item",i.type]},[e("span",{staticClass:"log-icon"},[t._v(t._s("error"===i.type?"❌":"✅"))]),e("span",{staticClass:"log-content"},[t._v(t._s(i.content))])])]}))],2)])])]):t._e()])],2)],1)},n=[],s=i(37136),a={name:"CodeEditor",components:{MonacoEditor:s["default"]},data(){return{code:"",currentLanguage:"javascript",showPreview:!1,consoleOutput:[],editorOptions:{theme:"vs-dark",fontSize:14,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,readOnly:!1,minimap:{enabled:!0}}}},methods:{handleLanguageChange(t){this.currentLanguage=t,this.clearConsole(),this.showPreview&&this.$nextTick((()=>{this.updatePreview()}))},onChange(t){this.code=t,this.showPreview&&"html"===this.currentLanguage&&this.updatePreview()},togglePreview(){this.showPreview=!this.showPreview,this.showPreview&&this.$nextTick((()=>{this.updatePreview()}))},handleRun(){"javascript"===this.currentLanguage?this.runJavaScript():this.updatePreview()},runJavaScript(){this.clearConsole();try{const t=(...t)=>{this.consoleOutput.push({type:"log",content:t.join(" ")})},e=(...t)=>{this.consoleOutput.push({type:"error",content:t.join(" ")})},i=new Function("console","try { "+this.code+" } catch (error) { console.error(error.message); }");i({log:t,error:e}),this.showPreview||this.togglePreview()}catch(t){this.consoleOutput.push({type:"error",content:t.message})}},updatePreview(){if("html"===this.currentLanguage){const t=this.$refs.previewFrame;if(t){const e=t.contentDocument||t.contentWindow.document;e.open(),e.write(this.code),e.close()}}},clearConsole(){this.consoleOutput=[]}}},r=a,c=i(1001),l=(0,c.Z)(r,o,n,!1,null,"ad898174",null),d=l.exports},37136:function(t,e,i){i.r(e),i.d(e,{default:function(){return l}});var o=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"monaco-editor-container"})},n=[],s={name:"MonacoEditor",props:{value:{type:String,default:""},language:{type:String,default:"javascript"},options:{type:Object,default:()=>({})}},data(){return{editor:null,monaco:null,subscription:null}},watch:{value(t){this.editor&&t!==this.editor.getValue()&&this.editor.setValue(t)},language(t){this.editor&&this.monaco.editor.setModelLanguage(this.editor.getModel(),t)},options:{deep:!0,handler(t){this.editor&&this.editor.updateOptions(t)}}},mounted(){this.initMonaco()},beforeDestroy(){this.destroyMonaco()},methods:{async initMonaco(){const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js",t.onload=()=>{window.require.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs"}}),window.require(["vs/editor/editor.main"],(()=>{this.monaco=window.monaco,this.initEditor()}))},document.body.appendChild(t)},initEditor(){const t={value:this.value,language:this.language,...this.options};this.editor=this.monaco.editor.create(this.$refs.container,t),this.subscription=this.editor.onDidChangeModelContent((()=>{const t=this.editor.getValue();this.$emit("input",t),this.$emit("change",t)})),window.addEventListener("resize",this.handleResize)},handleResize(){this.editor&&this.editor.layout()},destroyMonaco(){this.subscription&&this.subscription.dispose(),this.editor&&this.editor.dispose(),window.removeEventListener("resize",this.handleResize)}}},a=s,r=i(1001),c=(0,r.Z)(a,o,n,!1,null,"2b10c320",null),l=c.exports}}]);
//# sourceMappingURL=9273.660cd7e5.js.map