"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[8511],{58511:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelCode",attrs:{label:"等级编码",prop:"levelCode"}},[t("a-input",{attrs:{placeholder:"请输入等级编码，格式为BL开头加4位数字",name:"levelCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.levelCode,callback:function(t){e.$set(e.entity,"levelCode",t)},expression:"entity.levelCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"等级名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入等级名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelType",attrs:{label:"等级类型",prop:"levelType"}},[t("a-select",{attrs:{placeholder:"请选择等级类型",name:"levelType"},model:{value:e.entity.levelType,callback:function(t){e.$set(e.entity,"levelType",t)},expression:"entity.levelType"}},[t("a-select-option",{attrs:{value:"质量等级"}},[e._v("质量等级")]),t("a-select-option",{attrs:{value:"工艺等级"}},[e._v("工艺等级")]),t("a-select-option",{attrs:{value:"性能等级"}},[e._v("性能等级")]),t("a-select-option",{attrs:{value:"安全等级"}},[e._v("安全等级")]),t("a-select-option",{attrs:{value:"环保等级"}},[e._v("环保等级")]),t("a-select-option",{attrs:{value:"其他等级"}},[e._v("其他等级")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"levelCode",attrs:{label:"等级代码",prop:"levelCode"}},[t("a-input",{attrs:{placeholder:"请输入等级代码",name:"levelCode"},on:{change:e.inChange},model:{value:e.entity.levelCode,callback:function(t){e.$set(e.entity,"levelCode",t)},expression:"entity.levelCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"等级描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述",rows:2,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"等级标准"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-standard-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addStandard}},[e._v("添加标准")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.standardColumns,dataSource:e.entity.standards,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"standardName",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准名称"},model:{value:e.entity.standards[n].standardName,callback:function(t){e.$set(e.entity.standards[n],"standardName",t)},expression:"entity.standards[index].standardName"}})]}},{key:"standardValue",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准值"},model:{value:e.entity.standards[n].standardValue,callback:function(t){e.$set(e.entity.standards[n],"standardValue",t)},expression:"entity.standards[index].standardValue"}})]}},{key:"standardUnit",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入标准单位"},model:{value:e.entity.standards[n].standardUnit,callback:function(t){e.$set(e.entity.standards[n],"standardUnit",t)},expression:"entity.standards[index].standardUnit"}})]}},{key:"note",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.entity.standards[n].note,callback:function(t){e.$set(e.entity.standards[n],"note",t)},expression:"entity.standards[index].note"}})]}},{key:"action",fn:function(a,s,n){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeStandard(n)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},n=[],r=a(36026),d={name:"CreateOrEditBatchLevel",mixins:[r.GE],data(){return{loading:!1,entity:{id:void 0,levelCode:"",name:"",levelType:"",levelCode:"",description:"",standards:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{levelCode:[{required:!0,message:"请输入等级编码",trigger:"change"},{pattern:/^BL\d{4}$/,message:"等级编码必须为BL开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入等级名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"等级名称不能包含前后空格",trigger:"change"}],levelType:[{required:!0,message:"请选择等级类型",trigger:"change"}],levelCode:[{required:!0,message:"请输入等级代码",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},standardColumns:[{title:"标准名称",dataIndex:"standardName",key:"standardName",width:"25%",scopedSlots:{customRender:"standardName"}},{title:"标准值",dataIndex:"standardValue",key:"standardValue",width:"25%",scopedSlots:{customRender:"standardValue"}},{title:"标准单位",dataIndex:"standardUnit",key:"standardUnit",width:"20%",scopedSlots:{customRender:"standardUnit"}},{title:"说明",dataIndex:"note",key:"note",width:"20%",scopedSlots:{customRender:"note"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,levelCode:"",name:"",levelType:"",levelCode:"",description:"",standards:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,standards:e.standards||[]}}},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(e){console.log(e.target.value)},addStandard(){this.entity.standards.push({id:Date.now(),standardName:"",standardValue:"",standardUnit:"",note:""})},removeStandard(e){this.entity.standards.splice(e,1)}}},i=d,l=a(1001),o=(0,l.Z)(i,s,n,!1,null,"f34a6c66",null),c=o.exports}}]);
//# sourceMappingURL=8511.e2c842ba.js.map