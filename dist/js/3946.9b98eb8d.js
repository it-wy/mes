"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[3946],{63946:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"typeCode",attrs:{label:"类型编码",prop:"typeCode"}},[t("a-input",{attrs:{placeholder:"请输入类型编码，格式为T开头加4位数字",name:"typeCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.typeCode,callback:function(t){e.$set(e.entity,"typeCode",t)},expression:"entity.typeCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"类型名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入类型名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"category",attrs:{label:"产品分类",prop:"category"}},[t("a-select",{attrs:{placeholder:"请选择产品分类",name:"category"},model:{value:e.entity.category,callback:function(t){e.$set(e.entity,"category",t)},expression:"entity.category"}},[t("a-select-option",{attrs:{value:"电子设备"}},[e._v("电子设备")]),t("a-select-option",{attrs:{value:"智能家居"}},[e._v("智能家居")]),t("a-select-option",{attrs:{value:"网络设备"}},[e._v("网络设备")]),t("a-select-option",{attrs:{value:"办公设备"}},[e._v("办公设备")]),t("a-select-option",{attrs:{value:"安防设备"}},[e._v("安防设备")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"familyId",attrs:{label:"所属产品家族",prop:"familyId"}},[t("a-select",{attrs:{placeholder:"请选择所属产品家族",name:"familyId"},on:{change:e.handleFamilyChange},model:{value:e.entity.familyId,callback:function(t){e.$set(e.entity,"familyId",t)},expression:"entity.familyId"}},e._l(e.familyList,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"modelNumber",attrs:{label:"型号",prop:"modelNumber"}},[t("a-input",{attrs:{placeholder:"请输入产品型号",name:"modelNumber"},model:{value:e.entity.modelNumber,callback:function(t){e.$set(e.entity,"modelNumber",t)},expression:"entity.modelNumber"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{ref:"specification",attrs:{label:"规格说明",prop:"specification"}},[t("a-textarea",{attrs:{placeholder:"请输入规格说明",rows:3,"max-length":500,name:"specification"},model:{value:e.entity.specification,callback:function(t){e.$set(e.entity,"specification",t)},expression:"entity.specification"}})],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{ref:"description",attrs:{label:"类型描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入类型描述",rows:3,"max-length":1e3,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"技术参数"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-param-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addParameter}},[e._v("添加参数")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.parameterColumns,dataSource:e.entity.parameters,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"paramName",fn:function(a,r,i){return[t("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.entity.parameters[i].paramName,callback:function(t){e.$set(e.entity.parameters[i],"paramName",t)},expression:"entity.parameters[index].paramName"}})]}},{key:"paramValue",fn:function(a,r,i){return[t("a-input",{attrs:{placeholder:"请输入参数值"},model:{value:e.entity.parameters[i].paramValue,callback:function(t){e.$set(e.entity.parameters[i],"paramValue",t)},expression:"entity.parameters[index].paramValue"}})]}},{key:"paramUnit",fn:function(a,r,i){return[t("a-input",{attrs:{placeholder:"请输入单位"},model:{value:e.entity.parameters[i].paramUnit,callback:function(t){e.$set(e.entity.parameters[i],"paramUnit",t)},expression:"entity.parameters[index].paramUnit"}})]}},{key:"action",fn:function(a,r,i){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeParameter(i)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],s=a(36026),n={name:"CreateOrEditProductType",mixins:[s.GE],data(){return{loading:!1,entity:{id:void 0,typeCode:"",name:"",category:"",familyId:void 0,familyName:"",modelNumber:"",specification:"",description:"",status:"启用",parameters:[],productCount:0,createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},familyList:[],rules:{typeCode:[{required:!0,message:"请输入类型编码",trigger:"change"},{pattern:/^T\d{4}$/,message:"类型编码必须为T开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入类型名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"类型名称不能包含前后空格",trigger:"change"}],category:[{required:!0,message:"请选择产品分类",trigger:"change"}],familyId:[{required:!0,message:"请选择所属产品家族",trigger:"change"}],modelNumber:[{required:!0,message:"请输入产品型号",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},parameterColumns:[{title:"参数名称",dataIndex:"paramName",key:"paramName",width:"30%",scopedSlots:{customRender:"paramName"}},{title:"参数值",dataIndex:"paramValue",key:"paramValue",width:"30%",scopedSlots:{customRender:"paramValue"}},{title:"单位",dataIndex:"paramUnit",key:"paramUnit",width:"20%",scopedSlots:{customRender:"paramUnit"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},created(){this.fetchFamilyList()},methods:{fetchFamilyList(){setTimeout((()=>{this.familyList=[{id:1,name:"华为手机系列",manufacturer:"华为"},{id:2,name:"小米家电系列",manufacturer:"小米"},{id:3,name:"联想电脑系列",manufacturer:"联想"},{id:4,name:"戴尔服务器系列",manufacturer:"戴尔"},{id:5,name:"惠普打印系列",manufacturer:"惠普"}]}),300)},init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,typeCode:"",name:"",category:"",familyId:void 0,familyName:"",modelNumber:"",specification:"",description:"",status:"启用",parameters:[],productCount:0,createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,parameters:e.parameters||[]}}},async save(){let e=await this.checkError();if(e){const e=this.entity.parameters.find((e=>!e.paramName||!e.paramValue));if(e)return void this.$message.error("所有技术参数必须有名称和值");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(e){console.log(e.target.value)},handleFamilyChange(e){const t=this.familyList.find((t=>t.id===e));t&&(this.entity.familyName=t.name)},addParameter(){this.entity.parameters.push({id:Date.now(),paramName:"",paramValue:"",paramUnit:""})},removeParameter(e){this.entity.parameters.splice(e,1)}}},o=n,m=a(1001),l=(0,m.Z)(o,r,i,!1,null,"e2ff5160",null),d=l.exports}}]);
//# sourceMappingURL=3946.9b98eb8d.js.map