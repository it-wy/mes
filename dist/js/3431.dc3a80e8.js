"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[3431,995],{99319:function(e,t,a){a.d(t,{Z:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-content"},[t("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:e.rules,model:e.copyForm}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:e.copyForm.value,callback:function(t){e.$set(e.copyForm,"value",t)},expression:"copyForm.value"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:e.copyForm.copyValue,callback:function(t){e.$set(e.copyForm,"copyValue",t)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),t("div",{staticClass:"modal-footer"},[t("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:e.save}}),t("g-btn",{attrs:{text:"取消"},on:{callback:function(t){return e.$emit("closeModal")}}})],1)])},n=[],o=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((e=>{e&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),i=o,r=a(1001),l=(0,r.Z)(i,s,n,!1,null,"04e98444",null),m=l.exports},995:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"unitCode",attrs:{label:"单位编码",prop:"unitCode"}},[t("a-input",{attrs:{placeholder:"请输入单位编码，格式为UM开头加4位数字",name:"unitCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.unitCode,callback:function(t){e.$set(e.entity,"unitCode",t)},expression:"entity.unitCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"单位名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入单位名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"symbol",attrs:{label:"单位符号",prop:"symbol"}},[t("a-input",{attrs:{placeholder:"请输入单位符号",name:"symbol"},on:{change:e.inChange},model:{value:e.entity.symbol,callback:function(t){e.$set(e.entity,"symbol",t)},expression:"entity.symbol"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"unitType",attrs:{label:"单位类型",prop:"unitType"}},[t("a-select",{attrs:{placeholder:"请选择单位类型",name:"unitType"},model:{value:e.entity.unitType,callback:function(t){e.$set(e.entity,"unitType",t)},expression:"entity.unitType"}},[t("a-select-option",{attrs:{value:"长度单位"}},[e._v("长度单位")]),t("a-select-option",{attrs:{value:"重量单位"}},[e._v("重量单位")]),t("a-select-option",{attrs:{value:"体积单位"}},[e._v("体积单位")]),t("a-select-option",{attrs:{value:"面积单位"}},[e._v("面积单位")]),t("a-select-option",{attrs:{value:"温度单位"}},[e._v("温度单位")]),t("a-select-option",{attrs:{value:"时间单位"}},[e._v("时间单位")]),t("a-select-option",{attrs:{value:"电力单位"}},[e._v("电力单位")]),t("a-select-option",{attrs:{value:"其他单位"}},[e._v("其他单位")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"baseUnit",attrs:{label:"基本单位",prop:"baseUnit"}},[t("a-switch",{on:{change:e.handleBaseUnitChange},model:{value:e.entity.baseUnit,callback:function(t){e.$set(e.entity,"baseUnit",t)},expression:"entity.baseUnit"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"conversionRate",attrs:{label:"转换比率",prop:"conversionRate"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.entity.baseUnit,min:1e-6,precision:6,placeholder:"请输入转换比率",name:"conversionRate"},model:{value:e.entity.conversionRate,callback:function(t){e.$set(e.entity,"conversionRate",t)},expression:"entity.conversionRate"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardInfo",attrs:{label:"标准信息",prop:"standardInfo"}},[t("a-select",{attrs:{placeholder:"请选择标准信息",name:"standardInfo"},model:{value:e.entity.standardInfo,callback:function(t){e.$set(e.entity,"standardInfo",t)},expression:"entity.standardInfo"}},[t("a-select-option",{attrs:{value:"国际标准单位(SI)"}},[e._v("国际标准单位(SI)")]),t("a-select-option",{attrs:{value:"非SI单位"}},[e._v("非SI单位")]),t("a-select-option",{attrs:{value:"行业标准单位"}},[e._v("行业标准单位")]),t("a-select-option",{attrs:{value:"自定义单位"}},[e._v("自定义单位")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"单位描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述",rows:2,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"单位使用示例"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-example-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addExample}},[e._v("添加示例")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.exampleColumns,dataSource:e.entity.examples,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"usageValue",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入示例值"},model:{value:e.entity.examples[n].usageValue,callback:function(t){e.$set(e.entity.examples[n],"usageValue",t)},expression:"entity.examples[index].usageValue"}})]}},{key:"usageContext",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入使用场景"},model:{value:e.entity.examples[n].usageContext,callback:function(t){e.$set(e.entity.examples[n],"usageContext",t)},expression:"entity.examples[index].usageContext"}})]}},{key:"note",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.entity.examples[n].note,callback:function(t){e.$set(e.entity.examples[n],"note",t)},expression:"entity.examples[index].note"}})]}},{key:"action",fn:function(a,s,n){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeExample(n)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},n=[],o=a(36026),i={name:"CreateOrEditUnitFoMeasure",mixins:[o.GE],data(){return{loading:!1,entity:{id:void 0,unitCode:"",name:"",symbol:"",unitType:"",baseUnit:!1,conversionRate:1,standardInfo:"",description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{unitCode:[{required:!0,message:"请输入单位编码",trigger:"change"},{pattern:/^UM\d{4}$/,message:"单位编码必须为UM开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入单位名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"单位名称不能包含前后空格",trigger:"change"}],symbol:[{required:!0,message:"请输入单位符号",trigger:"change"}],unitType:[{required:!0,message:"请选择单位类型",trigger:"change"}],conversionRate:[{required:!0,message:"请输入转换比率",trigger:"change"},{type:"number",min:1e-6,message:"转换比率必须大于0",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],standardInfo:[{required:!0,message:"请选择标准信息",trigger:"change"}]},exampleColumns:[{title:"示例值",dataIndex:"usageValue",key:"usageValue",width:"25%",scopedSlots:{customRender:"usageValue"}},{title:"使用场景",dataIndex:"usageContext",key:"usageContext",width:"30%",scopedSlots:{customRender:"usageContext"}},{title:"说明",dataIndex:"note",key:"note",width:"35%",scopedSlots:{customRender:"note"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,unitCode:"",name:"",symbol:"",unitType:"",baseUnit:!1,conversionRate:1,standardInfo:"",description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,examples:e.examples||[]}}},async save(){let e=await this.checkError();if(e){if(this.entity.baseUnit&&1!==this.entity.conversionRate)return void this.$message.error("基本单位的转换比率必须为1");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(e){console.log(e.target.value)},handleBaseUnitChange(e){e&&(this.entity.conversionRate=1)},addExample(){this.entity.examples.push({id:Date.now(),usageValue:"",usageContext:"",note:""})},removeExample(e){this.entity.examples.splice(e,1)}}},r=i,l=a(1001),m=(0,l.Z)(r,s,n,!1,null,"bfdd121a",null),c=m.exports},23431:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("g-body-layout",{attrs:{pageIndex:e.pageNumber,pageSize:e.pageSize,total:e.total,filterText:e.filterText},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},pageIndexChange:e.pageIndexChange,pageSizeChange:e.pageSizeChange,suffixSearchCallback:e.onFilterReady},scopedSlots:e._u([{key:"btnGroup",fn:function(){return[t("g-btn-group",{attrs:{buttonLists:e.btnList},on:{btnCallBack:e.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[t("g-ndo-table",{attrs:{id:e.id,handName:"计量单位",dataList:e.dataList,isTableLoading:e.loading,total:e.total},on:{rowClick:e.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[e.isShowEdit?t("create-or-edit-unit-fo-measure",{attrs:{ndoEditParams:e.ndoEditParams,refreshTag:e.refreshTag,saveTag:e.saveTag,resetTag:e.resetTag},on:{childRefresh:function(t){return e.childRefresh(t)},rowClick:function(t){return e.rowClick(t)}}}):t("g-empty")]},proxy:!0}])})},n=[],o=a(995),i=a(99319),r=a(36026),l={name:"UnitFoMeasure",mixins:[r.He],components:{CreateOrEditUnitFoMeasure:o["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:i.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:e=>{console.log(e),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(e.value,e.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该计量单位吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(e){this.loading=!0,setTimeout((()=>{e.finishedCallback();let t=[];const a=["长度单位","重量单位","体积单位","面积单位","温度单位","时间单位","电力单位","其他单位"],s=["启用","禁用"];for(let e=0;e<25;e++){const n=e%8;let o,i,r,l;switch(n){case 0:const t=[{symbol:"m",name:"米",base:!0,rate:1},{symbol:"cm",name:"厘米",base:!1,rate:100},{symbol:"mm",name:"毫米",base:!1,rate:1e3},{symbol:"km",name:"千米",base:!1,rate:.001},{symbol:"in",name:"英寸",base:!1,rate:39.37}],a=e%5;o=t[a].symbol,i=t[a].name,r=t[a].base,l=t[a].rate;break;case 1:const s=[{symbol:"kg",name:"千克",base:!0,rate:1},{symbol:"g",name:"克",base:!1,rate:1e3},{symbol:"mg",name:"毫克",base:!1,rate:1e6},{symbol:"t",name:"吨",base:!1,rate:.001},{symbol:"lb",name:"磅",base:!1,rate:2.20462}],n=e%5;o=s[n].symbol,i=s[n].name,r=s[n].base,l=s[n].rate;break;case 2:const m=[{symbol:"m³",name:"立方米",base:!0,rate:1},{symbol:"L",name:"升",base:!1,rate:1e3},{symbol:"mL",name:"毫升",base:!1,rate:1e6},{symbol:"cm³",name:"立方厘米",base:!1,rate:1e6},{symbol:"gal",name:"加仑",base:!1,rate:264.172}],c=e%5;o=m[c].symbol,i=m[c].name,r=m[c].base,l=m[c].rate;break;case 3:const d=[{symbol:"m²",name:"平方米",base:!0,rate:1},{symbol:"cm²",name:"平方厘米",base:!1,rate:1e4},{symbol:"km²",name:"平方千米",base:!1,rate:1e-6},{symbol:"ha",name:"公顷",base:!1,rate:1e-4},{symbol:"mu",name:"亩",base:!1,rate:.0015}],u=e%5;o=d[u].symbol,i=d[u].name,r=d[u].base,l=d[u].rate;break;case 4:const p=[{symbol:"℃",name:"摄氏度",base:!0,rate:1},{symbol:"℉",name:"华氏度",base:!1,rate:1.8},{symbol:"K",name:"开尔文",base:!1,rate:1}],y=e%3;o=p[y].symbol,i=p[y].name,r=p[y].base,l=p[y].rate;break;case 5:const b=[{symbol:"s",name:"秒",base:!0,rate:1},{symbol:"min",name:"分钟",base:!1,rate:1/60},{symbol:"h",name:"小时",base:!1,rate:1/3600},{symbol:"d",name:"天",base:!1,rate:1/86400}],h=e%4;o=b[h].symbol,i=b[h].name,r=b[h].base,l=b[h].rate;break;case 6:const f=[{symbol:"W",name:"瓦特",base:!0,rate:1},{symbol:"kW",name:"千瓦",base:!1,rate:.001},{symbol:"MW",name:"兆瓦",base:!1,rate:1e-6},{symbol:"HP",name:"马力",base:!1,rate:.00134}],g=e%4;o=f[g].symbol,i=f[g].name,r=f[g].base,l=f[g].rate;break;case 7:const v=[{symbol:"pcs",name:"件",base:!0,rate:1},{symbol:"doz",name:"打",base:!1,rate:1/12},{symbol:"box",name:"箱",base:!1,rate:1/24}],x=e%3;o=v[x].symbol,i=v[x].name,r=v[x].base,l=v[x].rate;break}t[e]={id:e+1,unitCode:`UM${String(e+1).padStart(4,"0")}`,name:i,symbol:o,unitType:a[n],baseUnit:r,conversionRate:l,standardInfo:r?"国际标准单位(SI)":"非SI单位",description:`${i}(${o})是${a[n]}，${r?"是基本单位":"换算率为"+l}`,status:s[e%2],createdBy:"admin",createdTime:"2024-03-19 "+(10+e%10)+":"+e%60}}this.filterText&&(console.log(this.filterText),t=t.filter((e=>e.unitCode.indexOf(this.filterText)>-1||e.name.indexOf(this.filterText)>-1||e.symbol.indexOf(this.filterText)>-1||e.unitType.indexOf(this.filterText)>-1||e.standardInfo.indexOf(this.filterText)>-1||e.description.indexOf(this.filterText)>-1))),e.successCallback({items:t,totalCount:2*t.length})}),1e3)}}},m=l,c=a(1001),d=(0,c.Z)(m,s,n,!1,null,"70e233e9",null),u=d.exports}}]);
//# sourceMappingURL=3431.dc3a80e8.js.map