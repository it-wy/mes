{"version":3,"file":"js/998.351cb025.js","mappings":"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","sources":["webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?0ab2","webpack://data-v2/src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?4880","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/views/scrap-module/scrap-defective/scrap-defective.vue?42c2","webpack://data-v2/src/views/scrap-module/scrap-defective/scrap-defective.vue","webpack://data-v2/./src/views/scrap-module/scrap-defective/scrap-defective.vue?e35d","webpack://data-v2/./src/views/scrap-module/scrap-defective/scrap-defective.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"sign-container\"},[_c('h3',{staticClass:\"sign-title\"},[_vm._v(_vm._s(_vm.title || '请在下方区域签名'))]),_c('g-sign',{ref:\"signBoard\",attrs:{\"line-width\":_vm.lineWidth,\"line-color\":_vm.lineColor,\"background-color\":_vm.backgroundColor,\"save-format\":_vm.saveFormat},on:{\"save\":_vm.handleSave,\"clear\":_vm.handleClear,\"save-error\":_vm.handleError}})],1)]),_c('div',{staticClass:\"modal-footer\"},[_c('g-btn',{attrs:{\"text\":\"确认\",\"type\":\"primary\"},on:{\"callback\":_vm.save}}),_c('g-btn',{attrs:{\"text\":\"取消\"},on:{\"callback\":function($event){return _vm.$emit('closeModal')}}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"sign-container\">\r\n        <h3 class=\"sign-title\">{{ title || '请在下方区域签名' }}</h3>\r\n        <g-sign\r\n          ref=\"signBoard\"\r\n          :line-width=\"lineWidth\"\r\n          :line-color=\"lineColor\"\r\n          :background-color=\"backgroundColor\"\r\n          :save-format=\"saveFormat\"\r\n          @save=\"handleSave\"\r\n          @clear=\"handleClear\"\r\n          @save-error=\"handleError\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <g-btn text=\"确认\" @callback=\"save\" type=\"primary\"></g-btn>\r\n      <g-btn text=\"取消\" @callback=\"$emit('closeModal')\"></g-btn>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GSign from '@/components/g-sign/g-sign.vue';\r\n\r\nexport default {\r\n  name: \"GSignModal\",\r\n  components: {\r\n    GSign\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    saveFormat: {\r\n      type: String,\r\n      default: 'png',\r\n      validator: (value) => ['png', 'jpeg', 'webp'].includes(value)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      signatureData: null,\r\n      hasSignature: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleSave(imageData) {\r\n      this.signatureData = imageData;\r\n      this.hasSignature = true;\r\n    },\r\n    \r\n    handleClear() {\r\n      this.signatureData = null;\r\n      this.hasSignature = false;\r\n    },\r\n    \r\n    handleError(message) {\r\n      this.$message.error(message);\r\n    },\r\n    \r\n    save() {\r\n      if (!this.hasSignature) {\r\n        this.$message.error('请先进行签名');\r\n        return;\r\n      }\r\n      \r\n      this.$emit('success', this.signatureData);\r\n      this.$emit('closeModal');\r\n    },\r\n    \r\n    clearSignature() {\r\n      if (this.$refs.signBoard) {\r\n        this.$refs.signBoard.clearCanvas();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.modal {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.modal-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow: auto;\r\n}\r\n\r\n.sign-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.sign-title {\r\n  margin-top: 0;\r\n  margin-bottom: 16px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 12px 20px;\r\n  border-top: 1px solid #e8e8e8;\r\n  \r\n  :deep(.g-btn) {\r\n    margin-left: 8px;\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./g-sign-modal.vue?vue&type=template&id=e39a081c&scoped=true\"\nimport script from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nexport * from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./g-sign-modal.vue?vue&type=style&index=0&id=e39a081c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e39a081c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\",\"rules\":_vm.rules}},[_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('g-container-list',{attrs:{\"value\":_vm.entity.containerName},on:{\"update:value\":function($event){return _vm.$set(_vm.entity, \"containerName\", $event)}}})],1)]},proxy:true},{key:\"expand-card\",fn:function(){return [_c('div',{staticClass:\"expand-card\"},[_c('g-collapse',{attrs:{\"headerName\":\"展开面板\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":4}},[_c('a-form-model-item',{attrs:{\"label\":\"产品\"}},[_c('g-select',{attrs:{\"showSearch\":true,\"loadType\":\"scroll\",\"pagination\":{ pageSize: 10 }},model:{value:(_vm.entity.product),callback:function ($$v) {_vm.$set(_vm.entity, \"product\", $$v)},expression:\"entity.product\"}})],1)],1),_c('a-col',{attrs:{\"span\":4}},[_c('a-form-model-item',{attrs:{\"label\":\"工单\"}},[_c('g-select',{attrs:{\"showSearch\":true,\"loadType\":\"scroll\",\"pagination\":{ pageSize: 10 }},model:{value:(_vm.entity.workOrder),callback:function ($$v) {_vm.$set(_vm.entity, \"workOrder\", $$v)},expression:\"entity.workOrder\"}})],1)],1)],1)]},proxy:true}])})],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('g-collapse',{attrs:{\"headerName\":\"不良品信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"不良品数量\",\"prop\":\"scrapQuantity\"}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"请输入不良品数量\",\"min\":0},model:{value:(_vm.entity.scrapQuantity),callback:function ($$v) {_vm.$set(_vm.entity, \"scrapQuantity\", $$v)},expression:\"entity.scrapQuantity\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"不良原因\",\"prop\":\"reasonCode\"}},[_c('g-select',{attrs:{\"placeholder\":\"请选择不良原因\",\"showSearch\":true,\"options\":_vm.reasonCodeOptions},model:{value:(_vm.entity.reasonCode),callback:function ($$v) {_vm.$set(_vm.entity, \"reasonCode\", $$v)},expression:\"entity.reasonCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"不良原因描述\",\"prop\":\"reasonDescription\"}},[_c('a-textarea',{attrs:{\"placeholder\":\"请输入不良原因描述（可选）\",\"rows\":1},model:{value:(_vm.entity.reasonDescription),callback:function ($$v) {_vm.$set(_vm.entity, \"reasonDescription\", $$v)},expression:\"entity.reasonDescription\"}})],1)],1)],1),_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":24}},[_c('a-form-model-item',{attrs:{\"label\":\"备注\",\"prop\":\"comments\"}},[_c('a-textarea',{attrs:{\"placeholder\":\"请输入备注（可选）\",\"rows\":2},model:{value:(_vm.entity.comments),callback:function ($$v) {_vm.$set(_vm.entity, \"comments\", $$v)},expression:\"entity.comments\"}})],1)],1)],1)]},proxy:true}])})]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":function($event){return _vm.refresh()}}}),_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"报废\",\"type\":\"primary\"},on:{\"callback\":function($event){return _vm.scrap()}}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <a-form-model\r\n      ref=\"form\"\r\n      :model=\"entity\"\r\n      layout=\"vertical\"\r\n      autocomplete=\"off\"\r\n      :rules=\"rules\"\r\n      class=\"h-father\"\r\n    >\r\n      <g-body-form-layout>\r\n        <!-- 搜索插槽 -->\r\n        <template #search-card>\r\n          <div class=\"search-card\">\r\n            <g-container-list :value.sync=\"entity.containerName\">\r\n            </g-container-list>\r\n          </div>\r\n        </template>\r\n        <!-- 展开插槽 -->\r\n        <template #expand-card>\r\n          <div class=\"expand-card\">\r\n            <g-collapse headerName=\"展开面板\">\r\n              <template #content>\r\n                <a-row :gutter=\"24\">\r\n                  <a-col :span=\"4\">\r\n                    <!-- 可以添加其他搜索条件，例如：产品 -->\r\n                    <a-form-model-item label=\"产品\">\r\n                      <g-select\r\n                        v-model=\"entity.product\"\r\n                        :showSearch=\"true\"\r\n                        loadType=\"scroll\"\r\n                        :pagination=\"{ pageSize: 10 }\"\r\n                      />\r\n                    </a-form-model-item>\r\n                  </a-col>\r\n                   <a-col :span=\"4\">\r\n                    <!-- 可以添加其他搜索条件，例如：工单 -->\r\n                    <a-form-model-item label=\"工单\">\r\n                      <g-select\r\n                        v-model=\"entity.workOrder\"\r\n                        :showSearch=\"true\"\r\n                        loadType=\"scroll\"\r\n                        :pagination=\"{ pageSize: 10 }\"\r\n                      />\r\n                    </a-form-model-item>\r\n                  </a-col>\r\n                </a-row>\r\n              </template>\r\n            </g-collapse>\r\n          </div>\r\n        </template>\r\n        <template #card-body>\r\n          <g-collapse headerName=\"不良品信息\">\r\n            <template #content>\r\n              <a-row :gutter=\"24\">\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"不良品数量\" prop=\"scrapQuantity\">\r\n                    <a-input-number\r\n                      v-model=\"entity.scrapQuantity\"\r\n                      placeholder=\"请输入不良品数量\"\r\n                      :min=\"0\"\r\n                      style=\"width: 100%\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"不良原因\" prop=\"reasonCode\">\r\n                    <g-select\r\n                      v-model=\"entity.reasonCode\"\r\n                      placeholder=\"请选择不良原因\"\r\n                      :showSearch=\"true\"\r\n                      :options=\"reasonCodeOptions\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                 <a-col :span=\"12\">\r\n                  <a-form-model-item label=\"不良原因描述\" prop=\"reasonDescription\">\r\n                    <a-textarea\r\n                      v-model=\"entity.reasonDescription\"\r\n                      placeholder=\"请输入不良原因描述（可选）\"\r\n                      :rows=\"1\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n              <a-row :gutter=\"24\">\r\n                 <a-col :span=\"24\">\r\n                  <a-form-model-item label=\"备注\" prop=\"comments\">\r\n                   <a-textarea\r\n                      v-model=\"entity.comments\"\r\n                      placeholder=\"请输入备注（可选）\"\r\n                      :rows=\"2\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </template>\r\n          </g-collapse>\r\n  \r\n          <!--  可以根据需要添加更多的 collapse 面板  -->\r\n  \r\n        </template>\r\n        <template #g-fixed-row>\r\n          <div class=\"g-fixed-row\">\r\n            <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh()\"></g-btn>\r\n            <g-btn size=\"large\" text=\"报废\" type=\"primary\" @callback=\"scrap()\">\r\n            </g-btn>\r\n          </div>\r\n        </template>\r\n      </g-body-form-layout>\r\n    </a-form-model>\r\n  </template>\r\n  \r\n  <script>\r\n  import GSignModal from '@/components/g-sign-modal/g-sign-modal.vue';\r\n  import { createModal } from '@/utils';\r\n  \r\n  export default {\r\n    name: \"Scrap\",  // 组件名称改为 Scrap\r\n  \r\n    data() {\r\n      return {\r\n        entity: {\r\n          containerName: \"\",  // 容器名称\r\n          product: undefined,       // 产品\r\n          workOrder: undefined,     // 工单\r\n          scrapQuantity: undefined, // 不良品数量\r\n          reasonCode: undefined,    // 不良原因代码\r\n          reasonDescription: \"\",   //不良原因描述\r\n          comments: \"\",          // 备注\r\n          dataPoints: [],        //  如果需要，可以保留数据点\r\n        },\r\n        rules: {\r\n          containerName: [{ required: true, message: '请选择容器', trigger: 'blur' }],\r\n          scrapQuantity: [{ required: true, message: '请输入不良品数量', trigger: 'blur' }],\r\n          reasonCode: [{ required: true, message: '请选择不良原因', trigger: 'change' }],\r\n        },\r\n        reasonCodeOptions: [  //  不良原因代码选项，从后端接口获取\r\n          { label: '材料不良', value: 'MATERIAL_DEFECT' },\r\n          { label: '设备故障', value: 'EQUIPMENT_FAILURE' },\r\n          { label: '操作失误', value: 'OPERATOR_ERROR' },\r\n          { label: '工艺问题', value: 'PROCESS_ISSUE' },\r\n          // ... 更多不良原因\r\n        ],\r\n      };\r\n    },\r\n    watch: {\r\n      \"entity.containerName\": {\r\n        handler() {\r\n          this.$refs.form.validateField(\"containerName\");\r\n        },\r\n      },\r\n    },\r\n  \r\n    mounted() {},\r\n  \r\n    methods: {\r\n      scrap() {\r\n        this.$refs.form.validate().then((valid) => {\r\n          if (!valid) {\r\n            return;\r\n          }\r\n          this.createSignModal(); // 报废前进行签名确认\r\n        });\r\n      },\r\n      // 创建签名弹窗\r\n      createSignModal() {\r\n        createModal({\r\n          title: '签名',\r\n          width: '600px',\r\n        },{\r\n          component: GSignModal,\r\n          success: (v) => {\r\n            console.log(v);\r\n            //  签名成功后，调用报废接口\r\n            this.submitScrap();\r\n          },\r\n        },);\r\n      },\r\n       //  提交报废数据到后端\r\n      submitScrap() {\r\n        //  这里使用 this.entity 收集到的数据\r\n        //  调用后端 API 进行报废操作，例如：\r\n        // this.$api.scrapContainer(this.entity)\r\n        //   .then(response => {\r\n        //     this.$message.success('报废成功');\r\n        //     //  刷新页面或执行其他操作\r\n        //   })\r\n        //   .catch(error => {\r\n        //     this.$message.error('报废失败: ' + error.message);\r\n        //   });\r\n  \r\n        //  示例（模拟成功）\r\n          this.$message.success('报废成功（模拟）');\r\n          this.refresh(); // 刷新\r\n      },\r\n  \r\n      // 刷新\r\n      refresh() {\r\n        // 清空表单数据\r\n        this.entity = {\r\n          containerName: \"\",\r\n          product: undefined,\r\n          workOrder: undefined,\r\n          scrapQuantity: undefined,\r\n          reasonCode: undefined,\r\n          reasonDescription:\"\",\r\n          comments: \"\",\r\n          dataPoints: [],\r\n        };\r\n         //  重新加载数据 (如果有需要)\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped></style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scrap-defective.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./scrap-defective.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./scrap-defective.vue?vue&type=template&id=38c3a3c2&scoped=true\"\nimport script from \"./scrap-defective.vue?vue&type=script&lang=js\"\nexport * from \"./scrap-defective.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38c3a3c2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","title","ref","attrs","lineWidth","lineColor","backgroundColor","saveFormat","on","handleSave","handleClear","handleError","save","$event","$emit","staticRenderFns","name","components","GSign","props","type","String","default","Number","validator","value","includes","data","signatureData","hasSignature","methods","imageData","message","$message","error","clearSignature","$refs","signBoard","clearCanvas","component","entity","rules","scopedSlots","_u","key","fn","containerName","$set","proxy","pageSize","model","callback","$$v","expression","staticStyle","reasonCodeOptions","refresh","scrap","product","undefined","workOrder","scrapQuantity","reasonCode","reasonDescription","comments","dataPoints","required","trigger","label","watch","handler","form","validateField","mounted","validate","then","valid","createSignModal","width","success","v","console","log","submitScrap"],"sourceRoot":""}