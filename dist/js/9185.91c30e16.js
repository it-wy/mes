"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[9185,7890],{99319:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:t.rules,model:t.copyForm}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:t.copyForm.value,callback:function(e){t.$set(t.copyForm,"value",e)},expression:"copyForm.value"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:t.copyForm.copyValue,callback:function(e){t.$set(t.copyForm,"copyValue",e)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),e("div",{staticClass:"modal-footer"},[e("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.save}}),e("g-btn",{attrs:{text:"取消"},on:{callback:function(e){return t.$emit("closeModal")}}})],1)])},n=[],s=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((t=>{t&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),o=s,r=a(1001),l=(0,r.Z)(o,i,n,!1,null,"04e98444",null),c=l.exports},57890:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.loading}},[e("a-form-model",{ref:"form",attrs:{model:t.entity,rules:t.rules,autocomplete:"off",layout:"vertical"}},[e("div",{staticClass:"card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"lineCode",attrs:{label:"生产线编码",prop:"lineCode"}},[e("a-input",{attrs:{placeholder:"请输入生产线编码",name:"lineCode",disabled:!!t.ndoEditParams.row},on:{change:t.inChange},model:{value:t.entity.lineCode,callback:function(e){t.$set(t.entity,"lineCode",e)},expression:"entity.lineCode"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"name",attrs:{label:"生产线名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入生产线名称",name:"name"},on:{change:t.inChange},model:{value:t.entity.name,callback:function(e){t.$set(t.entity,"name",e)},expression:"entity.name"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"lineType",attrs:{label:"生产线类型",prop:"lineType"}},[e("a-select",{attrs:{placeholder:"请选择生产线类型",name:"lineType"},model:{value:t.entity.lineType,callback:function(e){t.$set(t.entity,"lineType",e)},expression:"entity.lineType"}},[e("a-select-option",{attrs:{value:"装配线"}},[t._v("装配线")]),e("a-select-option",{attrs:{value:"加工线"}},[t._v("加工线")]),e("a-select-option",{attrs:{value:"包装线"}},[t._v("包装线")]),e("a-select-option",{attrs:{value:"检测线"}},[t._v("检测线")]),e("a-select-option",{attrs:{value:"喷涂线"}},[t._v("喷涂线")])],1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"factoryId",attrs:{label:"所属工厂",prop:"factoryId"}},[e("a-select",{attrs:{placeholder:"请选择所属工厂",name:"factoryId"},on:{change:t.handleFactoryChange},model:{value:t.entity.factoryId,callback:function(e){t.$set(t.entity,"factoryId",e)},expression:"entity.factoryId"}},[e("a-select-option",{attrs:{value:"1"}},[t._v("生产工厂1")]),e("a-select-option",{attrs:{value:"2"}},[t._v("组装工厂2")]),e("a-select-option",{attrs:{value:"3"}},[t._v("加工工厂3")]),e("a-select-option",{attrs:{value:"4"}},[t._v("储存中心4")]),e("a-select-option",{attrs:{value:"5"}},[t._v("物流中心5")])],1)],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"capacity",attrs:{label:"日产能",prop:"capacity"}},[e("a-input",{attrs:{placeholder:"请输入日产能",name:"capacity"},on:{change:t.inChange},model:{value:t.entity.capacity,callback:function(e){t.$set(t.entity,"capacity",e)},expression:"entity.capacity"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"foundDate",attrs:{label:"建立时间",prop:"foundDate"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{name:"foundDate"},on:{change:t.inChange},model:{value:t.entity.foundDate,callback:function(e){t.$set(t.entity,"foundDate",e)},expression:"entity.foundDate"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"length",attrs:{label:"生产线长度",prop:"length"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,name:"length"},on:{change:t.inChange},model:{value:t.entity.length,callback:function(e){t.$set(t.entity,"length",e)},expression:"entity.length"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"width",attrs:{label:"生产线宽度",prop:"width"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,name:"width"},on:{change:t.inChange},model:{value:t.entity.width,callback:function(e){t.$set(t.entity,"width",e)},expression:"entity.width"}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"staffCount",attrs:{label:"人员数量",prop:"staffCount"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,name:"staffCount"},on:{change:t.inChange},model:{value:t.entity.staffCount,callback:function(e){t.$set(t.entity,"staffCount",e)},expression:"entity.staffCount"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"status",attrs:{label:"运行状态",prop:"status"}},[e("a-select",{attrs:{placeholder:"请选择运行状态",name:"status"},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-select-option",{attrs:{value:"运行中"}},[t._v("运行中")]),e("a-select-option",{attrs:{value:"维护中"}},[t._v("维护中")]),e("a-select-option",{attrs:{value:"停产"}},[t._v("停产")]),e("a-select-option",{attrs:{value:"调试中"}},[t._v("调试中")])],1)],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{ref:"description",attrs:{label:"描述",prop:"description"}},[e("a-textarea",{attrs:{placeholder:"请输入描述信息",rows:4,"max-length":1e3,name:"description"},on:{change:t.inChange},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1)],1)],1)],1),e("g-collapse",{attrs:{headerName:"设备信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:24}},[e("div",{staticClass:"table-operations"},[e("a-button",{attrs:{type:"primary"},on:{click:t.addEquipment}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加设备 ")],1)],1),e("a-table",{attrs:{columns:t.equipmentColumns,"data-source":t.entity.equipmentList,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function({record:a}){return[e("a-space",[e("a",{on:{click:function(e){return t.editEquipment(a)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"确定要删除该设备吗？"},on:{confirm:function(e){return t.deleteEquipment(a)}}},[e("a",[t._v("删除")])])],1)]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"人员信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:24}},[e("div",{staticClass:"table-operations"},[e("a-button",{attrs:{type:"primary"},on:{click:t.addStaff}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加人员 ")],1)],1),e("a-table",{attrs:{columns:t.staffColumns,"data-source":t.entity.staffList,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function({record:a}){return[e("a-space",[e("a",{on:{click:function(e){return t.editStaff(a)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"确定要删除该人员吗？"},on:{confirm:function(e){return t.deleteStaff(a)}}},[e("a",[t._v("删除")])])],1)]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"元数据信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"创建人"}},[e("a-input",{attrs:{disabled:""},model:{value:t.entity.createdBy,callback:function(e){t.$set(t.entity,"createdBy",e)},expression:"entity.createdBy"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"创建时间"}},[e("a-input",{attrs:{disabled:""},model:{value:t.entity.createdTime,callback:function(e){t.$set(t.entity,"createdTime",e)},expression:"entity.createdTime"}})],1)],1)],1),e("a-row",{attrs:{gutter:16}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"修改人"}},[e("a-input",{attrs:{disabled:""},model:{value:t.entity.modifiedBy,callback:function(e){t.$set(t.entity,"modifiedBy",e)},expression:"entity.modifiedBy"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"修改时间"}},[e("a-input",{attrs:{disabled:""},model:{value:t.entity.modifiedTime,callback:function(e){t.$set(t.entity,"modifiedTime",e)},expression:"entity.modifiedTime"}})],1)],1)],1)]},proxy:!0}])})],1)],1)},n=[],s=a(36026),o={name:"CreateOrEditMfgLine",mixins:[s.GE],data(){return{entity:{lineCode:"",name:"",lineType:"",factoryId:void 0,factoryName:"",capacity:"",foundDate:null,length:0,width:0,staffCount:0,description:"",status:"",equipmentList:[],staffList:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},loading:!1,rules:{lineCode:[{required:!0,message:"请输入生产线编码",trigger:"blur"},{pattern:/^ML\d{4}$/,message:"生产线编码必须为ML+4位数字",trigger:"blur"}],name:[{required:!0,message:"请输入生产线名称",trigger:"blur"}],lineType:[{required:!0,message:"请选择生产线类型",trigger:"change"}],factoryId:[{required:!0,message:"请选择所属工厂",trigger:"change"}],capacity:[{required:!0,message:"请输入日产能",trigger:"blur"}],foundDate:[{required:!0,message:"请选择建立时间",trigger:"change"}],length:[{required:!0,message:"请输入生产线长度",trigger:"blur"}],width:[{required:!0,message:"请输入生产线宽度",trigger:"blur"}],staffCount:[{required:!0,message:"请输入人员数量",trigger:"blur"}],status:[{required:!0,message:"请选择运行状态",trigger:"change"}]},equipmentColumns:[{title:"设备编码",dataIndex:"equipmentCode",key:"equipmentCode"},{title:"设备名称",dataIndex:"equipmentName",key:"equipmentName"},{title:"设备类型",dataIndex:"equipmentType",key:"equipmentType"},{title:"设备状态",dataIndex:"equipmentStatus",key:"equipmentStatus"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}],staffColumns:[{title:"工号",dataIndex:"staffCode",key:"staffCode"},{title:"姓名",dataIndex:"staffName",key:"staffName"},{title:"岗位",dataIndex:"position",key:"position"},{title:"技能等级",dataIndex:"skillLevel",key:"skillLevel"},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]}},mounted(){},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.loading=!1,this.entity={lineCode:"ML0001",name:"装配线1",lineType:"装配线",factoryId:"1",factoryName:"生产工厂1",capacity:"1000件/天",foundDate:"2024-01-01",length:100,width:5,staffCount:20,description:"用于产品装配的生产线",status:"运行中",equipmentList:[{id:1,equipmentCode:"EQ001",equipmentName:"装配机1",equipmentType:"装配设备",equipmentStatus:"运行中"}],staffList:[{id:1,staffCode:"ST001",staffName:"张三",position:"装配工",skillLevel:"高级"}],createdBy:"admin",createdTime:"2024-03-19 10:00",modifiedBy:"admin",modifiedTime:"2024-03-19 14:00"}}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={lineCode:"",name:"",lineType:"",factoryId:void 0,factoryName:"",capacity:"",foundDate:null,length:0,width:0,staffCount:0,description:"",status:"",equipmentList:[],staffList:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},async save(){let t=await this.checkError();t&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(t){console.log(t.target.value)},handleFactoryChange(t){const e={1:"生产工厂1",2:"组装工厂2",3:"加工工厂3",4:"储存中心4",5:"物流中心5"};this.entity.factoryName=e[t]},addEquipment(){this.entity.equipmentList.push({id:this.entity.equipmentList.length+1,equipmentCode:"",equipmentName:"",equipmentType:"",equipmentStatus:""})},editEquipment(t){console.log("编辑设备",t)},deleteEquipment(t){const e=this.entity.equipmentList.findIndex((e=>e.id===t.id));e>-1&&this.entity.equipmentList.splice(e,1)},addStaff(){this.entity.staffList.push({id:this.entity.staffList.length+1,staffCode:"",staffName:"",position:"",skillLevel:""})},editStaff(t){console.log("编辑人员",t)},deleteStaff(t){const e=this.entity.staffList.findIndex((e=>e.id===t.id));e>-1&&this.entity.staffList.splice(e,1)}}},r=o,l=a(1001),c=(0,l.Z)(r,i,n,!1,null,"3b9b273d",null),d=c.exports},39185:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("g-body-layout",{attrs:{pageIndex:t.pageNumber,pageSize:t.pageSize,total:t.total,filterText:t.filterText},on:{"update:filterText":function(e){t.filterText=e},"update:filter-text":function(e){t.filterText=e},pageIndexChange:t.pageIndexChange,pageSizeChange:t.pageSizeChange,suffixSearchCallback:t.onFilterReady},scopedSlots:t._u([{key:"btnGroup",fn:function(){return[e("g-btn-group",{attrs:{buttonLists:t.btnList},on:{btnCallBack:t.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[e("g-ndo-table",{attrs:{id:t.id,handName:"生产线建模",dataList:t.dataList,isTableLoading:t.loading,total:t.total},on:{rowClick:t.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[t.isShowEdit?e("create-or-edit-mfg-line",{attrs:{ndoEditParams:t.ndoEditParams,refreshTag:t.refreshTag,saveTag:t.saveTag,resetTag:t.resetTag},on:{childRefresh:function(e){return t.childRefresh(e)},rowClick:function(e){return t.rowClick(e)}}}):e("g-empty")]},proxy:!0}])})},n=[],s=a(57890),o=a(99319),r=a(36026),l={name:"MfgLine",mixins:[r.He],components:{CreateOrEditMfgLine:s["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:o.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:t=>{console.log(t),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(t.value,t.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该生产线吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(t){this.loading=!0,setTimeout((()=>{t.finishedCallback();let e=[];const a=["装配线","加工线","包装线","检测线","喷涂线"],i=["生产工厂1","组装工厂2","加工工厂3","储存中心4","物流中心5"],n=["运行中","维护中","停产","调试中"],s=["1000件/天","2000件/天","3000件/天","4000件/天","5000件/天"];for(let t=0;t<25;t++){const o=t%5,r=t%5,l=t%4,c=t%5,d=`ML${String(t+1).padStart(4,"0")}`,u=new Date(2e3+t%20,t%12,1+t%27),p=`${u.getFullYear()}-${(u.getMonth()+1).toString().padStart(2,"0")}-${u.getDate().toString().padStart(2,"0")}`;e[t]={id:t+1,lineCode:d,name:`${a[o]}${t+1}`,lineType:a[o],factoryName:i[r],factoryId:r+1,capacity:s[c],foundDate:p,length:50+10*t+"米",width:5+t%3+"米",staffCount:20+5*t,description:`${i[r]}的${a[o]}，日产能${s[c]}，配备${20+5*t}名工作人员。`,status:n[l],createdBy:"admin",createdTime:"2024-03-19 "+(10+t%10)+":"+t%60,modifiedBy:"admin",modifiedTime:"2024-03-"+(20+t%8)+" "+(13+t%10)+":"+t%60}}this.filterText&&(e=e.filter((t=>t.lineCode.indexOf(this.filterText)>-1||t.name.indexOf(this.filterText)>-1||t.lineType.indexOf(this.filterText)>-1||t.factoryName.indexOf(this.filterText)>-1||t.capacity.indexOf(this.filterText)>-1||t.description.indexOf(this.filterText)>-1))),t.successCallback({items:e,totalCount:2*e.length})}),1e3)}}},c=l,d=a(1001),u=(0,d.Z)(c,i,n,!1,null,"5be102af",null),p=u.exports}}]);
//# sourceMappingURL=9185.91c30e16.js.map