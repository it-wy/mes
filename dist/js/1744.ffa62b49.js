"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1744],{31744:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"reasonCode",attrs:{label:"原因代码",prop:"reasonCode"}},[t("a-input",{attrs:{placeholder:"请输入原因代码",name:"reasonCode",disabled:!!e.id},model:{value:e.entity.reasonCode,callback:function(t){e.$set(e.entity,"reasonCode",t)},expression:"entity.reasonCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"reasonName",attrs:{label:"原因名称",prop:"reasonName"}},[t("a-input",{attrs:{placeholder:"请输入原因名称",name:"reasonName"},model:{value:e.entity.reasonName,callback:function(t){e.$set(e.entity,"reasonName",t)},expression:"entity.reasonName"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"category",attrs:{label:"保养分类",prop:"category"}},[t("a-select",{attrs:{placeholder:"请选择保养分类",name:"category"},model:{value:e.entity.category,callback:function(t){e.$set(e.entity,"category",t)},expression:"entity.category"}},e._l(e.categoryOptions,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"priority",attrs:{label:"优先级",prop:"priority"}},[t("a-select",{attrs:{placeholder:"请选择优先级",name:"priority"},model:{value:e.entity.priority,callback:function(t){e.$set(e.entity,"priority",t)},expression:"entity.priority"}},e._l(e.priorityOptions,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:18}},[t("a-form-model-item",{ref:"description",attrs:{label:"描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述信息",rows:4,maxLength:1e3,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"maintenanceMethod",attrs:{label:"保养方法",prop:"maintenanceMethod"}},[t("a-textarea",{attrs:{placeholder:"请输入保养方法",rows:6,maxLength:2e3,name:"maintenanceMethod"},model:{value:e.entity.maintenanceMethod,callback:function(t){e.$set(e.entity,"maintenanceMethod",t)},expression:"entity.maintenanceMethod"}})],1)],1)],1)],1),e._e(),e.id?t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}],null,!1,338966643)}):e._e()],1)],1)},r=[],s=a(36026),n={name:"CreateOrEditMaintenanceReason",mixins:[s.GE],data(){return{entity:{reasonCode:"",reasonName:"",category:void 0,priority:void 0,status:"启用",description:"",maintenanceMethod:"",deviceTypes:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},categoryOptions:[{value:"定期保养",label:"定期保养"},{value:"预防性保养",label:"预防性保养"},{value:"故障预警保养",label:"故障预警保养"},{value:"使用寿命保养",label:"使用寿命保养"},{value:"环境影响保养",label:"环境影响保养"}],priorityOptions:[{value:"高",label:"高"},{value:"中",label:"中"},{value:"低",label:"低"}],deviceTypeColumns:[{title:"设备类型名称",dataIndex:"name",key:"name",width:"40%"},{title:"设备家族",dataIndex:"familyName",key:"familyName",width:"20%"},{title:"制造商",dataIndex:"manufacturer",key:"manufacturer",width:"20%"},{title:"操作",dataIndex:"action",key:"action",width:"20%",scopedSlots:{customRender:"action"}}],rules:{reasonCode:[{required:!0,message:"原因代码不能为空",trigger:"change"},{pattern:/^M[0-9]{3}$/,message:"原因代码格式不正确，应为M开头加3位数字",trigger:"change"}],reasonName:[{required:!0,message:"原因名称不能为空",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"原因名称不能包含前后空格",trigger:"change"}],category:[{required:!0,message:"保养分类不能为空",trigger:"change"}],priority:[{required:!0,message:"优先级不能为空",trigger:"change"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}],maintenanceMethod:[{required:!0,message:"保养方法不能为空",trigger:"change"}]}}},methods:{showAddDeviceType(){console.log("添加适用设备类型")},removeDeviceType(e){this.entity.deviceTypes.splice(e,1)},init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.loading=!1,this.entity={reasonCode:"M001",reasonName:"定期保养1",category:"定期保养",priority:"高",status:"启用",description:"部件磨损导致的定期保养需求，需及时处理",maintenanceMethod:"建议进行彻底保养，包含硬件检查和软件升级。\n\n1. 检查所有硬件接口\n2. 清理内部灰尘\n3. 更新固件\n4. 校准传感器\n5. 测试运行状态",deviceTypes:[{id:1,name:"华为 S5820-32C-EI 交换机",familyName:"交换机",manufacturer:"华为"},{id:4,name:"思科 ASR 9000 路由器",familyName:"路由器",manufacturer:"思科"}],createdBy:"admin",createdTime:"2024-03-18 10:00:00",modifiedBy:"admin",modifiedTime:"2024-03-18 11:55"}}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={reasonCode:"",reasonName:"",category:void 0,priority:void 0,status:"启用",description:"",maintenanceMethod:"",deviceTypes:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.reasonName),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))}}},o=n,l=a(1001),d=(0,l.Z)(o,i,r,!1,null,"cfe60d84",null),m=d.exports}}]);
//# sourceMappingURL=1744.ffa62b49.js.map