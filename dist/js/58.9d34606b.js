"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[58],{30058:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"productCode",attrs:{label:"产品编码",prop:"productCode"}},[t("a-input",{attrs:{placeholder:"请输入产品编码，格式为P开头加4位数字",name:"productCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.productCode,callback:function(t){e.$set(e.entity,"productCode",t)},expression:"entity.productCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"产品名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入产品名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"category",attrs:{label:"产品分类",prop:"category"}},[t("a-select",{attrs:{placeholder:"请选择产品分类",name:"category"},model:{value:e.entity.category,callback:function(t){e.$set(e.entity,"category",t)},expression:"entity.category"}},[t("a-select-option",{attrs:{value:"电子设备"}},[e._v("电子设备")]),t("a-select-option",{attrs:{value:"智能家居"}},[e._v("智能家居")]),t("a-select-option",{attrs:{value:"网络设备"}},[e._v("网络设备")]),t("a-select-option",{attrs:{value:"办公设备"}},[e._v("办公设备")]),t("a-select-option",{attrs:{value:"安防设备"}},[e._v("安防设备")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"manufacturer",attrs:{label:"制造商",prop:"manufacturer"}},[t("a-select",{attrs:{placeholder:"请选择制造商",name:"manufacturer"},model:{value:e.entity.manufacturer,callback:function(t){e.$set(e.entity,"manufacturer",t)},expression:"entity.manufacturer"}},[t("a-select-option",{attrs:{value:"华为"}},[e._v("华为")]),t("a-select-option",{attrs:{value:"小米"}},[e._v("小米")]),t("a-select-option",{attrs:{value:"联想"}},[e._v("联想")]),t("a-select-option",{attrs:{value:"戴尔"}},[e._v("戴尔")]),t("a-select-option",{attrs:{value:"惠普"}},[e._v("惠普")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"model",attrs:{label:"产品型号",prop:"model"}},[t("a-input",{attrs:{placeholder:"请输入产品型号",name:"model"},model:{value:e.entity.model,callback:function(t){e.$set(e.entity,"model",t)},expression:"entity.model"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"price",attrs:{label:"价格(元)",prop:"price"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,step:100,placeholder:"请输入产品价格",name:"price"},model:{value:e.entity.price,callback:function(t){e.$set(e.entity,"price",t)},expression:"entity.price"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"stockQuantity",attrs:{label:"库存数量",prop:"stockQuantity"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:0,placeholder:"请输入库存数量",name:"stockQuantity"},model:{value:e.entity.stockQuantity,callback:function(t){e.$set(e.entity,"stockQuantity",t)},expression:"entity.stockQuantity"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"在售"}},[e._v("在售")]),t("a-radio",{attrs:{value:"预售"}},[e._v("预售")]),t("a-radio",{attrs:{value:"停售"}},[e._v("停售")])],1)],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{ref:"description",attrs:{label:"产品描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入产品描述",rows:4,"max-length":1e3,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"产品规格"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-spec-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addSpec}},[e._v("添加规格")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.specColumns,dataSource:e.entity.specifications,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"specName",fn:function(a,s,i){return[t("a-input",{attrs:{placeholder:"请输入规格名称"},model:{value:e.entity.specifications[i].specName,callback:function(t){e.$set(e.entity.specifications[i],"specName",t)},expression:"entity.specifications[index].specName"}})]}},{key:"specValue",fn:function(a,s,i){return[t("a-input",{attrs:{placeholder:"请输入规格值"},model:{value:e.entity.specifications[i].specValue,callback:function(t){e.$set(e.entity.specifications[i],"specValue",t)},expression:"entity.specifications[index].specValue"}})]}},{key:"action",fn:function(a,s,i){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeSpec(i)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],r=a(36026),o={name:"CreateOrEditProduct",mixins:[r.GE],data(){return{loading:!1,entity:{id:void 0,productCode:"",name:"",category:"",manufacturer:"",model:"",price:0,stockQuantity:0,description:"",status:"在售",specifications:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{productCode:[{required:!0,message:"请输入产品编码",trigger:"change"},{pattern:/^P\d{4}$/,message:"产品编码必须为P开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入产品名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"产品名称不能包含前后空格",trigger:"change"}],category:[{required:!0,message:"请选择产品分类",trigger:"change"}],manufacturer:[{required:!0,message:"请选择制造商",trigger:"change"}],model:[{required:!0,message:"请输入产品型号",trigger:"change"}],price:[{required:!0,message:"请输入产品价格",trigger:"change"},{type:"number",min:0,message:"价格不能小于0",trigger:"change"}],stockQuantity:[{required:!0,message:"请输入库存数量",trigger:"change"},{type:"number",min:0,message:"库存数量不能小于0",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},specColumns:[{title:"规格名称",dataIndex:"specName",key:"specName",width:"40%",scopedSlots:{customRender:"specName"}},{title:"规格值",dataIndex:"specValue",key:"specValue",width:"40%",scopedSlots:{customRender:"specValue"}},{title:"操作",key:"action",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,productCode:"",name:"",category:"",manufacturer:"",model:"",price:0,stockQuantity:0,description:"",status:"在售",specifications:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,specifications:e.specifications||[]}}},async save(){let e=await this.checkError();if(e){const e=this.entity.specifications.find((e=>!e.specName||!e.specValue));if(e)return void this.$message.error("所有规格必须有名称和值");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(e){console.log(e.target.value)},addSpec(){this.entity.specifications.push({id:Date.now(),specName:"",specValue:""})},removeSpec(e){this.entity.specifications.splice(e,1)}}},n=o,c=a(1001),l=(0,c.Z)(n,s,i,!1,null,"4ab8c646",null),m=l.exports}}]);
//# sourceMappingURL=58.9d34606b.js.map