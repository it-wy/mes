"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[5859,5549,3966],{5549:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var s=function(){var t=this,a=t._self._c;return a("a-form-model",{staticStyle:{display:"flex"},attrs:{model:t.form,layout:"vertical"}},[a("div",{staticStyle:{"margin-right":"20px",display:"flex","align-items":"center"}},[a("a-upload",{staticClass:"avatar-uploader",attrs:{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":t.beforeUpload},on:{change:t.handleChange}},[t.form.avatar?a("img",{staticClass:"avatar",attrs:{src:t.form.avatar,alt:"avatar"}}):a("div",[a("a-icon",{attrs:{type:t.loading?"loading":"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v("用户头像")])],1)])],1),a("div",[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"用户名",name:t.form.userName}},[a("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.userName,callback:function(a){t.$set(t.form,"userName",a)},expression:"form.userName"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"密码",name:"password"}},[a("a-input",{attrs:{placeholder:"请输入密码"},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"确认密码",name:"confirmPassword"}},[a("a-input",{attrs:{placeholder:"请输入确认密码"},model:{value:t.form.confirmPassword,callback:function(a){t.$set(t.form,"confirmPassword",a)},expression:"form.confirmPassword"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"角色",name:"role"}},[a("a-select",{attrs:{placeholder:"请选择角色"},model:{value:t.form.role,callback:function(a){t.$set(t.form,"role",a)},expression:"form.role"}},[a("a-select-option",{attrs:{value:"admin"}},[t._v(" 管理员 ")]),a("a-select-option",{attrs:{value:"user"}},[t._v(" 普通用户 ")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"状态",name:t.form.status}},[a("a-radio-group",{model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}},[a("a-radio",{attrs:{value:!0}},[t._v(" 启用 ")]),a("a-radio",{attrs:{value:!1}},[t._v(" 禁用 ")])],1)],1)],1)],1)],1)])},r=[];function o(t,a){const e=new FileReader;e.addEventListener("load",(()=>a(e.result))),e.readAsDataURL(t)}var l={props:{entity:{type:Object,default:()=>({})}},data(){return{loading:!1,form:this.entity}},methods:{handleChange(t){"uploading"!==t.file.status?"done"===t.file.status&&o(t.file.originFileObj,(t=>{this.imageUrl=t,this.loading=!1})):this.loading=!0},beforeUpload(t){const a="image/jpeg"===t.type||"image/png"===t.type;a||this.$message.error("You can only upload JPG file!");const e=t.size/1024/1024<2;return e||this.$message.error("Image must smaller than 2MB!"),a&&e}}},n=l,i=e(1001),c=(0,i.Z)(n,s,r,!1,null,"41fca612",null),d=c.exports},3966:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var s=function(){var t=this,a=t._self._c;t._self._setupProxy;return a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-content"},[a("a-tabs",{attrs:{"default-active-key":"1"},on:{change:t.callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[a("base-user-info",{attrs:{entity:t.entity}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"其它","force-render":""}},[t._v(" 测试 ")])],1)],1),a("div",{staticClass:"modal-footer"},[a("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.close}}),a("g-btn",{attrs:{text:"取消",type:"default"},on:{callback:t.close}})],1)])},r=[],o=e(20144),l=e(5549),n=(0,o.aZ)({props:{entity:{type:Object,default:()=>{}}},components:{BaseUserInfo:l["default"]},methods:{close(){this.$emit("closeModal")},callback(){}}}),i=n,c=e(1001),d=(0,c.Z)(i,s,r,!1,null,null,null),u=d.exports},95859:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"flex-user"},[a("div",{staticStyle:{"background-color":"#fff","margin-bottom":"10px",padding:"12px 24px","box-sizing":"border-box","border-radius":"4px"}},[a("a-form",{attrs:{form:t.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:4}},[a("a-form-item",{attrs:{label:"用户"}},[a("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.userName,callback:function(a){t.$set(t.form,"userName",a)},expression:"form.userName"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",{attrs:{label:" "}},[a("g-btn",{attrs:{text:"查询"}})],1)],1)],1)],1)],1),a("div",{staticStyle:{"background-color":"#fff",padding:"12px 24px 0","box-sizing":"border-box","overflow-y":"hidden","border-radius":"4px",flex:"1"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px"}},[a("g-btn",{staticClass:"mr-1",attrs:{text:"添加"},on:{callback:t.addOrEditUser}}),a("g-btn",{staticClass:"mr-1",attrs:{text:"批量删除",type:"danger"}}),a("g-btn",{staticClass:"mr-1",attrs:{text:"导出excel"}})],1),a("a-table",{attrs:{id:"tables",columns:t.columns,"data-source":t.dataList,scroll:{y:t.tableheight},"row-key":t=>t.id,pagination:t.pagination,rowSelection:t.rowSelection,loading:t.isTableLoading},on:{change:t.tableChange},scopedSlots:t._u([{key:"avatar",fn:function(t){return a("span",{},[a("a-avatar",{attrs:{src:t}})],1)}},{key:"status",fn:function(e){return a("span",{},[a("a-tag",{attrs:{color:e?"green":"red"}},[t._v(t._s(e?"启用":"禁用"))])],1)}},{key:"action",fn:function(e,s){return a("span",{},[a("a",{staticClass:"mr-1",attrs:{href:"javascript:;"},on:{click:function(a){return t.addOrEditUser(s)}}},[t._v("编辑")]),a("a",{staticClass:"del",attrs:{href:"javascript:;"},on:{click:function(a){return t.delUser(s)}}},[t._v("删除")])])}}])})],1)])},r=[],o=e(37491),l=e(2136),n=e(3966),i=e(36026),c={name:"user",mixins:[i.tL],data(){return{tableheight:0,form:{userName:""}}},mounted(){this.$nextTick((()=>{this.tableheight=(0,o.W)({id:"tables"})})),this.columns=[{title:"序号",dataIndex:"id",key:"id",customRender:(t,a,e)=>this.No(e),width:80},{title:"头像",dataIndex:"avatar",key:"avatar",scopedSlots:{customRender:"avatar"}},{title:"用户名",dataIndex:"userName",key:"userName"},{title:"角色",dataIndex:"role",key:"role",ellipsis:!0,customRender:(t,a,e)=>"admin"===t?"管理员":"普通用户"},{title:"帐号状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",key:"createTime",sorter:!0,ellipsis:!0,width:200},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}]},methods:{addOrEditUser(t){(0,l.Z)({title:t?"编辑用户":"添加用户",width:"800px"},{component:n["default"],props:{entity:t}})},delUser(t){this.$confirm({title:"确认删除",content:"确认删除吗?",onOk:()=>{this.$message.success("删除成功"),this.refresh()}})},fetchData(t){this.isTableLoading=!0;var a=[];for(let e=0;e<200;e++)a[e]={id:e,avatar:localStorage.getItem("imageData"),role:"admin",userName:"admin",status:e%2==0,createTime:"2022-01-01 00:00:00"};setTimeout((()=>{t.finishedCallback&&t.finishedCallback(),t.successCallback&&t.successCallback({items:a,totalCount:200})}),300)}}},d=c,u=e(1001),m=(0,u.Z)(d,s,r,!1,null,"692aae2a",null),f=m.exports}}]);
//# sourceMappingURL=5859.46c0040a.js.map