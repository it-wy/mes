"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[7705],{87705:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-user"},[e("div",{staticStyle:{"background-color":"#fff","margin-bottom":"10px",padding:"12px 24px","box-sizing":"border-box","border-radius":"4px"}},[e("a-form",{attrs:{form:t.form,layout:"vertical"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:4}},[e("a-form-item",{attrs:{label:"操作用户"}},[e("a-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1)],1),e("a-col",{attrs:{span:4}},[e("a-form-item",{attrs:{label:"操作类型"}},[e("a-select",{attrs:{placeholder:"请选择操作类型"},model:{value:t.form.operationType,callback:function(e){t.$set(t.form,"operationType",e)},expression:"form.operationType"}},[e("a-select-option",{attrs:{value:"add"}},[t._v("添加")]),e("a-select-option",{attrs:{value:"delete"}},[t._v("删除")]),e("a-select-option",{attrs:{value:"update"}},[t._v("修改")]),e("a-select-option",{attrs:{value:"query"}},[t._v("查询")])],1)],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:"操作时间"}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},model:{value:t.form.operationTime,callback:function(e){t.$set(t.form,"operationTime",e)},expression:"form.operationTime"}})],1)],1),e("a-col",{attrs:{span:4}},[e("a-form-item",{attrs:{label:"操作对象"}},[e("a-input",{attrs:{placeholder:"请输入操作对象"},model:{value:t.form.operationObject,callback:function(e){t.$set(t.form,"operationObject",e)},expression:"form.operationObject"}})],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-item",{attrs:{label:" "}},[e("g-btn",{staticClass:"mr-2",attrs:{text:"查询",type:"primary"},on:{callback:t.search}}),e("g-btn",{attrs:{text:"重置"},on:{callback:t.reset}})],1)],1)],1)],1)],1),e("div",{staticStyle:{"background-color":"#fff",padding:"12px 24px 0","box-sizing":"border-box","overflow-y":"hidden","border-radius":"4px"}},[e("g-table-bar",{attrs:{spacing:t.tableSize,columns:t.columns,virtualColumns:t.virtualColumns},on:{"update:spacing":function(e){t.tableSize=e},"update:columns":function(e){t.columns=e},refreshTable:t.refresh}},[e("g-btn",{staticStyle:{"margin-right":"10px"},attrs:{text:"导出 Excel"}})],1),e("a-table",{attrs:{id:"tables",columns:t.columns,"data-source":t.dataList,scroll:{y:t.tableheight},"row-key":t=>t.id,pagination:t.pagination,loading:t.isTableLoading,size:t.tableSize},on:{change:t.tableChange},scopedSlots:t._u([{key:"details",fn:function(a){return e("span",{},[t._v(" "+t._s(a?a.substring(0,20)+"...":"")+" ")])}},{key:"action",fn:function(a,o){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.showDetails(o)}}},[t._v("详情")])])}}])})],1)])},i=[],s=a(37491),r=a(36026),n=a(30381),l=a.n(n),c=a(2136),d={name:"equipment-audit-log",mixins:[r.tL],data(){return{tableheight:0,form:{userName:"",operationType:void 0,operationTime:[],operationObject:""},columns:[{title:"序号",dataIndex:"id",key:"id",customRender:(t,e,a)=>`${a+1}`,width:80},{title:"操作时间",dataIndex:"operationTime",key:"operationTime",sorter:!0,width:200,customRender:t=>t?l()(t).format("YYYY-MM-DD HH:mm:ss"):""},{title:"操作用户",dataIndex:"userName",key:"userName"},{title:"操作类型",dataIndex:"operationType",key:"operationType"},{title:"操作对象",dataIndex:"operationObject",key:"operationObject"},{title:"操作详情",dataIndex:"details",key:"details",scopedSlots:{customRender:"details"},ellipsis:!0},{title:"操作结果",dataIndex:"result",key:"result"},{title:"IP 地址",dataIndex:"ipAddress",key:"ipAddress"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"},width:100}],virtualColumns:[],dataList:[]}},mounted(){this.virtualColumns=JSON.parse(JSON.stringify(this.columns)).map((t=>(t.checked=!0,t))),this.$nextTick((()=>{this.tableheight=(0,s.W)({id:"tables"})})),this.fetchData({pageSize:10,pageNo:1,successCallback:t=>{this.dataList=t.items,this.pagination.total=t.totalCount}})},methods:{search(){this.refresh()},reset(){this.form={userName:"",operationType:void 0,operationTime:[],operationObject:""},this.refresh()},fetchData(t){this.isTableLoading=!0,setTimeout((()=>{const e=[];for(let a=0;a<t.pageSize;a++)e.push({id:(t.pageNo-1)*t.pageSize+a+1,operationTime:l()().subtract(a,"minutes"),userName:"admin"+a,operationType:["添加","删除","修改","查询"][Math.floor(4*Math.random())],operationObject:"设备"+a,details:"这是操作详情的详细信息，可能会很长，需要进行截断处理。"+a,result:Math.random()>.5?"成功":"失败",ipAddress:"192.168.1."+a});this.isTableLoading=!1,t.successCallback&&t.successCallback({items:e,totalCount:100})}),500)},showDetails(t){(0,c.Z)({title:"操作详情",width:"600px"},{component:AuditLogDetail,data:t})},tableChange(t,e,a){this.pagination=t,this.fetchData({pageSize:t.pageSize,pageNo:t.current,sortField:a.field,sortOrder:a.order,...this.form,successCallback:t=>{this.dataList=t.items,this.pagination.total=t.totalCount}})}}},p=d,u=a(1001),m=(0,u.Z)(p,o,i,!1,null,"7c6fa740",null),f=m.exports}}]);
//# sourceMappingURL=7705.d01a1ee3.js.map