"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1102,3447,6202,1588],{33447:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"component-panel"},[e("a-collapse",{attrs:{bordered:!1},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[e("a-collapse-panel",{key:"1",attrs:{header:"基础图表"}},[e("div",{staticClass:"chart-list"},t._l(t.basicCharts,(function(a){return e("div",{key:a.type,staticClass:"chart-item",on:{click:function(e){return t.handleChartClick(a)}}},[e("i",{class:a.icon}),e("span",[t._v(t._s(a.name))])])})),0)]),e("a-collapse-panel",{key:"2",attrs:{header:"高级图表"}},[e("div",{staticClass:"chart-list"},t._l(t.advancedCharts,(function(a){return e("div",{key:a.type,staticClass:"chart-item",on:{click:function(e){return t.handleChartClick(a)}}},[e("i",{class:a.icon}),e("span",[t._v(t._s(a.name))])])})),0)])],1)],1)},r=[],s={name:"ComponentPanel",data(){return{activeKey:["1"],basicCharts:[{type:"line",name:"折线图",icon:"ri-line-chart-line",option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}]}},{type:"bar",name:"柱状图",icon:"ri-bar-chart-2-line",option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[120,200,150,80,70,110,130],type:"bar"}]}},{type:"pie",name:"饼图",icon:"ri-pie-chart-2-line",option:{series:[{type:"pie",data:[{value:335,name:"直接访问"},{value:234,name:"邮件营销"},{value:1548,name:"搜索引擎"}]}]}}],advancedCharts:[{type:"scatter",name:"散点图",icon:"ri-bubble-chart-line",option:{xAxis:{},yAxis:{},series:[{type:"scatter",data:[[10,8.04],[8,6.95],[13,7.58],[9,8.81],[11,8.33]]}]}},{type:"radar",name:"雷达图",icon:"ri-radar-line",option:{radar:{indicator:[{name:"销售",max:6500},{name:"管理",max:16e3},{name:"信息技术",max:3e4},{name:"客服",max:38e3},{name:"研发",max:52e3},{name:"市场",max:25e3}]},series:[{type:"radar",data:[{value:[4300,1e4,28e3,35e3,5e4,19e3]}]}]}}]}},methods:{handleChartClick(t){this.$emit("add-chart",{...t,x:0,y:0,width:400,height:300})}}},i=s,c=a(1001),l=(0,c.Z)(i,n,r,!1,null,"7567b162",null),o=l.exports},46202:function(t,e,a){a.r(e),a.d(e,{default:function(){return o}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"property-panel"},[t.currentChart?[e("div",{staticClass:"panel-section"},[e("div",{staticClass:"section-title"},[t._v("基础属性")]),e("div",{staticClass:"section-content"},[e("a-form",{attrs:{"label-col":{span:8},"wrapper-col":{span:16}}},[e("a-form-item",{attrs:{label:"位置 X"}},[e("a-input-number",{attrs:{min:0},on:{change:t.handlePositionChange},model:{value:t.currentChart.x,callback:function(e){t.$set(t.currentChart,"x",e)},expression:"currentChart.x"}})],1),e("a-form-item",{attrs:{label:"位置 Y"}},[e("a-input-number",{attrs:{min:0},on:{change:t.handlePositionChange},model:{value:t.currentChart.y,callback:function(e){t.$set(t.currentChart,"y",e)},expression:"currentChart.y"}})],1),e("a-form-item",{attrs:{label:"宽度"}},[e("a-input-number",{attrs:{min:100},on:{change:t.handleSizeChange},model:{value:t.currentChart.width,callback:function(e){t.$set(t.currentChart,"width",e)},expression:"currentChart.width"}})],1),e("a-form-item",{attrs:{label:"高度"}},[e("a-input-number",{attrs:{min:100},on:{change:t.handleSizeChange},model:{value:t.currentChart.height,callback:function(e){t.$set(t.currentChart,"height",e)},expression:"currentChart.height"}})],1)],1)],1)]),e("div",{staticClass:"panel-section"},[e("div",{staticClass:"section-title"},[t._v("数据配置")]),e("div",{staticClass:"section-content"},[e("a-form",{attrs:{"label-col":{span:8},"wrapper-col":{span:16}}},[e("a-form-item",{attrs:{label:"数据源"}},[e("a-select",{on:{change:t.handleDataSourceChange},model:{value:t.dataSource,callback:function(e){t.dataSource=e},expression:"dataSource"}},[e("a-select-option",{attrs:{value:"static"}},[t._v("静态数据")]),e("a-select-option",{attrs:{value:"api"}},[t._v("API接口")])],1)],1)],1),"static"===t.dataSource?e("div",{staticClass:"data-editor"},[e("a-input.TextArea",{attrs:{rows:6},on:{change:t.handleDataChange},model:{value:t.staticData,callback:function(e){t.staticData=e},expression:"staticData"}})],1):t._e(),"api"===t.dataSource?e("div",{staticClass:"api-config"},[e("a-form",{attrs:{"label-col":{span:8},"wrapper-col":{span:16}}},[e("a-form-item",{attrs:{label:"接口地址"}},[e("a-input",{on:{change:t.handleApiChange},model:{value:t.apiUrl,callback:function(e){t.apiUrl=e},expression:"apiUrl"}})],1),e("a-form-item",{attrs:{label:"请求方法"}},[e("a-select",{on:{change:t.handleApiChange},model:{value:t.apiMethod,callback:function(e){t.apiMethod=e},expression:"apiMethod"}},[e("a-select-option",{attrs:{value:"GET"}},[t._v("GET")]),e("a-select-option",{attrs:{value:"POST"}},[t._v("POST")])],1)],1)],1)],1):t._e()],1)]),e("div",{staticClass:"panel-section"},[e("div",{staticClass:"section-title"},[t._v("样式配置")]),e("div",{staticClass:"section-content"},[e("a-form",{attrs:{"label-col":{span:8},"wrapper-col":{span:16}}},[e("a-form-item",{attrs:{label:"背景颜色"}},[e("a-input",{attrs:{type:"color"},on:{change:t.handleStyleChange},model:{value:t.currentChart.backgroundColor,callback:function(e){t.$set(t.currentChart,"backgroundColor",e)},expression:"currentChart.backgroundColor"}})],1),e("a-form-item",{attrs:{label:"边框样式"}},[e("a-select",{on:{change:t.handleStyleChange},model:{value:t.currentChart.borderStyle,callback:function(e){t.$set(t.currentChart,"borderStyle",e)},expression:"currentChart.borderStyle"}},[e("a-select-option",{attrs:{value:"solid"}},[t._v("实线")]),e("a-select-option",{attrs:{value:"dashed"}},[t._v("虚线")]),e("a-select-option",{attrs:{value:"none"}},[t._v("无")])],1)],1)],1)],1)])]:e("div",{staticClass:"empty-tip"},[t._v(" 请选择一个图表组件进行配置 ")])],2)},r=[],s={name:"PropertyPanel",props:{currentChart:{type:Object,default:null}},data(){return{dataSource:"static",staticData:"",apiUrl:"",apiMethod:"GET"}},methods:{handlePositionChange(){this.$emit("update-chart",{...this.currentChart,type:"position"})},handleSizeChange(){this.$emit("update-chart",{...this.currentChart,type:"size"})},handleStyleChange(){this.$emit("update-chart",{...this.currentChart,type:"style"})},handleDataSourceChange(t){this.dataSource=t},handleDataChange(){try{const t=JSON.parse(this.staticData);this.$emit("update-chart",{...this.currentChart,data:t,type:"data"})}catch(t){console.error("数据格式错误:",t)}},handleApiChange(){this.$emit("update-chart",{...this.currentChart,api:{url:this.apiUrl,method:this.apiMethod},type:"api"})}},watch:{currentChart:{handler(t){t&&(this.dataSource=t.api?"api":"static",t.option&&t.option.series?this.staticData=JSON.stringify(t.option.series[0].data||[],null,2):this.staticData=JSON.stringify(t.data||{},null,2),t.api&&(this.apiUrl=t.api.url||"",this.apiMethod=t.api.method||"GET"))},immediate:!0}}},i=s,c=a(1001),l=(0,c.Z)(i,n,r,!1,null,"016a8ae8",null),o=l.exports},81588:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"screen-canvas-container"},[e("div",{ref:"screenCanvas",staticClass:"screen-canvas",style:t.canvasStyle},[e("div",{staticClass:"grid-background"}),t._l(t.charts,(function(a,n){return[e("div",{key:a.id,staticClass:"chart-item",class:{selected:t.selectedChartIndex===n},style:t.getChartStyle(a),on:{mousedown:function(e){return t.startDrag(e,a,n)},click:function(e){return e.stopPropagation(),t.selectChart(a,n)}}},[e("div",{ref:"chartContainer",refInFor:!0,staticClass:"chart-container",attrs:{id:a.id}})])]}))],2)])},r=[],s=a(61893),i=a(63844),c=a.n(i),l={name:"ScreenCanvas",data(){return{charts:[],chartInstances:{},erd:null,selectedChartIndex:-1,isDragging:!1,dragStartX:0,dragStartY:0,dragChart:null}},computed:{canvasStyle(){return{width:"100%",height:"100%",transformOrigin:"0 0",backgroundColor:"#0d2a42"}}},mounted(){this.initResizeDetector()},methods:{initResizeDetector(){this.erd=c()()},addChart(t){const e="chart_"+Date.now();this.charts.push({id:e,...t}),this.$nextTick((()=>{this.initChart(e,t)}))},initChart(t,e){const a=document.getElementById(t);if(!a)return;const n=s.S1(a);this.chartInstances[t]=n,this.erd.listenTo(a,(()=>{n.resize()})),n.setOption(e.option)},getChartStyle(t){return{position:"absolute",left:t.x+"px",top:t.y+"px",width:t.width+"px",height:t.height+"px"}},selectChart(t,e){this.selectedChartIndex=e,this.$emit("select-chart",{chart:t,index:e})},startDrag(t,e,a){this.isDragging=!0,this.dragChart=e,this.selectedChartIndex=a;const n=this.$refs.screenCanvas.getBoundingClientRect();this.dragStartX=t.clientX-(n.left+e.x),this.dragStartY=t.clientY-(n.top+e.y),document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.stopDrag),this.$emit("select-chart",{chart:e,index:a})},onDrag(t){if(!this.isDragging||!this.dragChart)return;const e=this.$refs.screenCanvas.getBoundingClientRect(),a=t.clientX-e.left-this.dragStartX,n=t.clientY-e.top-this.dragStartY;this.dragChart.x=Math.max(0,Math.round(a)),this.dragChart.y=Math.max(0,Math.round(n)),this.$emit("update-chart-position",{chart:this.dragChart,index:this.selectedChartIndex})},stopDrag(){this.isDragging=!1,document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag)},updateChartData(t,e){const a=this.chartInstances[t];if(a){const t=a.getOption();t.series.forEach((t=>{t.data=e})),a.setOption(t)}},resizeChart(t){const e=this.chartInstances[t];e&&e.resize()}},beforeDestroy(){Object.values(this.chartInstances).forEach((t=>{t.dispose()})),this.erd&&this.erd.removeAllListeners(this.$refs.screenCanvas),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag)}},o=l,h=a(1001),d=(0,h.Z)(o,n,r,!1,null,"200f151c",null),u=d.exports},11102:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"screen-design"},[e("a-layout",{staticClass:"screen-design-layout"},[e("a-layout-sider",{staticClass:"component-sider",attrs:{width:"280"}},[e("component-panel",{on:{"add-chart":t.handleAddChart}})],1),e("a-layout-content",{staticClass:"design-content"},[e("div",{staticClass:"toolbar"},[e("a-button",{staticClass:"fullscreen-btn",attrs:{type:"primary",icon:"fullscreen"},on:{click:t.toggleFullScreen}},[t._v(" "+t._s(t.isFullScreen?"退出全屏":"全屏预览")+" ")])],1),e("screen-canvas",{ref:"screenCanvas",on:{"select-chart":t.handleSelectChart,"update-chart-position":t.handleChartPositionUpdate}})],1),e("a-layout-sider",{staticClass:"property-sider",attrs:{width:"300"}},[e("property-panel",{attrs:{"current-chart":t.currentChart},on:{"update-chart":t.handleUpdateChart}})],1)],1)],1)},r=[],s=a(33447),i=a(81588),c=a(46202),l={name:"ScreenDesign",components:{ComponentPanel:s["default"],ScreenCanvas:i["default"],PropertyPanel:c["default"]},data(){return{currentChart:null,currentChartIndex:-1,isFullScreen:!1,screenConfig:{width:1920,height:1080,backgroundColor:"#0d2a42",components:[]}}},mounted(){document.addEventListener("fullscreenchange",this.handleFullScreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullScreenChange),document.addEventListener("mozfullscreenchange",this.handleFullScreenChange),document.addEventListener("MSFullscreenChange",this.handleFullScreenChange)},beforeDestroy(){document.removeEventListener("fullscreenchange",this.handleFullScreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullScreenChange),document.removeEventListener("mozfullscreenchange",this.handleFullScreenChange),document.removeEventListener("MSFullscreenChange",this.handleFullScreenChange)},methods:{handleAddChart(t){this.$refs.screenCanvas.addChart(t)},handleSelectChart({chart:t,index:e}){this.currentChart=t,this.currentChartIndex=e},handleUpdateChart(t){const{type:e}=t;if(-1===this.currentChartIndex)return;const a=this.$refs.screenCanvas.charts,n=a[this.currentChartIndex];switch(e){case"position":n.x=t.x,n.y=t.y;break;case"size":n.width=t.width,n.height=t.height,this.$refs.screenCanvas.resizeChart(n.id);break;case"style":n.backgroundColor=t.backgroundColor,n.borderStyle=t.borderStyle;break;case"data":n.data=t.data,this.$refs.screenCanvas.updateChartData(n.id,t.data);break;case"api":n.api=t.api;break}this.currentChart={...n}},handleChartPositionUpdate({chart:t,index:e}){this.currentChartIndex===e&&(this.currentChart={...t})},toggleFullScreen(){const t=document.querySelector(".screen-design");this.isFullScreen?(this.isFullScreen=!1,this.originalStyles&&Object.keys(this.originalStyles).forEach((e=>{t.style[e]=this.originalStyles[e]})),this.showSidebars=!0):(this.isFullScreen=!0,this.originalStyles={position:t.style.position,top:t.style.top,left:t.style.left,width:t.style.width,height:t.style.height,zIndex:t.style.zIndex},t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.zIndex="9999",this.showSidebars=!1)},handleFullScreenChange(){this.isFullScreen=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}},o=l,h=a(1001),d=(0,h.Z)(o,n,r,!1,null,"485fc74a",null),u=d.exports}}]);
//# sourceMappingURL=1102.7a720e10.js.map