"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[5640,2200],{99319:function(e,t,a){a.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-content"},[t("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:e.rules,model:e.copyForm}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:e.copyForm.value,callback:function(t){e.$set(e.copyForm,"value",t)},expression:"copyForm.value"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:e.copyForm.copyValue,callback:function(t){e.$set(e.copyForm,"copyValue",t)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),t("div",{staticClass:"modal-footer"},[t("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:e.save}}),t("g-btn",{attrs:{text:"取消"},on:{callback:function(t){return e.$emit("closeModal")}}})],1)])},n=[],s=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((e=>{e&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),o=s,l=a(1001),r=(0,l.Z)(o,i,n,!1,null,"04e98444",null),c=r.exports},92200:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"conversionCode",attrs:{label:"转换编码",prop:"conversionCode"}},[t("a-input",{attrs:{placeholder:"请输入转换编码，格式为UC开头加4位数字",name:"conversionCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.conversionCode,callback:function(t){e.$set(e.entity,"conversionCode",t)},expression:"entity.conversionCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"转换名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入转换名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"unitType",attrs:{label:"单位类型",prop:"unitType"}},[t("a-select",{attrs:{placeholder:"请选择单位类型",name:"unitType"},on:{change:e.handleUnitTypeChange},model:{value:e.entity.unitType,callback:function(t){e.$set(e.entity,"unitType",t)},expression:"entity.unitType"}},[t("a-select-option",{attrs:{value:"长度单位"}},[e._v("长度单位")]),t("a-select-option",{attrs:{value:"重量单位"}},[e._v("重量单位")]),t("a-select-option",{attrs:{value:"面积单位"}},[e._v("面积单位")]),t("a-select-option",{attrs:{value:"体积单位"}},[e._v("体积单位")]),t("a-select-option",{attrs:{value:"温度单位"}},[e._v("温度单位")]),t("a-select-option",{attrs:{value:"时间单位"}},[e._v("时间单位")]),t("a-select-option",{attrs:{value:"速度单位"}},[e._v("速度单位")]),t("a-select-option",{attrs:{value:"其他单位"}},[e._v("其他单位")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"sourceUnit",attrs:{label:"源单位",prop:"sourceUnit"}},[t("a-select",{attrs:{placeholder:"请选择源单位",name:"sourceUnit",disabled:!e.entity.unitType},model:{value:e.entity.sourceUnit,callback:function(t){e.$set(e.entity,"sourceUnit",t)},expression:"entity.sourceUnit"}},e._l(e.sourceUnitOptions,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"targetUnit",attrs:{label:"目标单位",prop:"targetUnit"}},[t("a-select",{attrs:{placeholder:"请选择目标单位",name:"targetUnit",disabled:!e.entity.unitType},model:{value:e.entity.targetUnit,callback:function(t){e.$set(e.entity,"targetUnit",t)},expression:"entity.targetUnit"}},e._l(e.targetUnitOptions,(function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(" "+e._s(a.label)+" ")])})),1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"bidirectional",attrs:{label:"反向可用",prop:"bidirectional"}},[t("a-switch",{model:{value:e.entity.bidirectional,callback:function(t){e.$set(e.entity,"bidirectional",t)},expression:"entity.bidirectional"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"conversionRatio",attrs:{label:"转换比率",prop:"conversionRatio"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:6,placeholder:"请输入转换比率",name:"conversionRatio"},model:{value:e.entity.conversionRatio,callback:function(t){e.$set(e.entity,"conversionRatio",t)},expression:"entity.conversionRatio"}})],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{ref:"conversionFormula",attrs:{label:"转换公式",prop:"conversionFormula"}},[t("a-input",{attrs:{placeholder:"请输入转换公式，如：源单位 × 100",name:"conversionFormula"},model:{value:e.entity.conversionFormula,callback:function(t){e.$set(e.entity,"conversionFormula",t)},expression:"entity.conversionFormula"}})],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{ref:"description",attrs:{label:"单位描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述",rows:2,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"转换示例"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-example-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addExample}},[e._v("添加示例")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.exampleColumns,dataSource:e.entity.examples,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"sourceValue",fn:function(a,i,n){return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{precision:3,placeholder:"请输入源值"},model:{value:e.entity.examples[n].sourceValue,callback:function(t){e.$set(e.entity.examples[n],"sourceValue",t)},expression:"entity.examples[index].sourceValue"}})]}},{key:"targetValue",fn:function(a,i,n){return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{precision:3,placeholder:"请输入目标值"},model:{value:e.entity.examples[n].targetValue,callback:function(t){e.$set(e.entity.examples[n],"targetValue",t)},expression:"entity.examples[index].targetValue"}})]}},{key:"note",fn:function(a,i,n){return[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.entity.examples[n].note,callback:function(t){e.$set(e.entity.examples[n],"note",t)},expression:"entity.examples[index].note"}})]}},{key:"action",fn:function(a,i,n){return[t("a-button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary",icon:"calculator",size:"small"},on:{click:()=>e.calculateTargetValue(n)}}),t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeExample(n)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},n=[],s=a(36026),o={name:"CreateOrEditUnitConversion",mixins:[s.GE],data(){return{loading:!1,entity:{id:void 0,conversionCode:"",name:"",unitType:"",sourceUnit:"",targetUnit:"",conversionRatio:1,conversionFormula:"",bidirectional:!1,description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},sourceUnitOptions:[],targetUnitOptions:[],unitMap:{"长度单位":[{label:"米",value:"米"},{label:"厘米",value:"厘米"},{label:"毫米",value:"毫米"},{label:"千米",value:"千米"},{label:"英寸",value:"英寸"},{label:"英尺",value:"英尺"}],"重量单位":[{label:"千克",value:"千克"},{label:"克",value:"克"},{label:"毫克",value:"毫克"},{label:"吨",value:"吨"},{label:"磅",value:"磅"}],"面积单位":[{label:"平方米",value:"平方米"},{label:"平方厘米",value:"平方厘米"},{label:"平方千米",value:"平方千米"},{label:"公顷",value:"公顷"},{label:"亩",value:"亩"}],"体积单位":[{label:"立方米",value:"立方米"},{label:"立方厘米",value:"立方厘米"},{label:"升",value:"升"},{label:"毫升",value:"毫升"},{label:"加仑",value:"加仑"}],"温度单位":[{label:"摄氏度",value:"摄氏度"},{label:"华氏度",value:"华氏度"},{label:"开尔文",value:"开尔文"}],"时间单位":[{label:"秒",value:"秒"},{label:"分钟",value:"分钟"},{label:"小时",value:"小时"},{label:"天",value:"天"},{label:"周",value:"周"}],"速度单位":[{label:"米/秒",value:"米/秒"},{label:"千米/小时",value:"千米/小时"},{label:"英里/小时",value:"英里/小时"},{label:"节",value:"节"}],"其他单位":[]},rules:{conversionCode:[{required:!0,message:"请输入转换编码",trigger:"change"},{pattern:/^UC\d{4}$/,message:"转换编码必须为UC开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入转换名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"转换名称不能包含前后空格",trigger:"change"}],unitType:[{required:!0,message:"请选择单位类型",trigger:"change"}],sourceUnit:[{required:!0,message:"请选择源单位",trigger:"change"}],targetUnit:[{required:!0,message:"请选择目标单位",trigger:"change"}],conversionRatio:[{required:!0,message:"请输入转换比率",trigger:"change"},{type:"number",min:0,message:"转换比率不能小于0",trigger:"change"}],conversionFormula:[{required:!0,message:"请输入转换公式",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},exampleColumns:[{title:"源值",dataIndex:"sourceValue",key:"sourceValue",width:"25%",scopedSlots:{customRender:"sourceValue"}},{title:"目标值",dataIndex:"targetValue",key:"targetValue",width:"25%",scopedSlots:{customRender:"targetValue"}},{title:"说明",dataIndex:"note",key:"note",width:"30%",scopedSlots:{customRender:"note"}},{title:"操作",key:"action",width:"20%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,conversionCode:"",name:"",unitType:"",sourceUnit:"",targetUnit:"",conversionRatio:1,conversionFormula:"",bidirectional:!1,description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},this.sourceUnitOptions=[],this.targetUnitOptions=[]},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,examples:e.examples||[]},e.unitType&&this.handleUnitTypeChange(e.unitType)}},async save(){let e=await this.checkError();if(e){if(this.entity.sourceUnit===this.entity.targetUnit)return void this.$message.error("源单位和目标单位不能相同");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(e){console.log(e.target.value)},handleUnitTypeChange(e){this.unitMap[e]?(this.sourceUnitOptions=[...this.unitMap[e]],this.targetUnitOptions=[...this.unitMap[e]],this.entity.unitType!==e&&(this.entity.sourceUnit="",this.entity.targetUnit="")):(this.sourceUnitOptions=[],this.targetUnitOptions=[])},addExample(){this.entity.examples.push({id:Date.now(),sourceValue:1,targetValue:null,note:""})},removeExample(e){this.entity.examples.splice(e,1)},calculateTargetValue(e){const t=this.entity.examples[e];t&&this.entity.conversionRatio>0&&(t.targetValue=t.sourceValue*this.entity.conversionRatio,t.note||(t.note=`${t.sourceValue} ${this.entity.sourceUnit} = ${t.targetValue} ${this.entity.targetUnit}`))}}},l=o,r=a(1001),c=(0,r.Z)(l,i,n,!1,null,"0e36a9a4",null),u=c.exports},85640:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("g-body-layout",{attrs:{pageIndex:e.pageNumber,pageSize:e.pageSize,total:e.total,filterText:e.filterText},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},pageIndexChange:e.pageIndexChange,pageSizeChange:e.pageSizeChange,suffixSearchCallback:e.onFilterReady},scopedSlots:e._u([{key:"btnGroup",fn:function(){return[t("g-btn-group",{attrs:{buttonLists:e.btnList},on:{btnCallBack:e.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[t("g-ndo-table",{attrs:{id:e.id,handName:"单位转换",dataList:e.dataList,isTableLoading:e.loading,total:e.total},on:{rowClick:e.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[e.isShowEdit?t("create-or-edit-unit-conversion",{attrs:{ndoEditParams:e.ndoEditParams,refreshTag:e.refreshTag,saveTag:e.saveTag,resetTag:e.resetTag},on:{childRefresh:function(t){return e.childRefresh(t)},rowClick:function(t){return e.rowClick(t)}}}):t("g-empty")]},proxy:!0}])})},n=[],s=a(92200),o=a(99319),l=a(36026),r={name:"UnitConversion",mixins:[l.He],components:{CreateOrEditUnitConversion:s["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:o.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:e=>{console.log(e),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(e.value,e.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该单位转换规则吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(e){this.loading=!0,setTimeout((()=>{e.finishedCallback();let t=[];const a=["长度单位","重量单位","面积单位","体积单位","温度单位"],i=["米","千克","平方米","立方米","摄氏度"],n=["厘米","克","平方厘米","毫升","华氏度"],s=["启用","禁用"];for(let e=0;e<25;e++){const o=e%5;let l=0,r="";switch(o){case 0:l=100,r="源单位 × 100";break;case 1:l=1e3,r="源单位 × 1000";break;case 2:l=1e4,r="源单位 × 10000";break;case 3:l=1e6,r="源单位 × 1000000";break;case 4:l=1.8,r="源单位 × 1.8 + 32";break}t[e]={id:e+1,conversionCode:`UC${String(e+1).padStart(4,"0")}`,name:`${i[o]}转${n[o]}`,unitType:a[o],sourceUnit:i[o],targetUnit:n[o],conversionRatio:l,conversionFormula:r,description:`${i[o]}到${n[o]}的转换规则，适用于${a[o]}`,status:s[e%2],createdBy:"admin",createdTime:"2024-03-18 "+(10+e%10)+":"+e%60}}this.filterText&&(console.log(this.filterText),t=t.filter((e=>e.conversionCode.indexOf(this.filterText)>-1||e.name.indexOf(this.filterText)>-1||e.unitType.indexOf(this.filterText)>-1||e.sourceUnit.indexOf(this.filterText)>-1||e.targetUnit.indexOf(this.filterText)>-1||e.conversionFormula.indexOf(this.filterText)>-1||e.description.indexOf(this.filterText)>-1))),e.successCallback({items:t,totalCount:2*t.length})}),1e3)}}},c=r,u=a(1001),p=(0,u.Z)(c,i,n,!1,null,"284b0fa8",null),d=p.exports}}]);
//# sourceMappingURL=5640.c4238856.js.map