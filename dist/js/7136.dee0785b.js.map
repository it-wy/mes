{"version":3,"file":"js/7136.dee0785b.js","mappings":"4JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,IAAI,YAAYC,YAAY,2BACzG,EACIC,EAAkB,GCGtB,GACEC,KAAM,eACNC,MAAO,CACLC,MAAO,CACLC,KAAMC,OACNC,QAAS,IAEXC,SAAU,CACRH,KAAMC,OACNC,QAAS,cAEXE,QAAS,CACPJ,KAAMK,OACNH,QAAS,KAAM,CAAG,KAGtB,IAAAI,GACE,MAAO,CACLC,OAAQ,KACRC,OAAQ,KACRC,aAAc,KAElB,EACAC,MAAO,CACL,KAAAX,CAAMY,GACApB,KAAKgB,QAAUI,IAAapB,KAAKgB,OAAOK,YAC1CrB,KAAKgB,OAAOM,SAASF,EAEzB,EACA,QAAAR,CAASW,GACHvB,KAAKgB,QACPhB,KAAKiB,OAAOD,OAAOQ,iBAAiBxB,KAAKgB,OAAOS,WAAYF,EAEhE,EACAV,QAAS,CACPa,MAAM,EACN,OAAAC,CAAQJ,GACFvB,KAAKgB,QACPhB,KAAKgB,OAAOY,cAAcL,EAE9B,IAGJ,OAAAM,GACE7B,KAAK8B,YACP,EACA,aAAAC,GACE/B,KAAKgC,eACP,EACAC,QAAS,CACP,gBAAMH,GAEJ,MAAMI,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAM,qEACbH,EAAOI,OAAS,KACdC,OAAOC,QAAQC,OAAO,CACpBC,MAAO,CAAEC,GAAI,8DAGfJ,OAAOC,QAAQ,CAAC,0BAA0B,KACxCxC,KAAKiB,OAASsB,OAAOtB,OACrBjB,KAAK4C,YAAW,GACjB,EAEHT,SAASU,KAAKC,YAAYZ,EAC5B,EACA,UAAAU,GACE,MAAM/B,EAAU,CACdL,MAAOR,KAAKQ,MACZI,SAAUZ,KAAKY,YACZZ,KAAKa,SAGVb,KAAKgB,OAAShB,KAAKiB,OAAOD,OAAO+B,OAAO/C,KAAKgD,MAAMC,UAAWpC,GAG9Db,KAAKkB,aAAelB,KAAKgB,OAAOkC,yBAAwB,KACtD,MAAM1C,EAAQR,KAAKgB,OAAOK,WAC1BrB,KAAKmD,MAAM,QAAS3C,GACpBR,KAAKmD,MAAM,SAAU3C,EAAK,IAI5B+B,OAAOa,iBAAiB,SAAUpD,KAAKqD,aACzC,EACA,YAAAA,GACMrD,KAAKgB,QACPhB,KAAKgB,OAAOsC,QAEhB,EACA,aAAAtB,GACMhC,KAAKkB,cACPlB,KAAKkB,aAAaqC,UAEhBvD,KAAKgB,QACPhB,KAAKgB,OAAOuC,UAEdhB,OAAOiB,oBAAoB,SAAUxD,KAAKqD,aAC5C,ICvG6I,I,UCQ7II,GAAY,OACd,EACA3D,EACAO,GACA,EACA,KACA,WACA,MAIF,EAAeoD,EAAiB,O","sources":["webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue?4d16","webpack://data-v2/src/views/setting/code-editor/components/MonacoEditor.vue","webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue?5047","webpack://data-v2/./src/views/setting/code-editor/components/MonacoEditor.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"container\",staticClass:\"monaco-editor-container\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"monaco-editor-container\" ref=\"container\"></div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MonacoEditor',\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    language: {\r\n      type: String,\r\n      default: 'javascript'\r\n    },\r\n    options: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      monaco: null,\r\n      subscription: null\r\n    }\r\n  },\r\n  watch: {\r\n    value(newValue) {\r\n      if (this.editor && newValue !== this.editor.getValue()) {\r\n        this.editor.setValue(newValue)\r\n      }\r\n    },\r\n    language(newVal) {\r\n      if (this.editor) {\r\n        this.monaco.editor.setModelLanguage(this.editor.getModel(), newVal)\r\n      }\r\n    },\r\n    options: {\r\n      deep: true,\r\n      handler(newVal) {\r\n        if (this.editor) {\r\n          this.editor.updateOptions(newVal)\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMonaco()\r\n  },\r\n  beforeDestroy() {\r\n    this.destroyMonaco()\r\n  },\r\n  methods: {\r\n    async initMonaco() {\r\n      // 动态加载 Monaco Editor\r\n      const script = document.createElement('script')\r\n      script.src = 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js'\r\n      script.onload = () => {\r\n        window.require.config({\r\n          paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' }\r\n        })\r\n\r\n        window.require(['vs/editor/editor.main'], () => {\r\n          this.monaco = window.monaco\r\n          this.initEditor()\r\n        })\r\n      }\r\n      document.body.appendChild(script)\r\n    },\r\n    initEditor() {\r\n      const options = {\r\n        value: this.value,\r\n        language: this.language,\r\n        ...this.options\r\n      }\r\n\r\n      this.editor = this.monaco.editor.create(this.$refs.container, options)\r\n\r\n      // 监听内容变化\r\n      this.subscription = this.editor.onDidChangeModelContent(() => {\r\n        const value = this.editor.getValue()\r\n        this.$emit('input', value)\r\n        this.$emit('change', value)\r\n      })\r\n\r\n      // 自适应容器大小\r\n      window.addEventListener('resize', this.handleResize)\r\n    },\r\n    handleResize() {\r\n      if (this.editor) {\r\n        this.editor.layout()\r\n      }\r\n    },\r\n    destroyMonaco() {\r\n      if (this.subscription) {\r\n        this.subscription.dispose()\r\n      }\r\n      if (this.editor) {\r\n        this.editor.dispose()\r\n      }\r\n      window.removeEventListener('resize', this.handleResize)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.monaco-editor-container {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style> ","import mod from \"-!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MonacoEditor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MonacoEditor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MonacoEditor.vue?vue&type=template&id=2b10c320&scoped=true\"\nimport script from \"./MonacoEditor.vue?vue&type=script&lang=js\"\nexport * from \"./MonacoEditor.vue?vue&type=script&lang=js\"\nimport style0 from \"./MonacoEditor.vue?vue&type=style&index=0&id=2b10c320&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b10c320\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","staticRenderFns","name","props","value","type","String","default","language","options","Object","data","editor","monaco","subscription","watch","newValue","getValue","setValue","newVal","setModelLanguage","getModel","deep","handler","updateOptions","mounted","initMonaco","beforeDestroy","destroyMonaco","methods","script","document","createElement","src","onload","window","require","config","paths","vs","initEditor","body","appendChild","create","$refs","container","onDidChangeModelContent","$emit","addEventListener","handleResize","layout","dispose","removeEventListener","component"],"sourceRoot":""}