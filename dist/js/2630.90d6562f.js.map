{"version":3,"file":"js/2630.90d6562f.js","mappings":"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","sources":["webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?0ab2","webpack://data-v2/src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?4880","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/views/container-manager/split-qty/split-qty.vue?ba0f","webpack://data-v2/src/views/container-manager/split-qty/split-qty.vue","webpack://data-v2/./src/views/container-manager/split-qty/split-qty.vue?6d8d","webpack://data-v2/./src/views/container-manager/split-qty/split-qty.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"sign-container\"},[_c('h3',{staticClass:\"sign-title\"},[_vm._v(_vm._s(_vm.title || '请在下方区域签名'))]),_c('g-sign',{ref:\"signBoard\",attrs:{\"line-width\":_vm.lineWidth,\"line-color\":_vm.lineColor,\"background-color\":_vm.backgroundColor,\"save-format\":_vm.saveFormat},on:{\"save\":_vm.handleSave,\"clear\":_vm.handleClear,\"save-error\":_vm.handleError}})],1)]),_c('div',{staticClass:\"modal-footer\"},[_c('g-btn',{attrs:{\"text\":\"确认\",\"type\":\"primary\"},on:{\"callback\":_vm.save}}),_c('g-btn',{attrs:{\"text\":\"取消\"},on:{\"callback\":function($event){return _vm.$emit('closeModal')}}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"sign-container\">\r\n        <h3 class=\"sign-title\">{{ title || '请在下方区域签名' }}</h3>\r\n        <g-sign\r\n          ref=\"signBoard\"\r\n          :line-width=\"lineWidth\"\r\n          :line-color=\"lineColor\"\r\n          :background-color=\"backgroundColor\"\r\n          :save-format=\"saveFormat\"\r\n          @save=\"handleSave\"\r\n          @clear=\"handleClear\"\r\n          @save-error=\"handleError\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <g-btn text=\"确认\" @callback=\"save\" type=\"primary\"></g-btn>\r\n      <g-btn text=\"取消\" @callback=\"$emit('closeModal')\"></g-btn>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GSign from '@/components/g-sign/g-sign.vue';\r\n\r\nexport default {\r\n  name: \"GSignModal\",\r\n  components: {\r\n    GSign\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    saveFormat: {\r\n      type: String,\r\n      default: 'png',\r\n      validator: (value) => ['png', 'jpeg', 'webp'].includes(value)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      signatureData: null,\r\n      hasSignature: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleSave(imageData) {\r\n      this.signatureData = imageData;\r\n      this.hasSignature = true;\r\n    },\r\n    \r\n    handleClear() {\r\n      this.signatureData = null;\r\n      this.hasSignature = false;\r\n    },\r\n    \r\n    handleError(message) {\r\n      this.$message.error(message);\r\n    },\r\n    \r\n    save() {\r\n      if (!this.hasSignature) {\r\n        this.$message.error('请先进行签名');\r\n        return;\r\n      }\r\n      \r\n      this.$emit('success', this.signatureData);\r\n      this.$emit('closeModal');\r\n    },\r\n    \r\n    clearSignature() {\r\n      if (this.$refs.signBoard) {\r\n        this.$refs.signBoard.clearCanvas();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.modal {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.modal-content {\r\n  flex: 1;\r\n  padding: 20px;\r\n  overflow: auto;\r\n}\r\n\r\n.sign-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.sign-title {\r\n  margin-top: 0;\r\n  margin-bottom: 16px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 12px 20px;\r\n  border-top: 1px solid #e8e8e8;\r\n  \r\n  :deep(.g-btn) {\r\n    margin-left: 8px;\r\n  }\r\n}\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./g-sign-modal.vue?vue&type=template&id=e39a081c&scoped=true\"\nimport script from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nexport * from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./g-sign-modal.vue?vue&type=style&index=0&id=e39a081c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e39a081c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father sflex\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\",\"rules\":_vm.rules}},[_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('g-container-list',{attrs:{\"value\":_vm.entity.containerName},on:{\"update:value\":function($event){return _vm.$set(_vm.entity, \"containerName\", $event)},\"searchClick\":_vm.onSearch}})],1)]},proxy:true},{key:\"expand-card\",fn:function(){return [_c('div',{staticClass:\"expand-card\"},[_c('g-collapse',{attrs:{\"headerName\":\"扩展信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":4}},[_c('a-form-model-item',{attrs:{\"label\":\"设备\"}},[_c('g-select',{attrs:{\"showSearch\":true,\"loadType\":\"scroll\"},on:{\"change\":_vm.resourceChange},model:{value:(_vm.entity.resourceId),callback:function ($$v) {_vm.$set(_vm.entity, \"resourceId\", $$v)},expression:\"entity.resourceId\"}})],1)],1)],1)]},proxy:true}])})],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('g-collapse',{attrs:{\"headerName\":\"拆分信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDetailRow}},[_vm._v(\"添加批次\")]),_c('a-table',{staticClass:\"mt-4\",attrs:{\"dataSource\":_vm.detailList,\"columns\":_vm.columns,\"pagination\":false},scopedSlots:_vm._u([{key:\"containerName\",fn:function(text,record){return _c('span',{},[_c('a-form-model-item',{attrs:{\"rules\":[{required: true, message: '请输入批次名称'}]}},[_c('a-input',{attrs:{\"placeholder\":\"请输入批次名称\"},model:{value:(record.containerName),callback:function ($$v) {_vm.$set(record, \"containerName\", $$v)},expression:\"record.containerName\"}})],1)],1)}},{key:\"splitQty\",fn:function(text,record){return _c('span',{},[_c('a-form-model-item',{attrs:{\"rules\":[{required: true, message: '请输入拆分数量'}]}},[_c('a-input-number',{staticStyle:{\"width\":\"100%\"},attrs:{\"min\":0.0001,\"max\":record.maxQty,\"precision\":4},on:{\"change\":_vm.onMaxQtyChange},model:{value:(record.splitQty),callback:function ($$v) {_vm.$set(record, \"splitQty\", $$v)},expression:\"record.splitQty\"}})],1)],1)}},{key:\"action\",fn:function(text,record){return _c('span',{},[_c('a-space',[_c('a-popconfirm',{attrs:{\"title\":\"确认删除?\"},on:{\"confirm\":function($event){return _vm.deleteDetailRow(record, _vm.index)}}},[_c('a',[_vm._v(\"删除\")])])],1)],1)}}])})],1)],1),_c('a-row',{staticClass:\"mt-4\",attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"拆分原因\",\"prop\":\"splitReasonId\",\"rules\":[{required: true, message: '请选择拆分原因'}]}},[_c('g-select',{model:{value:(_vm.entity.splitReasonId),callback:function ($$v) {_vm.$set(_vm.entity, \"splitReasonId\", $$v)},expression:\"entity.splitReasonId\"}})],1)],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\" \"}},[_c('a-checkbox',{model:{value:(_vm.entity.isClose),callback:function ($$v) {_vm.$set(_vm.entity, \"isClose\", $$v)},expression:\"entity.isClose\"}},[_vm._v(\"数量为0时关闭批次\")])],1)],1)],1)]},proxy:true}])}),(_vm.dataPoints.length)?_c('g-collapse',{attrs:{\"headerName\":\"数据采集\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('g-data-points',{attrs:{\"dataPoints\":_vm.dataPoints,\"validDataName\":\"dataPoints\"}})]},proxy:true}],null,false,1867507197)}):_vm._e(),(_vm.ppcDataPoints.length)?_c('g-collapse',{attrs:{\"headerName\":\"工艺参数\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('g-data-points',{attrs:{\"dataPoints\":_vm.ppcDataPoints,\"validDataName\":\"ppcDataPoints\"}})]},proxy:true}],null,false,4096235805)}):_vm._e(),_c('g-collapse',{attrs:{\"headerName\":\"操作描述\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"描述\"}},[_c('a-textarea',{attrs:{\"rows\":4,\"maxLength\":1000,\"placeholder\":\"请输入操作描述\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1)],1)],1)]},proxy:true}])})]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":_vm.refresh}}),_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"提交\",\"type\":\"primary\"},on:{\"callback\":_vm.save}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-form-model\r\n    ref=\"form\"\r\n    :model=\"entity\"\r\n    layout=\"vertical\"\r\n    autocomplete=\"off\"\r\n    :rules=\"rules\"\r\n    class=\"h-father sflex\"\r\n  >\r\n    <g-body-form-layout>\r\n      <!-- 搜索区域 -->\r\n      <template #search-card>\r\n        <div class=\"search-card\">\r\n          <g-container-list \r\n            :value.sync=\"entity.containerName\"\r\n            @searchClick=\"onSearch\"\r\n          >\r\n          </g-container-list>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 展开区域 -->\r\n      <template #expand-card>\r\n        <div class=\"expand-card\">\r\n          <g-collapse headerName=\"扩展信息\">\r\n            <template #content>\r\n              <a-row :gutter=\"24\">\r\n                <a-col :span=\"4\">\r\n                  <a-form-model-item label=\"设备\">\r\n                    <g-select\r\n                      v-model=\"entity.resourceId\"\r\n                      @change=\"resourceChange\"\r\n                      :showSearch=\"true\"\r\n                      loadType=\"scroll\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </template>\r\n          </g-collapse>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 主体内容 -->\r\n      <template #card-body>\r\n        <!-- 拆分信息 -->\r\n        <g-collapse headerName=\"拆分信息\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"24\">\r\n                <a-button @click=\"addDetailRow\" type=\"primary\">添加批次</a-button>\r\n                \r\n                <!-- 批次列表 -->\r\n                <a-table\r\n                  :dataSource=\"detailList\"\r\n                  :columns=\"columns\"\r\n                  :pagination=\"false\"\r\n                  class=\"mt-4\"\r\n                >\r\n                    <span slot=\"containerName\" slot-scope=\"text,record\">\r\n                      <a-form-model-item :rules=\"[{required: true, message: '请输入批次名称'}]\">\r\n                        <a-input v-model=\"record.containerName\" placeholder=\"请输入批次名称\" />\r\n                      </a-form-model-item>\r\n                    </span>\r\n                    <span slot=\"splitQty\" slot-scope=\"text,record\">\r\n                      <a-form-model-item :rules=\"[{required: true, message: '请输入拆分数量'}]\">\r\n                        <a-input-number \r\n                          v-model=\"record.splitQty\" \r\n                          :min=\"0.0001\" \r\n                          :max=\"record.maxQty\" \r\n                          :precision=\"4\"\r\n                          style=\"width: 100%\"\r\n                          @change=\"onMaxQtyChange\"\r\n                        />\r\n                      </a-form-model-item>\r\n                    </span>\r\n                    <span slot=\"action\" slot-scope=\"text,record\">\r\n                      <a-space>\r\n                        <a-popconfirm\r\n                          title=\"确认删除?\"\r\n                          @confirm=\"deleteDetailRow(record, index)\"\r\n                        >\r\n                          <a>删除</a>\r\n                        </a-popconfirm>\r\n                      </a-space>\r\n                    </span>\r\n                </a-table>\r\n              </a-col>\r\n            </a-row>\r\n\r\n            <!-- 拆分原因 -->\r\n            <a-row :gutter=\"24\" class=\"mt-4\">\r\n              <a-col :span=\"8\">\r\n                <a-form-model-item label=\"拆分原因\" prop=\"splitReasonId\" :rules=\"[{required: true, message: '请选择拆分原因'}]\">\r\n                  <g-select\r\n                    v-model=\"entity.splitReasonId\"\r\n                  />\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"8\">\r\n                <a-form-model-item label=\" \">\r\n                  <a-checkbox v-model=\"entity.isClose\">数量为0时关闭批次</a-checkbox>\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 数据采集 -->\r\n        <g-collapse headerName=\"数据采集\" v-if=\"dataPoints.length\">\r\n          <template #content>\r\n            <g-data-points\r\n              :dataPoints=\"dataPoints\"\r\n              validDataName=\"dataPoints\"\r\n            />\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 工艺参数 -->\r\n        <g-collapse headerName=\"工艺参数\" v-if=\"ppcDataPoints.length\">\r\n          <template #content>\r\n            <g-data-points\r\n              :dataPoints=\"ppcDataPoints\"\r\n              validDataName=\"ppcDataPoints\"\r\n            />\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 操作描述 -->\r\n        <g-collapse headerName=\"操作描述\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"12\">\r\n                <a-form-model-item label=\"描述\">\r\n                  <a-textarea\r\n                    v-model=\"description\"\r\n                    :rows=\"4\"\r\n                    :maxLength=\"1000\"\r\n                    placeholder=\"请输入操作描述\"\r\n                  />\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n      </template>\r\n\r\n      <!-- 底部按钮 -->\r\n      <template #g-fixed-row>\r\n        <div class=\"g-fixed-row\">\r\n          <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh\" />\r\n          <g-btn \r\n            size=\"large\" \r\n            text=\"提交\" \r\n            type=\"primary\"\r\n            @callback=\"save\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </g-body-form-layout>\r\n  </a-form-model>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\nimport GSignModal from '@/components/g-sign-modal/g-sign-modal.vue';\r\nimport { createModal } from '@/utils';\r\n\r\nexport default defineComponent({\r\n  name: 'DataV2SplitQty',\r\n\r\n  data() {\r\n    return {\r\n      entity: {\r\n        containerName: '',\r\n        resourceId: '',\r\n        splitReasonId: '',\r\n        isClose: false,\r\n        dataPoints: [],\r\n        ppcDataPoints: []\r\n      },\r\n      \r\n      description: '',\r\n      dataPoints: [], // 数据采集点\r\n      ppcDataPoints: [], // 工艺参数点\r\n      \r\n      detailList: [], // 批次列表\r\n      containerInfo: {}, // 批次信息\r\n      maxQty: 0, // 最大可拆分数量\r\n\r\n      // 表格列配置\r\n      columns: [\r\n        {\r\n          title: '批次名称',\r\n          dataIndex: 'containerName',\r\n          key: 'containerName',\r\n          scopedSlots: { customRender: \"containerName\" },\r\n\r\n\r\n        },\r\n        {\r\n          title: '拆分数量',\r\n          dataIndex: 'splitQty',\r\n          key: 'splitQty',\r\n          scopedSlots: { customRender: \"splitQty\" },\r\n\r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action',\r\n          scopedSlots: { customRender: \"action\" },\r\n\r\n        }\r\n      ],\r\n\r\n      rules: {\r\n        splitReasonId: [\r\n          { required: true, message: '请选择拆分原因' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 批次搜索\r\n    onSearch(container) {\r\n      if(container) {\r\n        // 加载批次信息\r\n        this.loadContainerInfo(container);\r\n        this.containerInfo = container;\r\n        this.maxQty = container.qty || 0;\r\n        this.entity.containerName = container.containerName;\r\n        \r\n        // 加载数据采集点和工艺参数\r\n        this.dataPoints = container.dataPoints || [];\r\n        this.ppcDataPoints = container.ppcDataPoints || [];\r\n      }\r\n    },\r\n\r\n    // 添加批次\r\n    addDetailRow() {\r\n      this.detailList.push({\r\n        containerName: '',\r\n        splitQty: null,\r\n        maxQty: this.maxQty\r\n      });\r\n      this.onMaxQtyChange();\r\n    },\r\n\r\n    // 删除批次\r\n    deleteDetailRow(record, index) {\r\n      this.detailList.splice(index, 1);\r\n      this.onMaxQtyChange();\r\n    },\r\n\r\n    // 设备变更\r\n    resourceChange(resourceId) {\r\n      if(resourceId) {\r\n        // 加载工艺参数\r\n        this.loadProcessParameters(resourceId);\r\n      }\r\n    },\r\n\r\n    // 计算最大可拆分数量\r\n    onMaxQtyChange() {\r\n      if (this.detailList.length === 1) {\r\n        this.detailList[0].maxQty = this.maxQty;\r\n        return;\r\n      }\r\n      \r\n      let totalSplitQty = 0;\r\n      this.detailList.forEach(item => {\r\n        totalSplitQty += Number(item.splitQty || 0);\r\n      });\r\n      \r\n      this.detailList.forEach(item => {\r\n        item.maxQty = this.maxQty - (totalSplitQty - Number(item.splitQty || 0));\r\n      });\r\n    },\r\n\r\n    // 提交\r\n    save() {\r\n      this.$refs.form.validate().then(valid => {\r\n        if(valid) {\r\n          // 验证拆分数量总和是否超过原批次数量\r\n          let totalSplitQty = 0;\r\n          this.detailList.forEach(item => {\r\n            totalSplitQty += Number(item.splitQty || 0);\r\n          });\r\n          \r\n          if (totalSplitQty > this.maxQty) {\r\n            this.$message.error('拆分数量总和不能超过原批次数量');\r\n            return;\r\n          }\r\n          \r\n          // 显示签名弹窗\r\n          createModal({\r\n            title: '签名确认',\r\n            width: '600px'\r\n          }, {\r\n            component: GSignModal,\r\n            success: () => {\r\n              // 提交拆分\r\n              this.submitSplit();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    // 提交拆分\r\n    submitSplit() {\r\n      const submitData = {\r\n        containerName: this.entity.containerName,\r\n        resourceId: this.entity.resourceId,\r\n        splitReasonId: this.entity.splitReasonId,\r\n        isClose: this.entity.isClose,\r\n        dataPoints: this.entity.dataPoints,\r\n        ppcDataPoints: this.entity.ppcDataPoints,\r\n        description: this.description,\r\n        detailList: this.detailList\r\n      };\r\n      \r\n      // 这里调用API提交数据\r\n      console.log('提交拆分数据:', submitData);\r\n      \r\n      // 成功后提示并刷新\r\n      this.$message.success('批次拆分成功');\r\n      this.refresh();\r\n    },\r\n\r\n    // 刷新\r\n    refresh() {\r\n      this.entity = {\r\n        containerName: '',\r\n        resourceId: '',\r\n        splitReasonId: '',\r\n        isClose: false,\r\n        dataPoints: [],\r\n        ppcDataPoints: []\r\n      };\r\n      this.description = '';\r\n      this.dataPoints = [];\r\n      this.ppcDataPoints = [];\r\n      this.detailList = [];\r\n      this.containerInfo = {};\r\n      this.maxQty = 0;\r\n    },\r\n    \r\n    // 加载批次信息\r\n    loadContainerInfo(container) {\r\n      // 这里可以调用API获取批次详细信息\r\n      console.log('加载批次信息:', container);\r\n    },\r\n    \r\n    // 加载工艺参数\r\n    loadProcessParameters(resourceId) {\r\n      // 这里可以调用API获取工艺参数\r\n      console.log('加载工艺参数:', resourceId);\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.h-father {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.sflex {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  height: 100%;\r\n}\r\n.mt-4 {\r\n  margin-top: 16px;\r\n}\r\n.g-fixed-row {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./split-qty.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./split-qty.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./split-qty.vue?vue&type=template&id=4ae4dd08&scoped=true\"\nimport script from \"./split-qty.vue?vue&type=script&lang=js\"\nexport * from \"./split-qty.vue?vue&type=script&lang=js\"\nimport style0 from \"./split-qty.vue?vue&type=style&index=0&id=4ae4dd08&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ae4dd08\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","title","ref","attrs","lineWidth","lineColor","backgroundColor","saveFormat","on","handleSave","handleClear","handleError","save","$event","$emit","staticRenderFns","name","components","GSign","props","type","String","default","Number","validator","value","includes","data","signatureData","hasSignature","methods","imageData","message","$message","error","clearSignature","$refs","signBoard","clearCanvas","component","_setupProxy","entity","rules","scopedSlots","_u","key","fn","containerName","$set","onSearch","proxy","resourceChange","model","callback","$$v","expression","addDetailRow","detailList","columns","text","record","required","staticStyle","maxQty","onMaxQtyChange","deleteDetailRow","index","dataPoints","_e","ppcDataPoints","description","refresh","resourceId","splitReasonId","isClose","containerInfo","dataIndex","customRender","container","loadContainerInfo","qty","push","splitQty","splice","loadProcessParameters","length","totalSplitQty","forEach","item","form","validate","then","valid","width","success","submitSplit","submitData","console","log"],"sourceRoot":""}