"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[7589],{97589:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.loading}},[e("a-form-model",{ref:"form",attrs:{model:t.entity,rules:t.rules,autocomplete:"off",layout:"vertical"}},[e("div",{staticClass:"card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"workCenterCode",attrs:{label:"车间编码",prop:"workCenterCode"}},[e("a-input",{attrs:{placeholder:"请输入车间编码",name:"workCenterCode",disabled:!!t.ndoEditParams.row},on:{change:t.inChange},model:{value:t.entity.workCenterCode,callback:function(e){t.$set(t.entity,"workCenterCode",e)},expression:"entity.workCenterCode"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"name",attrs:{label:"车间名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入车间名称",name:"name"},on:{change:t.inChange},model:{value:t.entity.name,callback:function(e){t.$set(t.entity,"name",e)},expression:"entity.name"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"workCenterType",attrs:{label:"车间类型",prop:"workCenterType"}},[e("a-select",{attrs:{placeholder:"请选择车间类型",name:"workCenterType"},on:{change:t.inChange},model:{value:t.entity.workCenterType,callback:function(e){t.$set(t.entity,"workCenterType",e)},expression:"entity.workCenterType"}},[e("a-select-option",{attrs:{value:"机加工车间"}},[t._v("机加工车间")]),e("a-select-option",{attrs:{value:"装配车间"}},[t._v("装配车间")]),e("a-select-option",{attrs:{value:"热处理车间"}},[t._v("热处理车间")]),e("a-select-option",{attrs:{value:"表面处理车间"}},[t._v("表面处理车间")]),e("a-select-option",{attrs:{value:"包装车间"}},[t._v("包装车间")]),e("a-select-option",{attrs:{value:"仓储车间"}},[t._v("仓储车间")])],1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"factoryId",attrs:{label:"所属工厂",prop:"factoryId"}},[e("a-select",{attrs:{placeholder:"请选择所属工厂",name:"factoryId"},on:{change:t.handleFactoryChange},model:{value:t.entity.factoryId,callback:function(e){t.$set(t.entity,"factoryId",e)},expression:"entity.factoryId"}},[e("a-select-option",{attrs:{value:"1"}},[t._v("生产工厂1")]),e("a-select-option",{attrs:{value:"2"}},[t._v("组装工厂2")]),e("a-select-option",{attrs:{value:"3"}},[t._v("加工工厂3")]),e("a-select-option",{attrs:{value:"4"}},[t._v("储存中心4")]),e("a-select-option",{attrs:{value:"5"}},[t._v("物流中心5")])],1)],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"capacity",attrs:{label:"日产能",prop:"capacity"}},[e("a-input",{attrs:{placeholder:"请输入日产能",name:"capacity"},on:{change:t.inChange},model:{value:t.entity.capacity,callback:function(e){t.$set(t.entity,"capacity",e)},expression:"entity.capacity"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"foundDate",attrs:{label:"建立时间",prop:"foundDate"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{name:"foundDate"},on:{change:t.inChange},model:{value:t.entity.foundDate,callback:function(e){t.$set(t.entity,"foundDate",e)},expression:"entity.foundDate"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"area",attrs:{label:"车间面积",prop:"area"}},[e("a-input",{attrs:{placeholder:"请输入车间面积",name:"area"},on:{change:t.inChange},model:{value:t.entity.area,callback:function(e){t.$set(t.entity,"area",e)},expression:"entity.area"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"staffCount",attrs:{label:"人员数量",prop:"staffCount"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:1e3,name:"staffCount"},on:{change:t.inChange},model:{value:t.entity.staffCount,callback:function(e){t.$set(t.entity,"staffCount",e)},expression:"entity.staffCount"}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"status",attrs:{label:"运行状态",prop:"status"}},[e("a-select",{attrs:{placeholder:"请选择运行状态",name:"status"},on:{change:t.inChange},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-select-option",{attrs:{value:"运行中"}},[t._v("运行中")]),e("a-select-option",{attrs:{value:"维护中"}},[t._v("维护中")]),e("a-select-option",{attrs:{value:"停产"}},[t._v("停产")]),e("a-select-option",{attrs:{value:"调试中"}},[t._v("调试中")])],1)],1)],1),e("a-col",{attrs:{sm:18}},[e("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[e("a-textarea",{attrs:{placeholder:"请输入描述信息",rows:4,"max-length":1e3,name:"description"},on:{change:t.inChange},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1)],1)],1)],1),e("g-collapse",{attrs:{headerName:"设备信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"mb-4"},[e("a-button",{attrs:{type:"primary"},on:{click:t.addEquipment}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加设备 ")],1)],1),e("a-table",{attrs:{columns:t.equipmentColumns,"data-source":t.entity.equipmentList,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function({record:a}){return[e("a-space",[e("a",{on:{click:function(e){return t.editEquipment(a)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"确定要删除该设备吗？"},on:{confirm:function(e){return t.deleteEquipment(a)}}},[e("a",[t._v("删除")])])],1)]}}])})]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"人员信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"mb-4"},[e("a-button",{attrs:{type:"primary"},on:{click:t.addStaff}},[e("a-icon",{attrs:{type:"plus"}}),t._v("添加人员 ")],1)],1),e("a-table",{attrs:{columns:t.staffColumns,"data-source":t.entity.staffList,pagination:!1,rowKey:"id"},scopedSlots:t._u([{key:"action",fn:function({record:a}){return[e("a-space",[e("a",{on:{click:function(e){return t.editStaff(a)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a-popconfirm",{attrs:{title:"确定要删除该人员吗？"},on:{confirm:function(e){return t.deleteStaff(a)}}},[e("a",[t._v("删除")])])],1)]}}])})]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"元数据信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建人"}},[e("span",[t._v(t._s(t.entity.createdBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建时间"}},[e("span",[t._v(t._s(t.entity.createdTime||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改人"}},[e("span",[t._v(t._s(t.entity.modifiedBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改时间"}},[e("span",[t._v(t._s(t.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],r=a(36026),s={name:"CreateOrEditWorkCenter",mixins:[r.GE],data(){return{entity:{workCenterCode:"",name:"",workCenterType:"",factoryId:"",factoryName:"",capacity:"",foundDate:"",area:"",staffCount:1,status:"",description:"",equipmentList:[],staffList:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},loading:!1,rules:{workCenterCode:[{required:!0,message:"请输入车间编码",trigger:"blur"},{pattern:/^WC\d{4}$/,message:"车间编码必须为WC+4位数字",trigger:"blur"}],name:[{required:!0,message:"请输入车间名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],workCenterType:[{required:!0,message:"请选择车间类型",trigger:"change"}],factoryId:[{required:!0,message:"请选择所属工厂",trigger:"change"}],capacity:[{required:!0,message:"请输入日产能",trigger:"blur"},{pattern:/^\d+件\/天$/,message:"格式必须为数字+件/天",trigger:"blur"}],foundDate:[{required:!0,message:"请选择建立时间",trigger:"change"}],area:[{required:!0,message:"请输入车间面积",trigger:"blur"},{pattern:/^\d+平方米$/,message:"格式必须为数字+平方米",trigger:"blur"}],staffCount:[{required:!0,message:"请输入人员数量",trigger:"change"},{type:"number",min:1,message:"人员数量必须大于0",trigger:"change"}],status:[{required:!0,message:"请选择运行状态",trigger:"change"}]},equipmentColumns:[{title:"序号",dataIndex:"index",width:60,customRender:(t,e,a)=>a+1},{title:"设备编码",dataIndex:"equipmentCode",width:120},{title:"设备名称",dataIndex:"equipmentName",width:150},{title:"设备类型",dataIndex:"equipmentType",width:120},{title:"设备状态",dataIndex:"equipmentStatus",width:100},{title:"操作",dataIndex:"action",width:150,scopedSlots:{customRender:"action"}}],staffColumns:[{title:"序号",dataIndex:"index",width:60,customRender:(t,e,a)=>a+1},{title:"工号",dataIndex:"employeeId",width:100},{title:"姓名",dataIndex:"name",width:100},{title:"岗位",dataIndex:"position",width:120},{title:"技能等级",dataIndex:"skillLevel",width:100},{title:"操作",dataIndex:"action",width:150,scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.loading=!1,this.entity={workCenterCode:"WC0001",name:"机加工车间1",workCenterType:"机加工车间",factoryId:"1",factoryName:"生产工厂1",capacity:"1000件/天",foundDate:"2024-01-01",area:"500平方米",staffCount:30,status:"运行中",description:"用于机械加工的车间，配备数控机床等设备",equipmentList:[{id:1,equipmentCode:"EQ001",equipmentName:"数控车床",equipmentType:"加工设备",equipmentStatus:"运行中"}],staffList:[{id:1,employeeId:"EMP001",name:"张三",position:"操作工",skillLevel:"高级"}],createdBy:"admin",createdTime:"2024-03-19 10:00",modifiedBy:"admin",modifiedTime:"2024-03-19 15:00"}}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={workCenterCode:"",name:"",workCenterType:"",factoryId:"",factoryName:"",capacity:"",foundDate:"",area:"",staffCount:1,status:"",description:"",equipmentList:[],staffList:[],createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},async save(){let t=await this.checkError();t&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(t){console.log(t.target.value)},handleFactoryChange(t){const e={1:"生产工厂1",2:"组装工厂2",3:"加工工厂3",4:"储存中心4",5:"物流中心5"};this.entity.factoryName=e[t]},addEquipment(){this.entity.equipmentList.push({id:this.entity.equipmentList.length+1,equipmentCode:`EQ${String(this.entity.equipmentList.length+1).padStart(3,"0")}`,equipmentName:"",equipmentType:"",equipmentStatus:"运行中"})},editEquipment(t){console.log("编辑设备",t)},deleteEquipment(t){const e=this.entity.equipmentList.findIndex((e=>e.id===t.id));e>-1&&this.entity.equipmentList.splice(e,1)},addStaff(){this.entity.staffList.push({id:this.entity.staffList.length+1,employeeId:`EMP${String(this.entity.staffList.length+1).padStart(3,"0")}`,name:"",position:"",skillLevel:"初级"})},editStaff(t){console.log("编辑人员",t)},deleteStaff(t){const e=this.entity.staffList.findIndex((e=>e.id===t.id));e>-1&&this.entity.staffList.splice(e,1)}}},o=s,l=a(1001),d=(0,l.Z)(o,n,i,!1,null,"3878511d",null),c=d.exports}}]);
//# sourceMappingURL=7589.9e32d8d3.js.map