"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[7607],{8910:function(e,t,a){a.d(t,{Z:function(){return m}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"sign-container"},[t("h3",{staticClass:"sign-title"},[e._v(e._s(e.title||"请在下方区域签名"))]),t("g-sign",{ref:"signBoard",attrs:{"line-width":e.lineWidth,"line-color":e.lineColor,"background-color":e.backgroundColor,"save-format":e.saveFormat},on:{save:e.handleSave,clear:e.handleClear,"save-error":e.handleError}})],1)]),t("div",{staticClass:"modal-footer"},[t("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:e.save}}),t("g-btn",{attrs:{text:"取消"},on:{callback:function(t){return e.$emit("closeModal")}}})],1)])},s=[],r=a(60704),i={name:"GSignModal",components:{GSign:r.Z},props:{title:{type:String,default:""},lineWidth:{type:Number,default:2},lineColor:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#ffffff"},saveFormat:{type:String,default:"png",validator:e=>["png","jpeg","webp"].includes(e)}},data(){return{signatureData:null,hasSignature:!1}},methods:{handleSave(e){this.signatureData=e,this.hasSignature=!0},handleClear(){this.signatureData=null,this.hasSignature=!1},handleError(e){this.$message.error(e)},save(){this.hasSignature?(this.$emit("success",this.signatureData),this.$emit("closeModal")):this.$message.error("请先进行签名")},clearSignature(){this.$refs.signBoard&&this.$refs.signBoard.clearCanvas()}}},l=i,o=a(1001),c=(0,o.Z)(l,n,s,!1,null,"e39a081c",null),m=c.exports},67607:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=function(){var e=this,t=e._self._c;return t("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:e.entity,layout:"vertical",autocomplete:"off",rules:e.rules}},[t("g-body-form-layout",{scopedSlots:e._u([{key:"search-card",fn:function(){return[t("div",{staticClass:"search-card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:4}},[t("a-form-model-item",{attrs:{label:"设备组",prop:"deviceName"}},[t("g-select",{attrs:{placeholder:"请选择设备组"},model:{value:e.entity.deviceName,callback:function(t){e.$set(e.entity,"deviceName",t)},expression:"entity.deviceName"}})],1)],1),t("a-col",{attrs:{span:4}},[t("a-form-model-item",{attrs:{label:"设备",prop:"deviceName"}},[t("g-select",{attrs:{placeholder:"请选择设备"},model:{value:e.entity.deviceName,callback:function(t){e.$set(e.entity,"deviceName",t)},expression:"entity.deviceName"}})],1)],1),t("a-col",{attrs:{span:4}}),t("a-col",{attrs:{span:4}}),t("a-col",{attrs:{span:4}}),t("a-col",{attrs:{span:4}},[t("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center",height:"100%"}},[t("g-btn-group",{attrs:{buttonLists:e.btnList},on:{btnCallback:function(t){return e.btnCallback(t)}}})],1)])],1)],1)]},proxy:!0},{key:"expand-card",fn:function(){return[t("div",{staticClass:"expand-card"},[t("g-collapse",{attrs:{headerName:"保养计划"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:6}},[t("a-form-model-item",{attrs:{label:"保养周期",prop:"maintenanceCycle"}},[t("a-select",{attrs:{placeholder:"请选择保养周期"},model:{value:e.entity.maintenanceCycle,callback:function(t){e.$set(e.entity,"maintenanceCycle",t)},expression:"entity.maintenanceCycle"}},[t("a-select-option",{attrs:{value:"每周"}},[e._v("每周")]),t("a-select-option",{attrs:{value:"每月"}},[e._v("每月")]),t("a-select-option",{attrs:{value:"每季度"}},[e._v("每季度")]),t("a-select-option",{attrs:{value:"每年"}},[e._v("每年")])],1)],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-model-item",{attrs:{label:"上次保养时间",prop:"lastMaintenanceTime"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.entity.lastMaintenanceTime,callback:function(t){e.$set(e.entity,"lastMaintenanceTime",t)},expression:"entity.lastMaintenanceTime"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-model-item",{attrs:{label:"下次保养时间",prop:"nextMaintenanceTime"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.entity.nextMaintenanceTime,callback:function(t){e.$set(e.entity,"nextMaintenanceTime",t)},expression:"entity.nextMaintenanceTime"}})],1)],1),t("a-col",{attrs:{span:6}},[t("a-form-model-item",{attrs:{label:"负责人",prop:"responsiblePerson"}},[t("g-select",{attrs:{placeholder:"请选择负责人"},model:{value:e.entity.responsiblePerson,callback:function(t){e.$set(e.entity,"responsiblePerson",t)},expression:"entity.responsiblePerson"}})],1)],1)],1)]},proxy:!0}])})],1)]},proxy:!0},{key:"card-body",fn:function(){return[t("g-collapse",{attrs:{headerName:"保养内容"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-form-model-item",{attrs:{label:"保养项目",prop:"maintenanceItems"}},[t("a-checkbox-group",{model:{value:e.entity.maintenanceItems,callback:function(t){e.$set(e.entity,"maintenanceItems",t)},expression:"entity.maintenanceItems"}},[t("a-row",[t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"清洁"}},[e._v("清洁")])],1),t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"润滑"}},[e._v("润滑")])],1),t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"紧固"}},[e._v("紧固")])],1),t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"检查"}},[e._v("检查")])],1),t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"更换"}},[e._v("更换")])],1),t("a-col",{attrs:{span:8}},[t("a-checkbox",{attrs:{value:"校准"}},[e._v("校准")])],1)],1)],1)],1),t("a-form-model-item",{attrs:{label:"详细说明",prop:"maintenanceDescription"}},[t("a-textarea",{attrs:{placeholder:"请输入详细的保养内容和步骤",rows:4},model:{value:e.entity.maintenanceDescription,callback:function(t){e.$set(e.entity,"maintenanceDescription",t)},expression:"entity.maintenanceDescription"}})],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"保养记录"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-table",{attrs:{columns:e.maintenanceRecordColumns,dataSource:e.entity.maintenanceRecords}})]},proxy:!0}])})]},proxy:!0},{key:"g-fixed-row",fn:function(){return[t("div",{staticClass:"g-fixed-row"},[t("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:function(t){return e.refresh()}}}),t("g-btn",{attrs:{size:"large",text:"提交",type:"primary"},on:{callback:function(t){return e.submitMaintenance()}}})],1)]},proxy:!0}])})],1)},s=[],r=a(8910),i=a(36026),l=a(58805),o=a(30381),c=a.n(o),m={name:"EquipmentMaintenance",data(){return{entity:{deviceName:"",maintenanceCycle:"每月",lastMaintenanceTime:null,nextMaintenanceTime:null,responsiblePerson:"",maintenanceItems:["清洁","检查"],maintenanceDescription:"",maintenanceRecords:[]},rules:{deviceName:[{required:!0,message:"请选择设备",trigger:"change"}],maintenanceCycle:[{required:!0,message:"请选择保养周期",trigger:"change"}],responsiblePerson:[{required:!0,message:"请选择负责人",trigger:"change"}]},btnList:[{icon:l.Z.icon.documentShow,text:l.Z.button.documentShow,eventName:l.Z.button.documentShow,display:!0}],maintenanceRecordColumns:[{title:"保养时间",dataIndex:"time",key:"time",customRender:e=>e?c()(e).format("YYYY-MM-DD HH:mm:ss"):""},{title:"保养人员",dataIndex:"personnel",key:"personnel"},{title:"保养内容",dataIndex:"content",key:"content"},{title:"保养结果",dataIndex:"result",key:"result"},{title:"备注",dataIndex:"remark",key:"remark"}]}},mounted(){this.entity.maintenanceRecords=[{time:c()().subtract(7,"days"),personnel:"张三",content:"清洁、润滑",result:"正常",remark:""},{time:c()().subtract(35,"days"),personnel:"李四",content:"清洁、检查、更换",result:"正常",remark:"更换了滤芯"}]},methods:{submitMaintenance(){this.$refs.form.validate().then((e=>{e&&this.createSignModal()}))},createSignModal(){(0,i.f7)({title:"签名",width:"600px"},{component:r.Z,success:e=>{console.log(e),this.$message.success("保养任务提交成功"),this.refresh()}})},refresh(){this.$refs.form.resetFields(),this.entity.maintenanceCycle="每月",this.entity.maintenanceItems=["清洁","检查"]}}},d=m,u=a(1001),p=(0,u.Z)(d,n,s,!1,null,"7293d9b0",null),f=p.exports}}]);
//# sourceMappingURL=7607.be394a69.js.map