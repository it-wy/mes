"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[6590,6567],{99319:function(t,e,i){i.d(e,{Z:function(){return c}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:t.rules,model:t.copyForm}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:t.copyForm.value,callback:function(e){t.$set(t.copyForm,"value",e)},expression:"copyForm.value"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:t.copyForm.copyValue,callback:function(e){t.$set(t.copyForm,"copyValue",e)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),e("div",{staticClass:"modal-footer"},[e("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.save}}),e("g-btn",{attrs:{text:"取消"},on:{callback:function(e){return t.$emit("closeModal")}}})],1)])},a=[],s=(i(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((t=>{t&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),n=s,l=i(1001),r=(0,l.Z)(n,o,a,!1,null,"04e98444",null),c=r.exports},52239:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("g-body-layout",{attrs:{pageIndex:t.pageNumber,pageSize:t.pageSize,total:t.total,filterText:t.filterText},on:{"update:filterText":function(e){t.filterText=e},"update:filter-text":function(e){t.filterText=e},pageIndexChange:t.pageIndexChange,pageSizeChange:t.pageSizeChange,suffixSearchCallback:t.onFilterReady},scopedSlots:t._u([{key:"btnGroup",fn:function(){return[e("g-btn-group",{attrs:{buttonLists:t.btnList},on:{btnCallBack:t.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[e("g-ndo-table",{attrs:{id:t.id,handName:"数据采集",dataList:t.dataList,isTableLoading:t.loading,total:t.total},on:{rowClick:t.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[t.isShowEdit?e("create-or-edit-data-collection",{attrs:{ndoEditParams:t.ndoEditParams,refreshTag:t.refreshTag,saveTag:t.saveTag,resetTag:t.resetTag},on:{childRefresh:function(e){return t.childRefresh(e)},rowClick:function(e){return t.rowClick(e)}}}):e("g-empty")]},proxy:!0}])})},a=[],s=i(74802),n=i(99319),l=i(36026),r={name:"DataCollection",mixins:[l.He],components:{CreateOrEditDataCollection:s["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:n.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:t=>{console.log(t),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(t.value,t.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该数据采集配置吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(t){this.loading=!0,setTimeout((()=>{t.finishedCallback();let e=[];const i=["设备数据采集","生产过程采集","质量检测采集","工艺参数采集","环境数据采集"],o=["传感器","PLC","仪表","摄像头","控制器"],a=["Modbus","OPC UA","MQTT","HTTP","TCP/IP"],s=["已启用","已禁用","配置中","异常"];for(let t=0;t<25;t++){const n=t%5,l=t%5,r=t%5,c=t%4,p=[1,5,10,30,60],d=t%5,u=p[d],h=new Date,f=new Date(h.getTime()-1e4*t),m=`${f.getFullYear()}-${(f.getMonth()+1).toString().padStart(2,"0")}-${f.getDate().toString().padStart(2,"0")} ${f.getHours().toString().padStart(2,"0")}:${f.getMinutes().toString().padStart(2,"0")}:${f.getSeconds().toString().padStart(2,"0")}`;e[t]={id:t+1,collectionCode:`DC${String(t+1).padStart(4,"0")}`,name:`${i[n]}${t%9+1}`,collectionType:i[n],deviceType:o[l],protocol:a[r],frequency:`${u}秒/次`,ipAddress:`192.168.${t%255}.${2*t%255}`,port:5e3+10*t%5e3,dataPoints:3+t%10,lastCollectTime:m,description:`${i[n]}，使用${a[r]}协议，从${o[l]}采集数据`,status:s[c],createdBy:"admin",createdTime:"2024-03-19 "+(10+t%10)+":"+t%60,modifiedBy:"admin",modifiedTime:"2024-03-"+(20+t%8)+" "+(13+t%10)+":"+t%60}}this.filterText&&(e=e.filter((t=>t.collectionCode.indexOf(this.filterText)>-1||t.name.indexOf(this.filterText)>-1||t.collectionType.indexOf(this.filterText)>-1||t.deviceType.indexOf(this.filterText)>-1||t.protocol.indexOf(this.filterText)>-1||t.ipAddress.indexOf(this.filterText)>-1||t.description.indexOf(this.filterText)>-1))),t.successCallback({items:e,totalCount:2*e.length})}),1e3)}}},c=r,p=i(1001),d=(0,p.Z)(c,o,a,!1,null,"34ae3e96",null),u=d.exports}}]);
//# sourceMappingURL=6590.c8a049c3.js.map