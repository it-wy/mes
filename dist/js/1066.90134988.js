"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1066],{31066:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var a=function(){var t=this,e=t._self._c;return e("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:t.entity,layout:"vertical",autocomplete:"off"}},[e("g-body-form-layout",{scopedSlots:t._u([{key:"search-card",fn:function(){return[e("div",{staticClass:"search-card"},[e("g-container-list",{on:{change:t.onSearch},model:{value:t.entity.mainContainer,callback:function(e){t.$set(t.entity,"mainContainer",e)},expression:"entity.mainContainer"}})],1)]},proxy:!0},{key:"expand-card",fn:function(){return[e("div",{staticClass:"expand-card"},[e("g-collapse",{attrs:{headerName:"批次信息"},scopedSlots:t._u([{key:"content",fn:function(){return[t._v(" "+t._s(t.entity)+" ")]},proxy:!0}])})],1)]},proxy:!0},{key:"card-body",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("g-collapse",{attrs:{headerName:"待关联批次"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入批次号快速添加"},on:{pressEnter:t.addByContainer},model:{value:t.searchContainer,callback:function(e){t.searchContainer=e},expression:"searchContainer"}}),e("a-table",{attrs:{columns:t.pendingColumns,"data-source":t.pendingContainers,"row-key":t=>t.containerName,"row-selection":{selectedRowKeys:t.setOfCheckedId,onChange:t.onSelectChange},pagination:!1,bordered:"",size:"small"}})]},proxy:!0}])})],1),e("a-col",{attrs:{span:12}},[e("g-collapse",{attrs:{headerName:"已关联批次"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-table",{attrs:{columns:t.relatedColumns,"data-source":t.relatedContainers,pagination:!1,bordered:"",size:"small"}})]},proxy:!0}])})],1)],1)]},proxy:!0},{key:"g-fixed-row",fn:function(){return[e("div",{staticClass:"g-fixed-row"},[e("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:t.refresh}}),e("g-btn",{attrs:{size:"large",text:"关联",type:"primary"},on:{callback:t.relation}})],1)]},proxy:!0}])})],1)},s=[],r={name:"DataV2ContainerRelation",data(){return{entity:{mainContainer:""},pendingContainers:[],relatedContainers:[],setOfCheckedId:[],searchContainer:"",pendingColumns:[{title:"批次号",dataIndex:"containerName"},{title:"状态",dataIndex:"status"}],relatedColumns:[{title:"批次号",dataIndex:"containerName"},{title:"状态",dataIndex:"status"}]}},mounted(){},methods:{onSearch(t){this.entity.mainContainer=t,this.setOfCheckedId=[],this.searchContainer="",this.pendingContainers=[],this.relatedContainers=[],t&&this.getRelationContainer(t)},async getRelationContainer(t){const e={output:{containerList:[{containerName:"A001",status:"已入库"},{containerName:"A002",status:"已入库"},{containerName:"A003",status:"已入库"}],relationContainerList:[{containerName:"B001",status:"已入库"},{containerName:"B002",status:"已入库"}]}};e&&e.output&&(this.pendingContainers=e.output.containerList||[],this.relatedContainers=e.output.relationContainerList||[])},onSelectChange(t){this.setOfCheckedId=t},addByContainer(){const t=this.pendingContainers.find((t=>t.containerName===this.searchContainer.trim()));t?(this.setOfCheckedId.includes(t.containerName)||this.setOfCheckedId.push(t.containerName),this.searchContainer=""):this.$message.warning("该批次不在待关联列表中")},relation(){this.entity.mainContainer?0!==this.setOfCheckedId.length?(this.$message.success("关联成功"),this.refresh()):this.$message.warning("请选择要关联的批次"):this.$message.warning("请选择主批次")},refresh(){this.onSearch(this.entity.mainContainer)}}},i=r,o=n(1001),c=(0,o.Z)(i,a,s,!1,null,"c9ba66e8",null),l=c.exports}}]);
//# sourceMappingURL=1066.90134988.js.map