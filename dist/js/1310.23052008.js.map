{"version":3,"file":"js/1310.23052008.js","mappings":"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","sources":["webpack://data-v2/./src/views/resource-operation-manager/recurring-date-requirement-active/recurring-date-requirement-active.vue?1359","webpack://data-v2/src/views/resource-operation-manager/recurring-date-requirement-active/recurring-date-requirement-active.vue","webpack://data-v2/./src/views/resource-operation-manager/recurring-date-requirement-active/recurring-date-requirement-active.vue?2da7","webpack://data-v2/./src/views/resource-operation-manager/recurring-date-requirement-active/recurring-date-requirement-active.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\"}},[_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"计划名称\",\"prop\":\"planName\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入计划名称\"},model:{value:(_vm.entity.planName),callback:function ($$v) {_vm.$set(_vm.entity, \"planName\", $$v)},expression:\"entity.planName\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"设备名称\",\"prop\":\"deviceName\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入设备名称\"},model:{value:(_vm.entity.deviceName),callback:function ($$v) {_vm.$set(_vm.entity, \"deviceName\", $$v)},expression:\"entity.deviceName\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择状态\"},model:{value:(_vm.entity.status),callback:function ($$v) {_vm.$set(_vm.entity, \"status\", $$v)},expression:\"entity.status\"}},[_c('a-select-option',{attrs:{\"value\":\"待激活\"}},[_vm._v(\"待激活\")]),_c('a-select-option',{attrs:{\"value\":\"已激活\"}},[_vm._v(\"已激活\")])],1)],1)],1)],1)],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('a-table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.planList,\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"operation\",fn:function({ record }){return [_c('a-button',{attrs:{\"type\":\"primary\",\"disabled\":record.status !== '待激活'},on:{\"click\":function($event){return _vm.activatePlan(record)}}},[_vm._v(\"激活\")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.viewPlanDetail(record)}}},[_vm._v(\"查看详情\")])]}}])})]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":function($event){return _vm.refresh()}}}),_c('g-btn',{attrs:{\"type\":\"primary\",\"text\":\"激活\"},on:{\"callback\":_vm.handleConfirmActivate}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <a-form-model\r\n      ref=\"form\"\r\n      :model=\"entity\"\r\n      layout=\"vertical\"\r\n      autocomplete=\"off\"\r\n      class=\"h-father\"\r\n    >\r\n      <g-body-form-layout>\r\n        <!-- 搜索插槽 -->\r\n        <template #search-card>\r\n          <div class=\"search-card\">\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"6\">\r\n                <a-form-model-item label=\"计划名称\" prop=\"planName\">\r\n                  <a-input v-model=\"entity.planName\" placeholder=\"请输入计划名称\" />\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"6\">\r\n                <a-form-model-item label=\"设备名称\" prop=\"deviceName\">\r\n                  <a-input v-model=\"entity.deviceName\" placeholder=\"请输入设备名称\" />\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"6\">\r\n                <a-form-model-item label=\"状态\" prop=\"status\">\r\n                  <a-select v-model=\"entity.status\" placeholder=\"请选择状态\">\r\n                    <a-select-option value=\"待激活\">待激活</a-select-option>\r\n                    <a-select-option value=\"已激活\">已激活</a-select-option>\r\n                    <!-- 其他状态 -->\r\n                  </a-select>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              \r\n            </a-row>\r\n          </div>\r\n        </template>\r\n  \r\n    \r\n  \r\n        <!-- 表格 -->\r\n        <template #card-body>\r\n          <a-table\r\n            :columns=\"columns\"\r\n            :data=\"planList\"\r\n            :loading=\"loading\"\r\n            :pagination=\"pagination\"\r\n            @change=\"handleTableChange\"\r\n          >\r\n            <template #operation=\"{ record }\">\r\n              <a-button type=\"primary\" @click=\"activatePlan(record)\" :disabled=\"record.status !== '待激活'\">激活</a-button>\r\n              <a-button type=\"link\" @click=\"viewPlanDetail(record)\">查看详情</a-button>\r\n            </template>\r\n          </a-table>\r\n        </template>\r\n  \r\n        <!-- 固定底栏 -->\r\n        <template #g-fixed-row>\r\n          <div class=\"g-fixed-row\">\r\n            <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh()\"></g-btn>\r\n            <!-- 激活按钮 -->\r\n            <g-btn type=\"primary\" text=\"激活\" @callback=\"handleConfirmActivate\"></g-btn>\r\n          </div>\r\n        </template>\r\n      </g-body-form-layout>\r\n  \r\n      \r\n    </a-form-model>\r\n  </template>\r\n  \r\n  <script>\r\n  import AppConst from '@/utils/appConst';\r\n  \r\n  export default {\r\n    name: 'MaintenancePlanActivation',\r\n    data() {\r\n      return {\r\n        entity: {\r\n          planName: '',\r\n          deviceName: '',\r\n          status: '待激活', // 默认只查询待激活的\r\n        },\r\n        columns: [\r\n          { title: '计划名称', dataIndex: 'planName' },\r\n          { title: '关联设备', dataIndex: 'deviceName' },\r\n          { title: '状态', dataIndex: 'status', customRender: (text) => this.formatStatus(text) },\r\n          { title: '创建时间', dataIndex: 'createTime' },\r\n          { title: '操作', dataIndex: 'operation', scopedSlots: { customRender: 'operation' } },\r\n        ],\r\n        planList: [],\r\n        loading: false,\r\n        pagination: {\r\n          current: 1,\r\n          pageSize: 10,\r\n          total: 0,\r\n        },\r\n        selectedPlan: {},\r\n        btnList: [\r\n            {\r\n              icon: AppConst.icon.search,\r\n              text: '搜索',\r\n              eventName: 'search',\r\n              type: 'primary',\r\n              display: true\r\n            }\r\n          ],\r\n      };\r\n    },\r\n    created() {\r\n      this.fetchPlanList();\r\n    },\r\n    methods: {\r\n      // 获取保养计划列表\r\n      fetchPlanList() {\r\n        // this.loading = true;\r\n        // getMaintenancePlanList({\r\n        //   planName: this.entity.planName,\r\n        //   deviceName: this.entity.deviceName,\r\n        //   status: this.entity.status,\r\n        //   page: this.pagination.current,\r\n        //   pageSize: this.pagination.pageSize,\r\n        // })\r\n        //   .then(response => {\r\n        //     this.planList = response.data.list;\r\n        //     this.pagination.total = response.data.total;\r\n        //   })\r\n        //   .catch(error => {\r\n        //     this.$message.error('获取保养计划列表失败：' + error.message);\r\n        //   })\r\n        //   .finally(() => {\r\n        //     this.loading = false;\r\n        //   });\r\n      },\r\n      // 表格分页、排序等变化\r\n      handleTableChange(pagination) {\r\n        this.pagination.current = pagination.current;\r\n        this.pagination.pageSize = pagination.pageSize;\r\n        this.fetchPlanList();\r\n      },\r\n      // 激活保养计划\r\n      activatePlan(record) {\r\n        this.selectedPlan = record;\r\n      },\r\n      // 确认激活\r\n      handleConfirmActivate() {\r\n        activateMaintenancePlan(this.selectedPlan.id)\r\n          .then(response => {\r\n            this.$message.success('保养计划激活成功');\r\n            this.fetchPlanList(); // 刷新列表\r\n          })\r\n          .catch(error => {\r\n            this.$message.error('保养计划激活失败：' + error.message);\r\n          });\r\n      },\r\n      // 查看保养计划详情\r\n      viewPlanDetail(record) {\r\n        // 跳转到保养计划详情页面，这里需要根据实际路由进行修改\r\n        this.$router.push({ path: `/maintenance-management/plan-detail/${record.id}` });\r\n      },\r\n       //格式化状态\r\n      formatStatus(status) {\r\n        const statusMap = {\r\n          '待激活': '待激活',\r\n          '已激活': '已激活',\r\n          '已过期': '已过期',\r\n          '已终止': '已终止',\r\n        };\r\n        return statusMap[status] || status;\r\n      },\r\n      // 刷新\r\n      refresh() {\r\n        this.entity.planName = '';\r\n        this.entity.deviceName = '';\r\n        this.entity.status = '待激活';\r\n        this.pagination.current = 1;\r\n        this.fetchPlanList();\r\n      },\r\n      // 搜索按钮回调\r\n      btnCallback(e) {\r\n        if(e === 'search'){\r\n          this.pagination.current = 1;\r\n          this.fetchPlanList();\r\n        }\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .maintenance-plan-activation {\r\n    padding: 20px;\r\n  }\r\n  </style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./recurring-date-requirement-active.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./recurring-date-requirement-active.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./recurring-date-requirement-active.vue?vue&type=template&id=29749467&scoped=true\"\nimport script from \"./recurring-date-requirement-active.vue?vue&type=script&lang=js\"\nexport * from \"./recurring-date-requirement-active.vue?vue&type=script&lang=js\"\nimport style0 from \"./recurring-date-requirement-active.vue?vue&type=style&index=0&id=29749467&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29749467\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticClass","attrs","entity","scopedSlots","_u","key","fn","model","value","callback","$$v","$set","expression","_v","proxy","columns","planList","loading","pagination","on","handleTableChange","record","status","$event","activatePlan","viewPlanDetail","refresh","handleConfirmActivate","staticRenderFns","name","data","planName","deviceName","title","dataIndex","customRender","text","formatStatus","current","pageSize","total","selectedPlan","btnList","icon","search","eventName","type","display","created","fetchPlanList","methods","activateMaintenancePlan","id","then","response","$message","success","catch","error","message","$router","push","path","statusMap","btnCallback","e","component"],"sourceRoot":""}