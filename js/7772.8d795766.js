"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[7772,3946],{99319:function(t,e,a){a.d(e,{Z:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:t.rules,model:t.copyForm}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:t.copyForm.value,callback:function(e){t.$set(t.copyForm,"value",e)},expression:"copyForm.value"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:t.copyForm.copyValue,callback:function(e){t.$set(t.copyForm,"copyValue",e)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),e("div",{staticClass:"modal-footer"},[e("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.save}}),e("g-btn",{attrs:{text:"取消"},on:{callback:function(e){return t.$emit("closeModal")}}})],1)])},r=[],s=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((t=>{t&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),o=s,n=a(1001),l=(0,n.Z)(o,i,r,!1,null,"04e98444",null),m=l.exports},63946:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.loading}},[e("a-form-model",{ref:"form",attrs:{model:t.entity,rules:t.rules,autocomplete:"off",layout:"vertical"}},[e("div",{staticClass:"card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"typeCode",attrs:{label:"类型编码",prop:"typeCode"}},[e("a-input",{attrs:{placeholder:"请输入类型编码，格式为T开头加4位数字",name:"typeCode",disabled:!!t.ndoEditParams.row},on:{change:t.inChange},model:{value:t.entity.typeCode,callback:function(e){t.$set(t.entity,"typeCode",e)},expression:"entity.typeCode"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"name",attrs:{label:"类型名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入类型名称",name:"name"},on:{change:t.inChange},model:{value:t.entity.name,callback:function(e){t.$set(t.entity,"name",e)},expression:"entity.name"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"category",attrs:{label:"产品分类",prop:"category"}},[e("a-select",{attrs:{placeholder:"请选择产品分类",name:"category"},model:{value:t.entity.category,callback:function(e){t.$set(t.entity,"category",e)},expression:"entity.category"}},[e("a-select-option",{attrs:{value:"电子设备"}},[t._v("电子设备")]),e("a-select-option",{attrs:{value:"智能家居"}},[t._v("智能家居")]),e("a-select-option",{attrs:{value:"网络设备"}},[t._v("网络设备")]),e("a-select-option",{attrs:{value:"办公设备"}},[t._v("办公设备")]),e("a-select-option",{attrs:{value:"安防设备"}},[t._v("安防设备")])],1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"familyId",attrs:{label:"所属产品家族",prop:"familyId"}},[e("a-select",{attrs:{placeholder:"请选择所属产品家族",name:"familyId"},on:{change:t.handleFamilyChange},model:{value:t.entity.familyId,callback:function(e){t.$set(t.entity,"familyId",e)},expression:"entity.familyId"}},t._l(t.familyList,(function(a){return e("a-select-option",{key:a.id,attrs:{value:a.id}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"modelNumber",attrs:{label:"型号",prop:"modelNumber"}},[e("a-input",{attrs:{placeholder:"请输入产品型号",name:"modelNumber"},model:{value:t.entity.modelNumber,callback:function(e){t.$set(t.entity,"modelNumber",e)},expression:"entity.modelNumber"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[e("a-radio-group",{attrs:{name:"status"},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-radio",{attrs:{value:"启用"}},[t._v("启用")]),e("a-radio",{attrs:{value:"禁用"}},[t._v("禁用")])],1)],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{ref:"specification",attrs:{label:"规格说明",prop:"specification"}},[e("a-textarea",{attrs:{placeholder:"请输入规格说明",rows:3,"max-length":500,name:"specification"},model:{value:t.entity.specification,callback:function(e){t.$set(t.entity,"specification",e)},expression:"entity.specification"}})],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{ref:"description",attrs:{label:"类型描述",prop:"description"}},[e("a-textarea",{attrs:{placeholder:"请输入类型描述",rows:3,"max-length":1e3,name:"description"},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1)],1)],1)],1),e("g-collapse",{attrs:{headerName:"技术参数"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:24}},[e("a-button",{staticClass:"add-param-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.addParameter}},[t._v("添加参数")])],1),e("a-col",{attrs:{sm:24}},[e("a-table",{attrs:{columns:t.parameterColumns,dataSource:t.entity.parameters,pagination:!1,size:"small",rowKey:"id"},scopedSlots:t._u([{key:"paramName",fn:function(a,i,r){return[e("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:t.entity.parameters[r].paramName,callback:function(e){t.$set(t.entity.parameters[r],"paramName",e)},expression:"entity.parameters[index].paramName"}})]}},{key:"paramValue",fn:function(a,i,r){return[e("a-input",{attrs:{placeholder:"请输入参数值"},model:{value:t.entity.parameters[r].paramValue,callback:function(e){t.$set(t.entity.parameters[r],"paramValue",e)},expression:"entity.parameters[index].paramValue"}})]}},{key:"paramUnit",fn:function(a,i,r){return[e("a-input",{attrs:{placeholder:"请输入单位"},model:{value:t.entity.parameters[r].paramUnit,callback:function(e){t.$set(t.entity.parameters[r],"paramUnit",e)},expression:"entity.parameters[index].paramUnit"}})]}},{key:"action",fn:function(a,i,r){return[e("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>t.removeParameter(r)}})]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建人"}},[e("span",[t._v(t._s(t.entity.createdBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建时间"}},[e("span",[t._v(t._s(t.entity.createdTime||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改人"}},[e("span",[t._v(t._s(t.entity.modifiedBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改时间"}},[e("span",[t._v(t._s(t.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},r=[],s=a(36026),o={name:"CreateOrEditProductType",mixins:[s.GE],data(){return{loading:!1,entity:{id:void 0,typeCode:"",name:"",category:"",familyId:void 0,familyName:"",modelNumber:"",specification:"",description:"",status:"启用",parameters:[],productCount:0,createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},familyList:[],rules:{typeCode:[{required:!0,message:"请输入类型编码",trigger:"change"},{pattern:/^T\d{4}$/,message:"类型编码必须为T开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入类型名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"类型名称不能包含前后空格",trigger:"change"}],category:[{required:!0,message:"请选择产品分类",trigger:"change"}],familyId:[{required:!0,message:"请选择所属产品家族",trigger:"change"}],modelNumber:[{required:!0,message:"请输入产品型号",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},parameterColumns:[{title:"参数名称",dataIndex:"paramName",key:"paramName",width:"30%",scopedSlots:{customRender:"paramName"}},{title:"参数值",dataIndex:"paramValue",key:"paramValue",width:"30%",scopedSlots:{customRender:"paramValue"}},{title:"单位",dataIndex:"paramUnit",key:"paramUnit",width:"20%",scopedSlots:{customRender:"paramUnit"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},created(){this.fetchFamilyList()},methods:{fetchFamilyList(){setTimeout((()=>{this.familyList=[{id:1,name:"华为手机系列",manufacturer:"华为"},{id:2,name:"小米家电系列",manufacturer:"小米"},{id:3,name:"联想电脑系列",manufacturer:"联想"},{id:4,name:"戴尔服务器系列",manufacturer:"戴尔"},{id:5,name:"惠普打印系列",manufacturer:"惠普"}]}),300)},init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,typeCode:"",name:"",category:"",familyId:void 0,familyName:"",modelNumber:"",specification:"",description:"",status:"启用",parameters:[],productCount:0,createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const t=this.ndoEditParams.row;this.entity={...this.entity,...t,parameters:t.parameters||[]}}},async save(){let t=await this.checkError();if(t){const t=this.entity.parameters.find((t=>!t.paramName||!t.paramValue));if(t)return void this.$message.error("所有技术参数必须有名称和值");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(t){console.log(t.target.value)},handleFamilyChange(t){const e=this.familyList.find((e=>e.id===t));e&&(this.entity.familyName=e.name)},addParameter(){this.entity.parameters.push({id:Date.now(),paramName:"",paramValue:"",paramUnit:""})},removeParameter(t){this.entity.parameters.splice(t,1)}}},n=o,l=a(1001),m=(0,l.Z)(n,i,r,!1,null,"e2ff5160",null),c=m.exports},97772:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("g-body-layout",{attrs:{pageIndex:t.pageNumber,pageSize:t.pageSize,total:t.total,filterText:t.filterText},on:{"update:filterText":function(e){t.filterText=e},"update:filter-text":function(e){t.filterText=e},pageIndexChange:t.pageIndexChange,pageSizeChange:t.pageSizeChange,suffixSearchCallback:t.onFilterReady},scopedSlots:t._u([{key:"btnGroup",fn:function(){return[e("g-btn-group",{attrs:{buttonLists:t.btnList},on:{btnCallBack:t.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[e("g-ndo-table",{attrs:{id:t.id,handName:"产品类型",dataList:t.dataList,isTableLoading:t.loading,total:t.total},on:{rowClick:t.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[t.isShowEdit?e("create-or-edit-product-type",{attrs:{ndoEditParams:t.ndoEditParams,refreshTag:t.refreshTag,saveTag:t.saveTag,resetTag:t.resetTag},on:{childRefresh:function(e){return t.childRefresh(e)},rowClick:function(e){return t.rowClick(e)}}}):e("g-empty")]},proxy:!0}])})},r=[],s=a(63946),o=a(99319),n=a(36026),l={name:"ProductType",mixins:[n.He],components:{CreateOrEditProductType:s["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:o.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:t=>{console.log(t),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(t.value,t.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该产品类型吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(t){this.loading=!0,setTimeout((()=>{t.finishedCallback();let e=[];const a=["电子设备","智能家居","网络设备","办公设备","安防设备"],i=["华为手机系列","小米家电系列","联想电脑系列","戴尔服务器系列","惠普打印系列"],r=["启用","禁用"];for(let t=0;t<25;t++){const s=t%5,o=t%5;e[t]={id:t+1,typeCode:`T${String(t+1).padStart(4,"0")}`,name:`${i[o].substring(0,2)}${a[s]}型号${t%5+1}`,category:a[s],familyName:i[o],familyId:o+1,modelNumber:`Model-${String.fromCharCode(65+t%5)}${t%9+1}`,specification:"规格配置"+(t%5+1),productCount:Math.floor(20*Math.random())+1,description:`${i[o].substring(0,2)}的${a[s]}型号产品，具备高性能和可靠性`,status:r[t%2],createdBy:"admin",createdTime:"2024-03-18 "+(10+t%10)+":"+t%60}}this.filterText&&(console.log(this.filterText),e=e.filter((t=>t.typeCode.indexOf(this.filterText)>-1||t.name.indexOf(this.filterText)>-1||t.category.indexOf(this.filterText)>-1||t.familyName.indexOf(this.filterText)>-1||t.modelNumber.indexOf(this.filterText)>-1||t.specification.indexOf(this.filterText)>-1||t.description.indexOf(this.filterText)>-1))),t.successCallback({items:e,totalCount:2*e.length})}),1e3)}}},m=l,c=a(1001),d=(0,c.Z)(m,i,r,!1,null,"8d5a7aa8",null),p=d.exports}}]);
//# sourceMappingURL=7772.8d795766.js.map