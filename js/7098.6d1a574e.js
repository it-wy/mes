"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[7098],{77098:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var a=function(){var e=this,t=e._self._c;return t("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:e.entity,layout:"vertical",autocomplete:"off"}},[t("g-body-form-layout",{scopedSlots:e._u([{key:"search-card",fn:function(){return[t("div",{staticClass:"search-card"},[t("g-container-list",{on:{change:e.onSearch},model:{value:e.entity.mainContainer,callback:function(t){e.$set(e.entity,"mainContainer",t)},expression:"entity.mainContainer"}})],1)]},proxy:!0},{key:"expand-card",fn:function(){return[t("div",{staticClass:"expand-card"},[t("g-collapse",{attrs:{headerName:"批次信息"},scopedSlots:e._u([{key:"content",fn:function(){return[e._v(" "+e._s(e.entity)+" ")]},proxy:!0}])})],1)]},proxy:!0},{key:"card-body",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:24}},[t("g-collapse",{attrs:{headerName:"待解除关联批次"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"输入批次号快速选择"},on:{pressEnter:e.addByContainer},model:{value:e.searchContainer,callback:function(t){e.searchContainer=t},expression:"searchContainer"}}),t("a-table",{attrs:{columns:e.relatedColumns,"data-source":e.relatedContainers,"row-key":e=>e.containerName,"row-selection":{selectedRowKeys:e.setOfCheckedId,onChange:e.onSelectChange},pagination:!1,bordered:"",size:"small"}})]},proxy:!0}])})],1)],1)]},proxy:!0},{key:"g-fixed-row",fn:function(){return[t("div",{staticClass:"g-fixed-row"},[t("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:e.refresh}}),t("g-btn",{attrs:{size:"large",text:"解除关联",type:"primary"},on:{callback:e.removeRelation}})],1)]},proxy:!0}])})],1)},r=[],s={name:"DataV2ContainerRemoveRelation",data(){return{entity:{mainContainer:""},relatedContainers:[],setOfCheckedId:[],searchContainer:"",relatedColumns:[{title:"批次号",dataIndex:"containerName"},{title:"状态",dataIndex:"status"}]}},mounted(){},methods:{addByContainer(){const e=this.relatedContainers.find((e=>e.containerName===this.searchContainer.trim()));e?(this.setOfCheckedId.includes(e.containerName)||this.setOfCheckedId.push(e.containerName),this.searchContainer=""):this.$message.warning("该批次不在待解除关联列表中")},onSearch(e){this.entity.mainContainer=e,this.setOfCheckedId=[],this.relatedContainers=[],e&&this.getRelationContainer(e)},async getRelationContainer(e){const t={output:{relationContainerList:[{containerName:"B001",status:"已入库"},{containerName:"B002",status:"已入库"}]}};t&&t.output&&(this.relatedContainers=t.output.relationContainerList||[])},onSelectChange(e){this.setOfCheckedId=e},removeRelation(){this.entity.mainContainer?0!==this.setOfCheckedId.length?(this.$message.success("解除关联成功"),this.refresh()):this.$message.warning("请选择要解除关联的批次"):this.$message.warning("请选择主批次")},refresh(){this.onSearch(this.entity.mainContainer)}}},i=s,o=n(1001),c=(0,o.Z)(i,a,r,!1,null,"c0d58b20",null),l=c.exports}}]);
//# sourceMappingURL=7098.6d1a574e.js.map