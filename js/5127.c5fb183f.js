"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[5127,6288],{99319:function(e,t,a){a.d(t,{Z:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("div",{staticClass:"modal-content"},[t("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:e.rules,model:e.copyForm}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:e.copyForm.value,callback:function(t){e.$set(e.copyForm,"value",t)},expression:"copyForm.value"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[t("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:e.copyForm.copyValue,callback:function(t){e.$set(e.copyForm,"copyValue",t)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),t("div",{staticClass:"modal-footer"},[t("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:e.save}}),t("g-btn",{attrs:{text:"取消"},on:{callback:function(t){return e.$emit("closeModal")}}})],1)])},i=[],s=(a(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((e=>{e&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),o=s,r=a(1001),l=(0,r.Z)(o,n,i,!1,null,"04e98444",null),d=l.exports},86288:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"operationCode",attrs:{label:"工序编码",prop:"operationCode"}},[t("a-input",{attrs:{placeholder:"请输入工序编码",name:"operationCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.operationCode,callback:function(t){e.$set(e.entity,"operationCode",t)},expression:"entity.operationCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"工序名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入工序名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"operationType",attrs:{label:"工序类型",prop:"operationType"}},[t("a-select",{attrs:{placeholder:"请选择工序类型",name:"operationType"},on:{change:e.handleOperationTypeChange},model:{value:e.entity.operationType,callback:function(t){e.$set(e.entity,"operationType",t)},expression:"entity.operationType"}},[t("a-select-option",{attrs:{value:"加工工序"}},[e._v("加工工序")]),t("a-select-option",{attrs:{value:"装配工序"}},[e._v("装配工序")]),t("a-select-option",{attrs:{value:"检验工序"}},[e._v("检验工序")]),t("a-select-option",{attrs:{value:"热处理工序"}},[e._v("热处理工序")]),t("a-select-option",{attrs:{value:"表面处理工序"}},[e._v("表面处理工序")]),t("a-select-option",{attrs:{value:"包装工序"}},[e._v("包装工序")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"department",attrs:{label:"执行部门",prop:"department"}},[t("a-select",{attrs:{placeholder:"请选择执行部门",name:"department"},model:{value:e.entity.department,callback:function(t){e.$set(e.entity,"department",t)},expression:"entity.department"}},[t("a-select-option",{attrs:{value:"机加部"}},[e._v("机加部")]),t("a-select-option",{attrs:{value:"装配部"}},[e._v("装配部")]),t("a-select-option",{attrs:{value:"质检部"}},[e._v("质检部")]),t("a-select-option",{attrs:{value:"热处理部"}},[e._v("热处理部")]),t("a-select-option",{attrs:{value:"表面处理部"}},[e._v("表面处理部")]),t("a-select-option",{attrs:{value:"包装部"}},[e._v("包装部")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardTime",attrs:{label:"标准工时",prop:"standardTime"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,placeholder:"请输入标准工时",name:"standardTime"},model:{value:e.entity.standardTime,callback:function(t){e.$set(e.entity,"standardTime",t)},expression:"entity.standardTime"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardUnit",attrs:{label:"时间单位",prop:"standardUnit"}},[t("a-select",{attrs:{placeholder:"请选择时间单位",name:"standardUnit"},model:{value:e.entity.standardUnit,callback:function(t){e.$set(e.entity,"standardUnit",t)},expression:"entity.standardUnit"}},[t("a-select-option",{attrs:{value:"秒"}},[e._v("秒")]),t("a-select-option",{attrs:{value:"分钟"}},[e._v("分钟")]),t("a-select-option",{attrs:{value:"小时"}},[e._v("小时")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")]),t("a-radio",{attrs:{value:"开发中"}},[e._v("开发中")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"工序描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入工序描述",rows:3,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"工序参数"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-param-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addParameter}},[e._v("添加参数")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.parameterColumns,dataSource:e.entity.parameters,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"paramName",fn:function(a,n,i){return[t("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.entity.parameters[i].paramName,callback:function(t){e.$set(e.entity.parameters[i],"paramName",t)},expression:"entity.parameters[index].paramName"}})]}},{key:"paramValue",fn:function(a,n,i){return[t("a-input",{attrs:{placeholder:"请输入参数值"},model:{value:e.entity.parameters[i].paramValue,callback:function(t){e.$set(e.entity.parameters[i],"paramValue",t)},expression:"entity.parameters[index].paramValue"}})]}},{key:"paramUnit",fn:function(a,n,i){return[t("a-input",{attrs:{placeholder:"请输入参数单位"},model:{value:e.entity.parameters[i].paramUnit,callback:function(t){e.$set(e.entity.parameters[i],"paramUnit",t)},expression:"entity.parameters[index].paramUnit"}})]}},{key:"controlRange",fn:function(a,n,i){return[t("a-input",{attrs:{placeholder:"请输入控制范围"},model:{value:e.entity.parameters[i].controlRange,callback:function(t){e.$set(e.entity.parameters[i],"controlRange",t)},expression:"entity.parameters[index].controlRange"}})]}},{key:"required",fn:function(a,n,i){return[t("a-switch",{model:{value:e.entity.parameters[i].required,callback:function(t){e.$set(e.entity.parameters[i],"required",t)},expression:"entity.parameters[index].required"}})]}},{key:"action",fn:function(a,n,i){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeParameter(i)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"设备要求"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-equipment-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addEquipment}},[e._v("添加设备")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.equipmentColumns,dataSource:e.entity.equipments,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"equipmentType",fn:function(a,n,i){return[t("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.entity.equipments[i].equipmentType,callback:function(t){e.$set(e.entity.equipments[i],"equipmentType",t)},expression:"entity.equipments[index].equipmentType"}},[t("a-select-option",{attrs:{value:"车床"}},[e._v("车床")]),t("a-select-option",{attrs:{value:"铣床"}},[e._v("铣床")]),t("a-select-option",{attrs:{value:"钻床"}},[e._v("钻床")]),t("a-select-option",{attrs:{value:"磨床"}},[e._v("磨床")]),t("a-select-option",{attrs:{value:"热处理炉"}},[e._v("热处理炉")]),t("a-select-option",{attrs:{value:"喷涂设备"}},[e._v("喷涂设备")]),t("a-select-option",{attrs:{value:"检测设备"}},[e._v("检测设备")]),t("a-select-option",{attrs:{value:"装配工具"}},[e._v("装配工具")]),t("a-select-option",{attrs:{value:"包装设备"}},[e._v("包装设备")])],1)]}},{key:"equipmentModel",fn:function(a,n,i){return[t("a-input",{attrs:{placeholder:"请输入设备型号"},model:{value:e.entity.equipments[i].equipmentModel,callback:function(t){e.$set(e.entity.equipments[i],"equipmentModel",t)},expression:"entity.equipments[index].equipmentModel"}})]}},{key:"quantity",fn:function(a,n,i){return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入数量"},model:{value:e.entity.equipments[i].quantity,callback:function(t){e.$set(e.entity.equipments[i],"quantity",t)},expression:"entity.equipments[index].quantity"}})]}},{key:"mandatory",fn:function(a,n,i){return[t("a-switch",{model:{value:e.entity.equipments[i].mandatory,callback:function(t){e.$set(e.entity.equipments[i],"mandatory",t)},expression:"entity.equipments[index].mandatory"}})]}},{key:"action",fn:function(a,n,i){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeEquipment(i)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],s=a(36026),o={name:"CreateOrEditOperation",mixins:[s.GE],data(){return{loading:!1,entity:{id:void 0,operationCode:"",name:"",operationType:"",department:"",standardTime:0,standardUnit:"分钟",description:"",parameters:[],equipments:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{operationCode:[{required:!0,message:"请输入工序编码",trigger:"change"},{pattern:/^[A-Z]{2}\d{3}/,message:"工序编码格式不正确",trigger:"change"}],name:[{required:!0,message:"请输入工序名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"工序名称不能包含前后空格",trigger:"change"}],operationType:[{required:!0,message:"请选择工序类型",trigger:"change"}],department:[{required:!0,message:"请选择执行部门",trigger:"change"}],standardTime:[{required:!0,message:"请输入标准工时",trigger:"change"},{type:"number",min:0,message:"标准工时必须大于等于0",trigger:"change"}],standardUnit:[{required:!0,message:"请选择时间单位",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},parameterColumns:[{title:"参数名称",dataIndex:"paramName",key:"paramName",width:"20%",scopedSlots:{customRender:"paramName"}},{title:"参数值",dataIndex:"paramValue",key:"paramValue",width:"20%",scopedSlots:{customRender:"paramValue"}},{title:"参数单位",dataIndex:"paramUnit",key:"paramUnit",width:"15%",scopedSlots:{customRender:"paramUnit"}},{title:"控制范围",dataIndex:"controlRange",key:"controlRange",width:"20%",scopedSlots:{customRender:"controlRange"}},{title:"必填",dataIndex:"required",key:"required",width:"10%",scopedSlots:{customRender:"required"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}],equipmentColumns:[{title:"设备类型",dataIndex:"equipmentType",key:"equipmentType",width:"25%",scopedSlots:{customRender:"equipmentType"}},{title:"设备型号",dataIndex:"equipmentModel",key:"equipmentModel",width:"30%",scopedSlots:{customRender:"equipmentModel"}},{title:"数量",dataIndex:"quantity",key:"quantity",width:"15%",scopedSlots:{customRender:"quantity"}},{title:"必需",dataIndex:"mandatory",key:"mandatory",width:"15%",scopedSlots:{customRender:"mandatory"}},{title:"操作",key:"action",width:"15%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,operationCode:"",name:"",operationType:"",department:"",standardTime:0,standardUnit:"分钟",description:"",parameters:[],equipments:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,parameters:e.parameters||[],equipments:e.equipments||[]}}},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(e){console.log(e.target.value)},handleOperationTypeChange(e){const t={"加工工序":"机加部","装配工序":"装配部","检验工序":"质检部","热处理工序":"热处理部","表面处理工序":"表面处理部","包装工序":"包装部"};t[e]&&(this.entity.department=t[e])},addParameter(){this.entity.parameters.push({id:Date.now(),paramName:"",paramValue:"",paramUnit:"",controlRange:"",required:!1})},removeParameter(e){this.entity.parameters.splice(e,1)},addEquipment(){this.entity.equipments.push({id:Date.now(),equipmentType:"",equipmentModel:"",quantity:1,mandatory:!0})},removeEquipment(e){this.entity.equipments.splice(e,1)}}},r=o,l=a(1001),d=(0,l.Z)(r,n,i,!1,null,"c91e80bc",null),c=d.exports},25127:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=function(){var e=this,t=e._self._c;return t("g-body-layout",{attrs:{pageIndex:e.pageNumber,pageSize:e.pageSize,total:e.total,filterText:e.filterText},on:{"update:filterText":function(t){e.filterText=t},"update:filter-text":function(t){e.filterText=t},pageIndexChange:e.pageIndexChange,pageSizeChange:e.pageSizeChange,suffixSearchCallback:e.onFilterReady},scopedSlots:e._u([{key:"btnGroup",fn:function(){return[t("g-btn-group",{attrs:{buttonLists:e.btnList},on:{btnCallBack:e.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[t("g-ndo-table",{attrs:{id:e.id,handName:"工序建模",dataList:e.dataList,isTableLoading:e.loading,total:e.total},on:{rowClick:e.rowClick}})]},proxy:!0},{key:"content",fn:function(){return[e.isShowEdit?t("create-or-edit-operation",{attrs:{ndoEditParams:e.ndoEditParams,refreshTag:e.refreshTag,saveTag:e.saveTag,resetTag:e.resetTag},on:{childRefresh:function(t){return e.childRefresh(t)},rowClick:function(t){return e.rowClick(t)}}}):t("g-empty")]},proxy:!0}])})},i=[],s=a(86288),o=a(99319),r=a(36026),l={name:"OperationModeling",mixins:[r.He],components:{CreateOrEditOperation:s["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:o.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:e=>{console.log(e),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(e.value,e.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除该工序吗？删除后无法恢复。",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(e){this.loading=!0,setTimeout((()=>{e.finishedCallback();let t=[];const a=["加工工序","装配工序","检验工序","热处理工序","表面处理工序","包装工序"],n=["机加部","装配部","质检部","热处理部","表面处理部","包装部"],i=["启用","禁用","开发中"];for(let e=0;e<25;e++){const s=e%6;let o,r,l,d;switch(s){case 0:const t=[{code:"OP001",name:"车削",desc:"金属车削加工",time:30},{code:"OP002",name:"铣削",desc:"金属铣削加工",time:45},{code:"OP003",name:"钻孔",desc:"金属钻孔加工",time:25},{code:"OP004",name:"磨削",desc:"金属表面磨削",time:40}],a=e%4;o=t[a].code,r=t[a].name,l=t[a].desc,d=t[a].time;break;case 1:const n=[{code:"AS001",name:"组装主体",desc:"组装产品主体结构",time:60},{code:"AS002",name:"连接零件",desc:"连接各个零部件",time:45},{code:"AS003",name:"固定紧固",desc:"紧固连接件",time:30}],i=e%3;o=n[i].code,r=n[i].name,l=n[i].desc,d=n[i].time;break;case 2:const s=[{code:"IN001",name:"尺寸检验",desc:"检测产品尺寸",time:20},{code:"IN002",name:"外观检验",desc:"检测产品外观",time:15},{code:"IN003",name:"功能测试",desc:"测试产品功能",time:30}],c=e%3;o=s[c].code,r=s[c].name,l=s[c].desc,d=s[c].time;break;case 3:const m=[{code:"HT001",name:"淬火",desc:"金属淬火处理",time:120},{code:"HT002",name:"回火",desc:"金属回火处理",time:180},{code:"HT003",name:"退火",desc:"金属退火处理",time:240}],p=e%3;o=m[p].code,r=m[p].name,l=m[p].desc,d=m[p].time;break;case 4:const u=[{code:"SF001",name:"喷漆",desc:"表面喷漆处理",time:50},{code:"SF002",name:"电镀",desc:"表面电镀处理",time:90},{code:"SF003",name:"抛光",desc:"表面抛光处理",time:40}],y=e%3;o=u[y].code,r=u[y].name,l=u[y].desc,d=u[y].time;break;case 5:const h=[{code:"PK001",name:"内包装",desc:"产品内包装",time:15},{code:"PK002",name:"外包装",desc:"产品外包装",time:20}],f=e%2;o=h[f].code,r=h[f].name,l=h[f].desc,d=h[f].time;break}t[e]={id:e+1,operationCode:`${o}${String(e+1).padStart(2,"0")}`,name:r,operationType:a[s],department:n[s],description:l,standardTime:d,standardUnit:"分钟",status:i[e%3],createdBy:"admin",createdTime:"2024-03-19 "+(10+e%10)+":"+e%60}}this.filterText&&(console.log(this.filterText),t=t.filter((e=>e.operationCode.indexOf(this.filterText)>-1||e.name.indexOf(this.filterText)>-1||e.operationType.indexOf(this.filterText)>-1||e.department.indexOf(this.filterText)>-1||e.description.indexOf(this.filterText)>-1))),e.successCallback({items:t,totalCount:2*t.length})}),1e3)}}},d=l,c=a(1001),m=(0,c.Z)(d,n,i,!1,null,"ee96f76a",null),p=m.exports}}]);
//# sourceMappingURL=5127.c5fb183f.js.map