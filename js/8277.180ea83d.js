"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[8277],{88277:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var i=function(){var t=this,e=t._self._c;return e("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:t.entity,layout:"vertical",autocomplete:"off",rules:t.rules}},[e("g-body-form-layout",{scopedSlots:t._u([{key:"search-card",fn:function(){return[e("div",{staticClass:"search-card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:4}},[e("a-form-model-item",{attrs:{label:"设备组",prop:"deviceGroupName"}},[e("g-select",{attrs:{placeholder:"请选择设备组"},model:{value:t.entity.deviceGroupName,callback:function(e){t.$set(t.entity,"deviceGroupName",e)},expression:"entity.deviceGroupName"}},t._l(t.deviceGroupOptions,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])})),1)],1)],1),e("a-col",{attrs:{span:4}},[e("a-form-model-item",{attrs:{label:"设备",prop:"deviceName"}},[e("g-select",{attrs:{placeholder:"请选择设备"},model:{value:t.entity.deviceName,callback:function(e){t.$set(t.entity,"deviceName",e)},expression:"entity.deviceName"}},t._l(t.deviceOptions,(function(a){return e("a-select-option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])})),1)],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"时间范围",prop:"timeRange"}},[e("a-range-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",format:"YYYY-MM-DD HH:mm:ss"},on:{change:t.onTimeRangeChange},model:{value:t.entity.timeRange,callback:function(e){t.$set(t.entity,"timeRange",e)},expression:"entity.timeRange"}})],1)],1),e("a-col",{attrs:{span:4}},[e("a-form-model-item",{attrs:{label:"时间粒度",prop:"timeGranularity"}},[e("a-select",{attrs:{placeholder:"请选择时间粒度"},on:{change:t.onTimeGranularityChange},model:{value:t.entity.timeGranularity,callback:function(e){t.$set(t.entity,"timeGranularity",e)},expression:"entity.timeGranularity"}},[e("a-select-option",{attrs:{value:"minute"}},[t._v("每分钟")]),e("a-select-option",{attrs:{value:"hour"}},[t._v("每小时")]),e("a-select-option",{attrs:{value:"day"}},[t._v("每天")])],1)],1)],1),e("a-col",{attrs:{span:6}},[e("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center",height:"100%"}},[e("g-btn-group",{attrs:{buttonLists:t.btnList},on:{btnCallback:function(e){return t.btnCallback(e)}}})],1)])],1)],1)]},proxy:!0},{key:"card-body",fn:function(){return[e("div",{staticClass:"card-body"},[e("g-collapse",{attrs:{headerName:"吞吐量数据"},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{ref:"chart",staticStyle:{width:"100%",height:"400px"}}),e("a-table",{attrs:{columns:t.columns,"data-source":t.dataList,pagination:!1},scopedSlots:t._u([{key:"time",fn:function(a){return e("span",{},[t._v(t._s(t.formatTime(a)))])}}])})]},proxy:!0}])})],1)]},proxy:!0},{key:"g-fixed-row",fn:function(){return[e("div",{staticClass:"g-fixed-row"},[e("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:function(e){return t.refresh()}}}),e("g-btn",{attrs:{size:"large",text:"导出",type:"primary"},on:{callback:function(e){return t.exportData()}}})],1)]},proxy:!0}])})],1)},r=[],n=a(61893),s=a(30381),o=a.n(s),l=a(58805),u={name:"EquipmentThroughput",data(){return{entity:{deviceGroupName:"",deviceName:"",timeRange:[],timeGranularity:"hour"},rules:{deviceName:[{required:!0,message:"请选择设备",trigger:"change"}],timeRange:[{required:!0,message:"请选择时间范围",trigger:"change"}],timeGranularity:[{required:!0,message:"请选择时间粒度",trigger:"change"}]},deviceGroupOptions:[],deviceOptions:[],btnList:[{icon:l.Z.icon.documentShow,text:l.Z.button.documentShow,eventName:l.Z.button.documentShow,display:!0}],chart:null,dataList:[],columns:[{title:"时间",dataIndex:"time",key:"time",scopedSlots:{customRender:"time"}},{title:"吞吐量",dataIndex:"throughput",key:"throughput"}]}},mounted(){this.loadDeviceGroups(),this.refresh(),this.$nextTick((()=>{this.initChart()}))},beforeDestroy(){this.chart&&this.chart.dispose()},methods:{initChart(){this.chart=n.S1(this.$refs.chart),this.chart.setOption({title:{text:"设备吞吐量"},tooltip:{trigger:"axis"},legend:{data:["吞吐量"]},xAxis:{type:"category",data:["1","2","3","4","5","6","7","8","9","10"]},yAxis:{type:"value",name:"吞吐量"},series:[{name:"吞吐量",type:"line",data:[10,20,30,40,50,60,70,80,90,100]}]})},loadDeviceGroups(){setTimeout((()=>{this.deviceGroupOptions=[{value:"group1",label:"设备组1"},{value:"group2",label:"设备组2"}]}),500)},onDeviceGroupChange(t){setTimeout((()=>{this.deviceOptions="group1"===t?[{value:"device1",label:"设备1"},{value:"device2",label:"设备2"}]:"group2"===t?[{value:"device3",label:"设备3"},{value:"device4",label:"设备4"}]:[]}),500)},onTimeRangeChange(t){this.entity.timeRange=t,this.refresh()},onTimeGranularityChange(t){this.entity.timeGranularity=t,this.refresh()},refresh(){this.$refs.form.validate().then((t=>{t&&setTimeout((()=>{const t=this.entity.timeRange[0],e=this.entity.timeRange[1],a=this.entity.timeGranularity;let i=o()(t);const r=[],n=[],s=[];while(i<=o()(e)){const t=i.valueOf(),e=Math.floor(100*Math.random());r.push({time:t,throughput:e}),n.push(this.formatTime(t)),s.push(e),"minute"===a?i.add(1,"minutes"):"hour"===a?i.add(1,"hours"):"day"===a&&i.add(1,"days")}this.dataList=r,this.chart.setOption({xAxis:{data:n},series:[{data:s}]})}),500)}))},formatTime(t){const e=this.entity.timeGranularity;return"minute"===e?o()(t).format("YYYY-MM-DD HH:mm"):"hour"===e?o()(t).format("YYYY-MM-DD HH:00"):"day"===e?o()(t).format("YYYY-MM-DD"):o()(t).format("YYYY-MM-DD HH:mm:ss")},exportData(){console.log("导出数据",this.dataList)},btnCallback(t){console.log(t)}},watch:{"entity.deviceGroupName"(t){this.onDeviceGroupChange(t)}}},c=u,m=a(1001),d=(0,m.Z)(c,i,r,!1,null,"6f00f55d",null),h=d.exports}}]);
//# sourceMappingURL=8277.180ea83d.js.map