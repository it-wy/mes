"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[55],{80055:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"flex-user"},[a("div",{staticStyle:{"background-color":"#fff","margin-bottom":"10px",padding:"12px 24px","box-sizing":"border-box","border-radius":"4px"}},[a("a-form",{attrs:{form:t.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:4}},[a("a-form-item",{attrs:{label:"不良品编号"}},[a("a-input",{attrs:{placeholder:"请输入不良品编号"},model:{value:t.form.productCode,callback:function(a){t.$set(t.form,"productCode",a)},expression:"form.productCode"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",{attrs:{label:"报废原因"}},[a("a-input",{attrs:{placeholder:"请输入报废原因"},model:{value:t.form.reason,callback:function(a){t.$set(t.form,"reason",a)},expression:"form.reason"}})],1)],1),a("a-col",{attrs:{span:4}},[a("a-form-item",{attrs:{label:" "}},[a("g-btn",{staticClass:"mr-2",attrs:{text:"查询",type:"primary"}}),a("g-btn",{attrs:{text:"重置"}})],1)],1)],1)],1)],1),a("div",{staticStyle:{"background-color":"#fff",padding:"12px 24px 0","box-sizing":"border-box","overflow-y":"hidden","border-radius":"4px"}},[a("g-table-bar",{attrs:{spacing:t.tableSize,columns:t.columns,virtualColumns:t.virtualColumns},on:{"update:spacing":function(a){t.tableSize=a},"update:columns":function(a){t.columns=a},refreshTable:t.refresh}},[a("g-btn",{staticStyle:{"margin-right":"10px"},attrs:{text:"添加"},on:{callback:t.addOrEditScrap}}),a("g-btn",{staticStyle:{"margin-right":"10px"},attrs:{text:"批量删除",type:"danger"}}),a("g-btn",{staticStyle:{"margin-right":"10px"},attrs:{text:"导出excel"}})],1),a("a-table",{attrs:{id:"tables",columns:t.columns,"data-source":t.dataList,scroll:{y:t.tableheight},"row-key":t=>t.id,pagination:t.pagination,rowSelection:t.rowSelection,loading:t.isTableLoading,size:t.tableSize},on:{change:t.tableChange},scopedSlots:t._u([{key:"reason",fn:function(e){return a("span",{},[a("a-tag",{attrs:{color:"red"}},[t._v(t._s(e))])],1)}},{key:"action",fn:function(e,r){return a("span",{},[a("a",{staticClass:"mr-1",attrs:{href:"javascript:;"},on:{click:function(a){return t.addOrEditScrap(r)}}},[t._v("编辑")]),a("a",{staticClass:"del",attrs:{href:"javascript:;"},on:{click:function(a){return t.delScrap(r)}}},[t._v("删除")])])}}])})],1)])},o=[],s=e(37491),i=e(2136),n=e(36026),l={name:"scrap-list",mixins:[n.tL],data(){return{tableheight:0,form:{productCode:"",reason:""}}},mounted(){this.columns=[{title:"序号",dataIndex:"id",key:"id",customRender:(t,a,e)=>`${e+1}`,width:80},{title:"不良品编号",dataIndex:"productCode",key:"productCode"},{title:"报废数量",dataIndex:"quantity",key:"quantity"},{title:"报废原因",dataIndex:"reason",key:"reason",scopedSlots:{customRender:"reason"}},{title:"报废时间",dataIndex:"scrapTime",key:"scrapTime",sorter:!0,ellipsis:!0,width:200},{title:"操作员",dataIndex:"operator",key:"operator"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],this.virtualColumns=JSON.parse(JSON.stringify(this.columns)).map((t=>(t.checked=!0,t))),this.$nextTick((()=>{this.tableheight=(0,s.W)({id:"tables"})}))},methods:{addOrEditScrap(t){(0,i.Z)({title:t?"编辑报废记录":"添加报废记录",width:"800px"},{component:CreateOrEditScrap})},fetchData(t){this.isTableLoading=!0,setTimeout((()=>{var a=[];for(let t=0;t<200;t++)a[t]={id:t,productCode:"P"+t.toString().padStart(5,"0"),quantity:Math.floor(10*Math.random())+1,reason:"质量问题"+t,scrapTime:"2022-01-01 00:00:00",operator:"操作员"+t};t.finishedCallback&&t.finishedCallback(),t.successCallback&&t.successCallback({items:a,totalCount:200})}),200)},delScrap(t){this.$confirm({title:"确认删除",content:"确认删除吗?",onOk:()=>{this.isTableLoading=!0,setTimeout((()=>{this.refresh()}),500)}})}}},c=l,d=e(1001),u=(0,d.Z)(c,r,o,!1,null,"59d043a5",null),p=u.exports}}]);
//# sourceMappingURL=55.6ec2271a.js.map