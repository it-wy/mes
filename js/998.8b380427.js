"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[998],{42570:function(t,e,a){a.d(e,{Z:function(){return d}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"sign-container"},[e("h3",{staticClass:"sign-title"},[t._v(t._s(t.title||"请在下方区域签名"))]),e("g-sign",{ref:"signBoard",attrs:{"line-width":t.lineWidth,"line-color":t.lineColor,"background-color":t.backgroundColor,"save-format":t.saveFormat},on:{save:t.handleSave,clear:t.handleClear,"save-error":t.handleError}})],1)]),e("div",{staticClass:"modal-footer"},[e("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.save}}),e("g-btn",{attrs:{text:"取消"},on:{callback:function(e){return t.$emit("closeModal")}}})],1)])},n=[],s=a(60704),o={name:"GSignModal",components:{GSign:s.Z},props:{title:{type:String,default:""},lineWidth:{type:Number,default:2},lineColor:{type:String,default:"#000000"},backgroundColor:{type:String,default:"#ffffff"},saveFormat:{type:String,default:"png",validator:t=>["png","jpeg","webp"].includes(t)}},data(){return{signatureData:null,hasSignature:!1}},methods:{handleSave(t){this.signatureData=t,this.hasSignature=!0},handleClear(){this.signatureData=null,this.hasSignature=!1},handleError(t){this.$message.error(t)},save(){this.hasSignature?(this.$emit("success",this.signatureData),this.$emit("closeModal")):this.$message.error("请先进行签名")},clearSignature(){this.$refs.signBoard&&this.$refs.signBoard.clearCanvas()}}},i=o,l=a(1001),c=(0,l.Z)(i,r,n,!1,null,"b8f67d68",null),d=c.exports},40998:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:t.entity,layout:"vertical",autocomplete:"off",rules:t.rules}},[e("g-body-form-layout",{scopedSlots:t._u([{key:"search-card",fn:function(){return[e("div",{staticClass:"search-card"},[e("g-container-list",{attrs:{value:t.entity.containerName},on:{"update:value":function(e){return t.$set(t.entity,"containerName",e)}}})],1)]},proxy:!0},{key:"expand-card",fn:function(){return[e("div",{staticClass:"expand-card"},[e("g-collapse",{attrs:{headerName:"展开面板"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:4}},[e("a-form-model-item",{attrs:{label:"产品"}},[e("g-select",{attrs:{showSearch:!0,loadType:"scroll",pagination:{pageSize:10}},model:{value:t.entity.product,callback:function(e){t.$set(t.entity,"product",e)},expression:"entity.product"}})],1)],1),e("a-col",{attrs:{span:4}},[e("a-form-model-item",{attrs:{label:"工单"}},[e("g-select",{attrs:{showSearch:!0,loadType:"scroll",pagination:{pageSize:10}},model:{value:t.entity.workOrder,callback:function(e){t.$set(t.entity,"workOrder",e)},expression:"entity.workOrder"}})],1)],1)],1)]},proxy:!0}])})],1)]},proxy:!0},{key:"card-body",fn:function(){return[e("g-collapse",{attrs:{headerName:"不良品信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"不良品数量",prop:"scrapQuantity"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入不良品数量",min:0},model:{value:t.entity.scrapQuantity,callback:function(e){t.$set(t.entity,"scrapQuantity",e)},expression:"entity.scrapQuantity"}})],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"不良原因",prop:"reasonCode"}},[e("g-select",{attrs:{placeholder:"请选择不良原因",showSearch:!0,options:t.reasonCodeOptions},model:{value:t.entity.reasonCode,callback:function(e){t.$set(t.entity,"reasonCode",e)},expression:"entity.reasonCode"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{attrs:{label:"不良原因描述",prop:"reasonDescription"}},[e("a-textarea",{attrs:{placeholder:"请输入不良原因描述（可选）",rows:1},model:{value:t.entity.reasonDescription,callback:function(e){t.$set(t.entity,"reasonDescription",e)},expression:"entity.reasonDescription"}})],1)],1)],1),e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:24}},[e("a-form-model-item",{attrs:{label:"备注",prop:"comments"}},[e("a-textarea",{attrs:{placeholder:"请输入备注（可选）",rows:2},model:{value:t.entity.comments,callback:function(e){t.$set(t.entity,"comments",e)},expression:"entity.comments"}})],1)],1)],1)]},proxy:!0}])})]},proxy:!0},{key:"g-fixed-row",fn:function(){return[e("div",{staticClass:"g-fixed-row"},[e("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:function(e){return t.refresh()}}}),e("g-btn",{attrs:{size:"large",text:"报废",type:"primary"},on:{callback:function(e){return t.scrap()}}})],1)]},proxy:!0}])})],1)},n=[],s=a(42570),o=a(36026),i={name:"Scrap",data(){return{entity:{containerName:"",product:void 0,workOrder:void 0,scrapQuantity:void 0,reasonCode:void 0,reasonDescription:"",comments:"",dataPoints:[]},rules:{containerName:[{required:!0,message:"请选择容器",trigger:"blur"}],scrapQuantity:[{required:!0,message:"请输入不良品数量",trigger:"blur"}],reasonCode:[{required:!0,message:"请选择不良原因",trigger:"change"}]},reasonCodeOptions:[{label:"材料不良",value:"MATERIAL_DEFECT"},{label:"设备故障",value:"EQUIPMENT_FAILURE"},{label:"操作失误",value:"OPERATOR_ERROR"},{label:"工艺问题",value:"PROCESS_ISSUE"}]}},watch:{"entity.containerName":{handler(){this.$refs.form.validateField("containerName")}}},mounted(){},methods:{scrap(){this.$refs.form.validate().then((t=>{t&&this.createSignModal()}))},createSignModal(){(0,o.f7)({title:"签名",width:"600px"},{component:s.Z,success:t=>{console.log(t),this.submitScrap()}})},submitScrap(){this.$message.success("报废成功（模拟）"),this.refresh()},refresh(){this.entity={containerName:"",product:void 0,workOrder:void 0,scrapQuantity:void 0,reasonCode:void 0,reasonDescription:"",comments:"",dataPoints:[]}}}},l=i,c=a(1001),d=(0,c.Z)(l,r,n,!1,null,"38c3a3c2",null),u=d.exports}}]);
//# sourceMappingURL=998.8b380427.js.map