"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1310],{41310:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("a-form-model",{ref:"form",staticClass:"h-father",attrs:{model:t.entity,layout:"vertical",autocomplete:"off"}},[e("g-body-form-layout",{scopedSlots:t._u([{key:"search-card",fn:function(){return[e("div",{staticClass:"search-card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"计划名称",prop:"planName"}},[e("a-input",{attrs:{placeholder:"请输入计划名称"},model:{value:t.entity.planName,callback:function(e){t.$set(t.entity,"planName",e)},expression:"entity.planName"}})],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"设备名称",prop:"deviceName"}},[e("a-input",{attrs:{placeholder:"请输入设备名称"},model:{value:t.entity.deviceName,callback:function(e){t.$set(t.entity,"deviceName",e)},expression:"entity.deviceName"}})],1)],1),e("a-col",{attrs:{span:6}},[e("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[e("a-select",{attrs:{placeholder:"请选择状态"},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-select-option",{attrs:{value:"待激活"}},[t._v("待激活")]),e("a-select-option",{attrs:{value:"已激活"}},[t._v("已激活")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"card-body",fn:function(){return[e("a-table",{attrs:{columns:t.columns,data:t.planList,loading:t.loading,pagination:t.pagination},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"operation",fn:function({record:a}){return[e("a-button",{attrs:{type:"primary",disabled:"待激活"!==a.status},on:{click:function(e){return t.activatePlan(a)}}},[t._v("激活")]),e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.viewPlanDetail(a)}}},[t._v("查看详情")])]}}])})]},proxy:!0},{key:"g-fixed-row",fn:function(){return[e("div",{staticClass:"g-fixed-row"},[e("g-btn",{attrs:{size:"large",text:"刷新"},on:{callback:function(e){return t.refresh()}}}),e("g-btn",{attrs:{type:"primary",text:"激活"},on:{callback:t.handleConfirmActivate}})],1)]},proxy:!0}])})],1)},i=[],s=a(58805),l={name:"MaintenancePlanActivation",data(){return{entity:{planName:"",deviceName:"",status:"待激活"},columns:[{title:"计划名称",dataIndex:"planName"},{title:"关联设备",dataIndex:"deviceName"},{title:"状态",dataIndex:"status",customRender:t=>this.formatStatus(t)},{title:"创建时间",dataIndex:"createTime"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],planList:[],loading:!1,pagination:{current:1,pageSize:10,total:0},selectedPlan:{},btnList:[{icon:s.Z.icon.search,text:"搜索",eventName:"search",type:"primary",display:!0}]}},created(){this.fetchPlanList()},methods:{fetchPlanList(){},handleTableChange(t){this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.fetchPlanList()},activatePlan(t){this.selectedPlan=t},handleConfirmActivate(){activateMaintenancePlan(this.selectedPlan.id).then((t=>{this.$message.success("保养计划激活成功"),this.fetchPlanList()})).catch((t=>{this.$message.error("保养计划激活失败："+t.message)}))},viewPlanDetail(t){this.$router.push({path:`/maintenance-management/plan-detail/${t.id}`})},formatStatus(t){const e={"待激活":"待激活","已激活":"已激活","已过期":"已过期","已终止":"已终止"};return e[t]||t},refresh(){this.entity.planName="",this.entity.deviceName="",this.entity.status="待激活",this.pagination.current=1,this.fetchPlanList()},btnCallback(t){"search"===t&&(this.pagination.current=1,this.fetchPlanList())}}},r=l,o=a(1001),c=(0,o.Z)(r,n,i,!1,null,"29749467",null),u=c.exports}}]);
//# sourceMappingURL=1310.23052008.js.map