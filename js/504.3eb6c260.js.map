{"version":3,"file":"js/504.3eb6c260.js","mappings":"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","sources":["webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?944d","webpack://data-v2/src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue?4880","webpack://data-v2/./src/components/g-sign-modal/g-sign-modal.vue","webpack://data-v2/./src/views/container-manager/combine-qty/combine-qty.vue?4617","webpack://data-v2/src/views/container-manager/combine-qty/combine-qty.vue","webpack://data-v2/./src/views/container-manager/combine-qty/combine-qty.vue?2432","webpack://data-v2/./src/views/container-manager/combine-qty/combine-qty.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"sign-container\"},[_c('h3',{staticClass:\"sign-title\"},[_vm._v(_vm._s(_vm.title || '请在下方区域签名'))]),_c('g-sign',{ref:\"signBoard\",attrs:{\"line-width\":_vm.lineWidth,\"line-color\":_vm.lineColor,\"background-color\":_vm.backgroundColor,\"save-format\":_vm.saveFormat},on:{\"save\":_vm.handleSave,\"clear\":_vm.handleClear,\"save-error\":_vm.handleError}})],1)]),_c('div',{staticClass:\"modal-footer\"},[_c('g-btn',{attrs:{\"text\":\"确认\",\"type\":\"primary\"},on:{\"callback\":_vm.save}}),_c('g-btn',{attrs:{\"text\":\"取消\"},on:{\"callback\":function($event){return _vm.$emit('closeModal')}}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"modal\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"sign-container\">\r\n        <h3 class=\"sign-title\">{{ title || '请在下方区域签名' }}</h3>\r\n        <g-sign\r\n          ref=\"signBoard\"\r\n          :line-width=\"lineWidth\"\r\n          :line-color=\"lineColor\"\r\n          :background-color=\"backgroundColor\"\r\n          :save-format=\"saveFormat\"\r\n          @save=\"handleSave\"\r\n          @clear=\"handleClear\"\r\n          @save-error=\"handleError\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <g-btn text=\"确认\" @callback=\"save\" type=\"primary\"></g-btn>\r\n      <g-btn text=\"取消\" @callback=\"$emit('closeModal')\"></g-btn>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GSign from '@/components/g-sign/g-sign.vue';\r\n\r\nexport default {\r\n  name: \"GSignModal\",\r\n  components: {\r\n    GSign\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 2\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    backgroundColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    saveFormat: {\r\n      type: String,\r\n      default: 'png',\r\n      validator: (value) => ['png', 'jpeg', 'webp'].includes(value)\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      signatureData: null,\r\n      hasSignature: false\r\n    };\r\n  },\r\n  methods: {\r\n    handleSave(imageData) {\r\n      this.signatureData = imageData;\r\n      this.hasSignature = true;\r\n    },\r\n    \r\n    handleClear() {\r\n      this.signatureData = null;\r\n      this.hasSignature = false;\r\n    },\r\n    \r\n    handleError(message) {\r\n      this.$message.error(message);\r\n    },\r\n    \r\n    save() {\r\n      if (!this.hasSignature) {\r\n        this.$message.error('请先进行签名');\r\n        return;\r\n      }\r\n      \r\n      this.$emit('success', this.signatureData);\r\n      this.$emit('closeModal');\r\n    },\r\n    \r\n    clearSignature() {\r\n      if (this.$refs.signBoard) {\r\n        this.$refs.signBoard.clearCanvas();\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// .modal {\r\n//   display: flex;\r\n//   flex-direction: column;\r\n//   height: 100%;\r\n// }\r\n\r\n// .modal-content {\r\n//   flex: 1;\r\n//   padding: 20px;\r\n//   overflow: auto;\r\n// }\r\n\r\n.sign-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.sign-title {\r\n  margin-top: 0;\r\n  margin-bottom: 16px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n// .modal-footer {\r\n//   display: flex;\r\n//   justify-content: flex-end;\r\n//   padding: 12px 20px;\r\n//   border-top: 1px solid #e8e8e8;\r\n  \r\n//   :deep(.g-btn) {\r\n//     margin-left: 8px;\r\n//   }\r\n// }\r\n</style> ","import mod from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./g-sign-modal.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./g-sign-modal.vue?vue&type=template&id=b8f67d68&scoped=true\"\nimport script from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nexport * from \"./g-sign-modal.vue?vue&type=script&lang=js\"\nimport style0 from \"./g-sign-modal.vue?vue&type=style&index=0&id=b8f67d68&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b8f67d68\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('a-form-model',{ref:\"form\",staticClass:\"h-father sflex\",attrs:{\"model\":_vm.entity,\"layout\":\"vertical\",\"autocomplete\":\"off\",\"rules\":_vm.rules}},[_c('a-card',{staticClass:\"mb-4\"},[_c('a-radio-group',{on:{\"change\":_vm.combineTypeChange},model:{value:(_vm.combineType),callback:function ($$v) {_vm.combineType=$$v},expression:\"combineType\"}},[_c('a-radio',{attrs:{\"value\":\"1\"}},[_vm._v(\"一个批次合并到多个批次\")]),_c('a-radio',{attrs:{\"value\":\"2\"}},[_vm._v(\"多个批次合并到一个批次\")])],1)],1),_c('g-body-form-layout',{scopedSlots:_vm._u([{key:\"search-card\",fn:function(){return [_c('div',{staticClass:\"search-card\"},[_c('g-container-list',{attrs:{\"value\":_vm.entity.containerName},on:{\"update:value\":function($event){return _vm.$set(_vm.entity, \"containerName\", $event)},\"searchClick\":_vm.onSearch}})],1)]},proxy:true},{key:\"expand-card\",fn:function(){return [_c('div',{staticClass:\"expand-card\"},[_c('g-collapse',{attrs:{\"headerName\":\"扩展信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":4}},[_c('a-form-model-item',{attrs:{\"label\":\"设备\"}},[_c('g-select',{attrs:{\"showSearch\":true,\"loadType\":\"scroll\"},on:{\"change\":_vm.resourceChange},model:{value:(_vm.entity.resourceId),callback:function ($$v) {_vm.$set(_vm.entity, \"resourceId\", $$v)},expression:\"entity.resourceId\"}})],1)],1)],1)]},proxy:true}])})],1)]},proxy:true},{key:\"card-body\",fn:function(){return [_c('g-collapse',{attrs:{\"headerName\":\"合并信息\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addDetailRow}},[_vm._v(\"添加批次\")]),_c('a-table',{staticClass:\"mt-4\",attrs:{\"dataSource\":_vm.detailList,\"columns\":_vm.columns,\"pagination\":false},scopedSlots:_vm._u([{key:\"bodyCell\",fn:function({ column, record, index }){return [(column.key === 'action')?[_c('a-space',[_c('a-popconfirm',{attrs:{\"title\":\"确认删除?\"},on:{\"confirm\":function($event){return _vm.deleteDetailRow(record, index)}}},[_c('a',[_vm._v(\"删除\")])])],1)]:_vm._e()]}}])}),(_vm.combineType === '2')?[_c('a-table',{staticClass:\"mt-4\",attrs:{\"dataSource\":_vm.newContainer,\"columns\":_vm.newContainerColumns,\"pagination\":false},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_vm._v(\"合并后批次\")]},proxy:true}],null,false,1421813205)})]:_vm._e()],2)],1),_c('a-row',{staticClass:\"mt-4\",attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"合并原因\",\"prop\":\"mergeReasonId\",\"rules\":[{required: true, message: '请选择合并原因'}]}},[_c('g-select',{model:{value:(_vm.entity.mergeReasonId),callback:function ($$v) {_vm.$set(_vm.entity, \"mergeReasonId\", $$v)},expression:\"entity.mergeReasonId\"}})],1)],1)],1)]},proxy:true}])}),(_vm.dataPoints.length)?_c('g-collapse',{attrs:{\"headerName\":\"数据采集\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('g-data-points',{attrs:{\"dataPoints\":_vm.dataPoints,\"validDataName\":\"dataPoints\"}})]},proxy:true}],null,false,1867507197)}):_vm._e(),(_vm.ppcDataPoints.length)?_c('g-collapse',{attrs:{\"headerName\":\"工艺参数\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('g-data-points',{attrs:{\"dataPoints\":_vm.ppcDataPoints,\"validDataName\":\"ppcDataPoints\"}})]},proxy:true}],null,false,4096235805)}):_vm._e(),_c('g-collapse',{attrs:{\"headerName\":\"操作描述\"},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('a-row',{attrs:{\"gutter\":24}},[_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"描述\"}},[_c('a-textarea',{attrs:{\"rows\":4,\"maxLength\":1000,\"placeholder\":\"请输入操作描述\"},model:{value:(_vm.description),callback:function ($$v) {_vm.description=$$v},expression:\"description\"}})],1)],1)],1)]},proxy:true}])})]},proxy:true},{key:\"g-fixed-row\",fn:function(){return [_c('div',{staticClass:\"g-fixed-row\"},[_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"刷新\"},on:{\"callback\":_vm.refresh}}),_c('g-btn',{attrs:{\"size\":\"large\",\"text\":\"提交\",\"type\":\"primary\"},on:{\"callback\":_vm.save}})],1)]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-form-model\r\n    ref=\"form\"\r\n    :model=\"entity\"\r\n    layout=\"vertical\"\r\n    autocomplete=\"off\"\r\n    :rules=\"rules\"\r\n    class=\"h-father  sflex\"\r\n  >\r\n    <a-card class=\"mb-4\">\r\n      <a-radio-group v-model:value=\"combineType\" @change=\"combineTypeChange\">\r\n        <a-radio value=\"1\">一个批次合并到多个批次</a-radio>\r\n        <a-radio value=\"2\">多个批次合并到一个批次</a-radio>\r\n      </a-radio-group>\r\n    </a-card>\r\n\r\n    <g-body-form-layout>\r\n      <!-- 搜索区域 -->\r\n      <template #search-card>\r\n        <div class=\"search-card\">\r\n          <g-container-list \r\n            :value.sync=\"entity.containerName\"\r\n            @searchClick=\"onSearch\"\r\n          >\r\n          </g-container-list>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 展开区域 -->\r\n      <template #expand-card>\r\n        <div class=\"expand-card\">\r\n          <g-collapse headerName=\"扩展信息\">\r\n            <template #content>\r\n              <a-row :gutter=\"24\">\r\n                <a-col :span=\"4\">\r\n                  <a-form-model-item label=\"设备\">\r\n                    <g-select\r\n                      v-model=\"entity.resourceId\"\r\n                      @change=\"resourceChange\"\r\n                      :showSearch=\"true\"\r\n                      loadType=\"scroll\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </template>\r\n          </g-collapse>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 主体内容 -->\r\n      <template #card-body>\r\n        <!-- 合并信息 -->\r\n        <g-collapse headerName=\"合并信息\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"24\">\r\n                <a-button @click=\"addDetailRow\" type=\"primary\">添加批次</a-button>\r\n                \r\n                <!-- 批次列表 -->\r\n                <a-table\r\n                  :dataSource=\"detailList\"\r\n                  :columns=\"columns\"\r\n                  :pagination=\"false\"\r\n                  class=\"mt-4\"\r\n                >\r\n                  <template #bodyCell=\"{ column, record, index }\">\r\n                    <template v-if=\"column.key === 'action'\">\r\n                      <a-space>\r\n                        <a-popconfirm\r\n                          title=\"确认删除?\"\r\n                          @confirm=\"deleteDetailRow(record, index)\"\r\n                        >\r\n                          <a>删除</a>\r\n                        </a-popconfirm>\r\n                      </a-space>\r\n                    </template>\r\n                  </template>\r\n                </a-table>\r\n\r\n                <!-- 合并后批次信息 -->\r\n                <template v-if=\"combineType === '2'\">\r\n                  <a-table\r\n                    :dataSource=\"newContainer\"\r\n                    :columns=\"newContainerColumns\"\r\n                    :pagination=\"false\"\r\n                    class=\"mt-4\"\r\n                  >\r\n                    <template #title>合并后批次</template>\r\n                  </a-table>\r\n                </template>\r\n              </a-col>\r\n            </a-row>\r\n\r\n            <!-- 合并原因 -->\r\n            <a-row :gutter=\"24\" class=\"mt-4\">\r\n              <a-col :span=\"8\">\r\n                <a-form-model-item label=\"合并原因\" prop=\"mergeReasonId\" :rules=\"[{required: true, message: '请选择合并原因'}]\">\r\n                  <g-select\r\n                    v-model=\"entity.mergeReasonId\"\r\n                  />\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 数据采集 -->\r\n        <g-collapse headerName=\"数据采集\" v-if=\"dataPoints.length\">\r\n          <template #content>\r\n            <g-data-points\r\n              :dataPoints=\"dataPoints\"\r\n              validDataName=\"dataPoints\"\r\n            />\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 工艺参数 -->\r\n        <g-collapse headerName=\"工艺参数\" v-if=\"ppcDataPoints.length\">\r\n          <template #content>\r\n            <g-data-points\r\n              :dataPoints=\"ppcDataPoints\"\r\n              validDataName=\"ppcDataPoints\"\r\n            />\r\n          </template>\r\n        </g-collapse>\r\n\r\n        <!-- 操作描述 -->\r\n        <g-collapse headerName=\"操作描述\">\r\n          <template #content>\r\n            <a-row :gutter=\"24\">\r\n              <a-col :span=\"12\">\r\n                <a-form-model-item label=\"描述\">\r\n                  <a-textarea\r\n                    v-model=\"description\"\r\n                    :rows=\"4\"\r\n                    :maxLength=\"1000\"\r\n                    placeholder=\"请输入操作描述\"\r\n                  />\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </template>\r\n        </g-collapse>\r\n      </template>\r\n\r\n      <!-- 底部按钮 -->\r\n      <template #g-fixed-row>\r\n        <div class=\"g-fixed-row\">\r\n          <g-btn size=\"large\" text=\"刷新\" @callback=\"refresh\" />\r\n          <g-btn \r\n            size=\"large\" \r\n            text=\"提交\" \r\n            type=\"primary\"\r\n            @callback=\"save\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </g-body-form-layout>\r\n  </a-form-model>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue';\r\nimport GSignModal from '@/components/g-sign-modal/g-sign-modal.vue';\r\nimport { createModal } from '@/utils';\r\n\r\nexport default defineComponent({\r\n  name: 'DataV2CombineQty',\r\n\r\n  data() {\r\n    return {\r\n      combineType: '1', // 合并类型\r\n      entity: {\r\n        containerName: '',\r\n        resourceId: '',\r\n        mergeReasonId: '',\r\n        dataPoints: [],\r\n        ppcDataPoints: []\r\n      },\r\n      \r\n      description: '',\r\n      dataPoints: [], // 数据采集点\r\n      ppcDataPoints: [], // 工艺参数点\r\n      \r\n      detailList: [], // 批次列表\r\n      newContainer: [{ // 合并后批次\r\n        containerName: '',\r\n        qty: 0\r\n      }],\r\n\r\n      // 表格列配置\r\n      columns: [\r\n        {\r\n          title: '批次名称',\r\n          dataIndex: 'containerName',\r\n          key: 'containerName'\r\n        },\r\n        {\r\n          title: '数量',\r\n          dataIndex: 'qty',\r\n          key: 'qty'\r\n        },\r\n        {\r\n          title: '合并数量',\r\n          dataIndex: 'mergeQty',\r\n          key: 'mergeQty' \r\n        },\r\n        {\r\n          title: '操作',\r\n          key: 'action'\r\n        }\r\n      ],\r\n      \r\n      newContainerColumns: [\r\n        {\r\n          title: '批次名称',\r\n          dataIndex: 'containerName',\r\n          key: 'containerName'\r\n        },\r\n        {\r\n          title: '数量',\r\n          dataIndex: 'qty',\r\n          key: 'qty'\r\n        }\r\n      ],\r\n\r\n      rules: {\r\n        mergeReasonId: [\r\n          { required: true, message: '请选择合并原因' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 合并类型变更\r\n    combineTypeChange() {\r\n      this.refresh();\r\n    },\r\n\r\n    // 批次搜索\r\n    onSearch(container) {\r\n      if(container) {\r\n        // 加载批次信息\r\n        this.loadContainerInfo(container);\r\n      }\r\n    },\r\n\r\n    // 添加批次\r\n    addDetailRow() {\r\n      \r\n          this.detailList.push({\r\n            containerName: this.entity.containerName,\r\n            qty: this.entity?.qty,\r\n            mergeQty: 0\r\n          })\r\n    },\r\n\r\n    // 删除批次\r\n    deleteDetailRow(record, index) {\r\n      this.detailList.splice(index, 1);\r\n    },\r\n\r\n    // 设备变更\r\n    resourceChange(resourceId) {\r\n      if(resourceId) {\r\n        // 加载工艺参数\r\n      }\r\n    },\r\n\r\n    // 提交\r\n    save() {\r\n      this.$refs.form.validate().then(valid => {\r\n        if(valid) {\r\n          // 显示签名弹窗\r\n          createModal({\r\n            title: '签名确认',\r\n            width: '600px'\r\n          }, {\r\n            component: GSignModal,\r\n            success: () => {\r\n              // 提交合并\r\n              this.submitCombine();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    // 刷新\r\n    refresh() {\r\n      this.entity = {\r\n        containerName: '',\r\n        resourceId: '',\r\n        mergeReasonId: '',\r\n        dataPoints: [],\r\n        ppcDataPoints: []\r\n      };\r\n      this.description = '';\r\n      this.dataPoints = [];\r\n      this.ppcDataPoints = [];\r\n      this.detailList = [];\r\n      this.newContainer = [{\r\n        containerName: '',\r\n        qty: 0\r\n      }];\r\n    }\r\n  }\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.h-father {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.sflex {\r\n    display: flex;\r\n    flex-direction: column;\r\n    flex:1;\r\n    overflow-y: auto;\r\n    height: 100%;\r\n}\r\n\r\n\r\n\r\n\r\n.g-fixed-row {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 8px;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./combine-qty.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./combine-qty.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./combine-qty.vue?vue&type=template&id=5b86c8a0&scoped=true\"\nimport script from \"./combine-qty.vue?vue&type=script&lang=js\"\nexport * from \"./combine-qty.vue?vue&type=script&lang=js\"\nimport style0 from \"./combine-qty.vue?vue&type=style&index=0&id=5b86c8a0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b86c8a0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","title","ref","attrs","lineWidth","lineColor","backgroundColor","saveFormat","on","handleSave","handleClear","handleError","save","$event","$emit","staticRenderFns","name","components","GSign","props","type","String","default","Number","validator","value","includes","data","signatureData","hasSignature","methods","imageData","message","$message","error","clearSignature","$refs","signBoard","clearCanvas","component","_setupProxy","entity","rules","combineTypeChange","model","callback","$$v","combineType","expression","scopedSlots","_u","key","fn","containerName","$set","onSearch","proxy","resourceChange","addDetailRow","detailList","columns","column","record","index","deleteDetailRow","_e","newContainer","newContainerColumns","required","dataPoints","ppcDataPoints","description","refresh","resourceId","mergeReasonId","qty","dataIndex","container","loadContainerInfo","push","mergeQty","splice","form","validate","then","valid","width","success","submitCombine"],"sourceRoot":""}