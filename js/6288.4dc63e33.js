"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[6288],{86288:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"operationCode",attrs:{label:"工序编码",prop:"operationCode"}},[t("a-input",{attrs:{placeholder:"请输入工序编码",name:"operationCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.operationCode,callback:function(t){e.$set(e.entity,"operationCode",t)},expression:"entity.operationCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"工序名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入工序名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"operationType",attrs:{label:"工序类型",prop:"operationType"}},[t("a-select",{attrs:{placeholder:"请选择工序类型",name:"operationType"},on:{change:e.handleOperationTypeChange},model:{value:e.entity.operationType,callback:function(t){e.$set(e.entity,"operationType",t)},expression:"entity.operationType"}},[t("a-select-option",{attrs:{value:"加工工序"}},[e._v("加工工序")]),t("a-select-option",{attrs:{value:"装配工序"}},[e._v("装配工序")]),t("a-select-option",{attrs:{value:"检验工序"}},[e._v("检验工序")]),t("a-select-option",{attrs:{value:"热处理工序"}},[e._v("热处理工序")]),t("a-select-option",{attrs:{value:"表面处理工序"}},[e._v("表面处理工序")]),t("a-select-option",{attrs:{value:"包装工序"}},[e._v("包装工序")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"department",attrs:{label:"执行部门",prop:"department"}},[t("a-select",{attrs:{placeholder:"请选择执行部门",name:"department"},model:{value:e.entity.department,callback:function(t){e.$set(e.entity,"department",t)},expression:"entity.department"}},[t("a-select-option",{attrs:{value:"机加部"}},[e._v("机加部")]),t("a-select-option",{attrs:{value:"装配部"}},[e._v("装配部")]),t("a-select-option",{attrs:{value:"质检部"}},[e._v("质检部")]),t("a-select-option",{attrs:{value:"热处理部"}},[e._v("热处理部")]),t("a-select-option",{attrs:{value:"表面处理部"}},[e._v("表面处理部")]),t("a-select-option",{attrs:{value:"包装部"}},[e._v("包装部")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardTime",attrs:{label:"标准工时",prop:"standardTime"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,placeholder:"请输入标准工时",name:"standardTime"},model:{value:e.entity.standardTime,callback:function(t){e.$set(e.entity,"standardTime",t)},expression:"entity.standardTime"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardUnit",attrs:{label:"时间单位",prop:"standardUnit"}},[t("a-select",{attrs:{placeholder:"请选择时间单位",name:"standardUnit"},model:{value:e.entity.standardUnit,callback:function(t){e.$set(e.entity,"standardUnit",t)},expression:"entity.standardUnit"}},[t("a-select-option",{attrs:{value:"秒"}},[e._v("秒")]),t("a-select-option",{attrs:{value:"分钟"}},[e._v("分钟")]),t("a-select-option",{attrs:{value:"小时"}},[e._v("小时")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")]),t("a-radio",{attrs:{value:"开发中"}},[e._v("开发中")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"工序描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入工序描述",rows:3,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"工序参数"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-param-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addParameter}},[e._v("添加参数")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.parameterColumns,dataSource:e.entity.parameters,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"paramName",fn:function(a,n,r){return[t("a-input",{attrs:{placeholder:"请输入参数名称"},model:{value:e.entity.parameters[r].paramName,callback:function(t){e.$set(e.entity.parameters[r],"paramName",t)},expression:"entity.parameters[index].paramName"}})]}},{key:"paramValue",fn:function(a,n,r){return[t("a-input",{attrs:{placeholder:"请输入参数值"},model:{value:e.entity.parameters[r].paramValue,callback:function(t){e.$set(e.entity.parameters[r],"paramValue",t)},expression:"entity.parameters[index].paramValue"}})]}},{key:"paramUnit",fn:function(a,n,r){return[t("a-input",{attrs:{placeholder:"请输入参数单位"},model:{value:e.entity.parameters[r].paramUnit,callback:function(t){e.$set(e.entity.parameters[r],"paramUnit",t)},expression:"entity.parameters[index].paramUnit"}})]}},{key:"controlRange",fn:function(a,n,r){return[t("a-input",{attrs:{placeholder:"请输入控制范围"},model:{value:e.entity.parameters[r].controlRange,callback:function(t){e.$set(e.entity.parameters[r],"controlRange",t)},expression:"entity.parameters[index].controlRange"}})]}},{key:"required",fn:function(a,n,r){return[t("a-switch",{model:{value:e.entity.parameters[r].required,callback:function(t){e.$set(e.entity.parameters[r],"required",t)},expression:"entity.parameters[index].required"}})]}},{key:"action",fn:function(a,n,r){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeParameter(r)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"设备要求"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-equipment-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addEquipment}},[e._v("添加设备")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.equipmentColumns,dataSource:e.entity.equipments,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"equipmentType",fn:function(a,n,r){return[t("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择设备类型"},model:{value:e.entity.equipments[r].equipmentType,callback:function(t){e.$set(e.entity.equipments[r],"equipmentType",t)},expression:"entity.equipments[index].equipmentType"}},[t("a-select-option",{attrs:{value:"车床"}},[e._v("车床")]),t("a-select-option",{attrs:{value:"铣床"}},[e._v("铣床")]),t("a-select-option",{attrs:{value:"钻床"}},[e._v("钻床")]),t("a-select-option",{attrs:{value:"磨床"}},[e._v("磨床")]),t("a-select-option",{attrs:{value:"热处理炉"}},[e._v("热处理炉")]),t("a-select-option",{attrs:{value:"喷涂设备"}},[e._v("喷涂设备")]),t("a-select-option",{attrs:{value:"检测设备"}},[e._v("检测设备")]),t("a-select-option",{attrs:{value:"装配工具"}},[e._v("装配工具")]),t("a-select-option",{attrs:{value:"包装设备"}},[e._v("包装设备")])],1)]}},{key:"equipmentModel",fn:function(a,n,r){return[t("a-input",{attrs:{placeholder:"请输入设备型号"},model:{value:e.entity.equipments[r].equipmentModel,callback:function(t){e.$set(e.entity.equipments[r],"equipmentModel",t)},expression:"entity.equipments[index].equipmentModel"}})]}},{key:"quantity",fn:function(a,n,r){return[t("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,placeholder:"请输入数量"},model:{value:e.entity.equipments[r].quantity,callback:function(t){e.$set(e.entity.equipments[r],"quantity",t)},expression:"entity.equipments[index].quantity"}})]}},{key:"mandatory",fn:function(a,n,r){return[t("a-switch",{model:{value:e.entity.equipments[r].mandatory,callback:function(t){e.$set(e.entity.equipments[r],"mandatory",t)},expression:"entity.equipments[index].mandatory"}})]}},{key:"action",fn:function(a,n,r){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeEquipment(r)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},r=[],i=a(36026),s={name:"CreateOrEditOperation",mixins:[i.GE],data(){return{loading:!1,entity:{id:void 0,operationCode:"",name:"",operationType:"",department:"",standardTime:0,standardUnit:"分钟",description:"",parameters:[],equipments:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{operationCode:[{required:!0,message:"请输入工序编码",trigger:"change"},{pattern:/^[A-Z]{2}\d{3}/,message:"工序编码格式不正确",trigger:"change"}],name:[{required:!0,message:"请输入工序名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"工序名称不能包含前后空格",trigger:"change"}],operationType:[{required:!0,message:"请选择工序类型",trigger:"change"}],department:[{required:!0,message:"请选择执行部门",trigger:"change"}],standardTime:[{required:!0,message:"请输入标准工时",trigger:"change"},{type:"number",min:0,message:"标准工时必须大于等于0",trigger:"change"}],standardUnit:[{required:!0,message:"请选择时间单位",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},parameterColumns:[{title:"参数名称",dataIndex:"paramName",key:"paramName",width:"20%",scopedSlots:{customRender:"paramName"}},{title:"参数值",dataIndex:"paramValue",key:"paramValue",width:"20%",scopedSlots:{customRender:"paramValue"}},{title:"参数单位",dataIndex:"paramUnit",key:"paramUnit",width:"15%",scopedSlots:{customRender:"paramUnit"}},{title:"控制范围",dataIndex:"controlRange",key:"controlRange",width:"20%",scopedSlots:{customRender:"controlRange"}},{title:"必填",dataIndex:"required",key:"required",width:"10%",scopedSlots:{customRender:"required"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}],equipmentColumns:[{title:"设备类型",dataIndex:"equipmentType",key:"equipmentType",width:"25%",scopedSlots:{customRender:"equipmentType"}},{title:"设备型号",dataIndex:"equipmentModel",key:"equipmentModel",width:"30%",scopedSlots:{customRender:"equipmentModel"}},{title:"数量",dataIndex:"quantity",key:"quantity",width:"15%",scopedSlots:{customRender:"quantity"}},{title:"必需",dataIndex:"mandatory",key:"mandatory",width:"15%",scopedSlots:{customRender:"mandatory"}},{title:"操作",key:"action",width:"15%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,operationCode:"",name:"",operationType:"",department:"",standardTime:0,standardUnit:"分钟",description:"",parameters:[],equipments:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,parameters:e.parameters||[],equipments:e.equipments||[]}}},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(e){console.log(e.target.value)},handleOperationTypeChange(e){const t={"加工工序":"机加部","装配工序":"装配部","检验工序":"质检部","热处理工序":"热处理部","表面处理工序":"表面处理部","包装工序":"包装部"};t[e]&&(this.entity.department=t[e])},addParameter(){this.entity.parameters.push({id:Date.now(),paramName:"",paramValue:"",paramUnit:"",controlRange:"",required:!1})},removeParameter(e){this.entity.parameters.splice(e,1)},addEquipment(){this.entity.equipments.push({id:Date.now(),equipmentType:"",equipmentModel:"",quantity:1,mandatory:!0})},removeEquipment(e){this.entity.equipments.splice(e,1)}}},o=s,l=a(1001),m=(0,l.Z)(o,n,r,!1,null,"c91e80bc",null),d=m.exports}}]);
//# sourceMappingURL=6288.4dc63e33.js.map