"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[995],{995:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"unitCode",attrs:{label:"单位编码",prop:"unitCode"}},[t("a-input",{attrs:{placeholder:"请输入单位编码，格式为UM开头加4位数字",name:"unitCode",disabled:!!e.ndoEditParams.row},on:{change:e.inChange},model:{value:e.entity.unitCode,callback:function(t){e.$set(e.entity,"unitCode",t)},expression:"entity.unitCode"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"name",attrs:{label:"单位名称",prop:"name"}},[t("a-input",{attrs:{placeholder:"请输入单位名称",name:"name"},on:{change:e.inChange},model:{value:e.entity.name,callback:function(t){e.$set(e.entity,"name",t)},expression:"entity.name"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"symbol",attrs:{label:"单位符号",prop:"symbol"}},[t("a-input",{attrs:{placeholder:"请输入单位符号",name:"symbol"},on:{change:e.inChange},model:{value:e.entity.symbol,callback:function(t){e.$set(e.entity,"symbol",t)},expression:"entity.symbol"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"unitType",attrs:{label:"单位类型",prop:"unitType"}},[t("a-select",{attrs:{placeholder:"请选择单位类型",name:"unitType"},model:{value:e.entity.unitType,callback:function(t){e.$set(e.entity,"unitType",t)},expression:"entity.unitType"}},[t("a-select-option",{attrs:{value:"长度单位"}},[e._v("长度单位")]),t("a-select-option",{attrs:{value:"重量单位"}},[e._v("重量单位")]),t("a-select-option",{attrs:{value:"体积单位"}},[e._v("体积单位")]),t("a-select-option",{attrs:{value:"面积单位"}},[e._v("面积单位")]),t("a-select-option",{attrs:{value:"温度单位"}},[e._v("温度单位")]),t("a-select-option",{attrs:{value:"时间单位"}},[e._v("时间单位")]),t("a-select-option",{attrs:{value:"电力单位"}},[e._v("电力单位")]),t("a-select-option",{attrs:{value:"其他单位"}},[e._v("其他单位")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"baseUnit",attrs:{label:"基本单位",prop:"baseUnit"}},[t("a-switch",{on:{change:e.handleBaseUnitChange},model:{value:e.entity.baseUnit,callback:function(t){e.$set(e.entity,"baseUnit",t)},expression:"entity.baseUnit"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"conversionRate",attrs:{label:"转换比率",prop:"conversionRate"}},[t("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.entity.baseUnit,min:1e-6,precision:6,placeholder:"请输入转换比率",name:"conversionRate"},model:{value:e.entity.conversionRate,callback:function(t){e.$set(e.entity,"conversionRate",t)},expression:"entity.conversionRate"}})],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"status",attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{name:"status"},model:{value:e.entity.status,callback:function(t){e.$set(e.entity,"status",t)},expression:"entity.status"}},[t("a-radio",{attrs:{value:"启用"}},[e._v("启用")]),t("a-radio",{attrs:{value:"禁用"}},[e._v("禁用")])],1)],1)],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"standardInfo",attrs:{label:"标准信息",prop:"standardInfo"}},[t("a-select",{attrs:{placeholder:"请选择标准信息",name:"standardInfo"},model:{value:e.entity.standardInfo,callback:function(t){e.$set(e.entity,"standardInfo",t)},expression:"entity.standardInfo"}},[t("a-select-option",{attrs:{value:"国际标准单位(SI)"}},[e._v("国际标准单位(SI)")]),t("a-select-option",{attrs:{value:"非SI单位"}},[e._v("非SI单位")]),t("a-select-option",{attrs:{value:"行业标准单位"}},[e._v("行业标准单位")]),t("a-select-option",{attrs:{value:"自定义单位"}},[e._v("自定义单位")])],1)],1)],1),t("a-col",{attrs:{sm:24}},[t("a-form-model-item",{ref:"description",attrs:{label:"单位描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"请输入描述",rows:2,"max-length":500,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"单位使用示例"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:24}},[t("a-button",{staticClass:"add-example-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.addExample}},[e._v("添加示例")])],1),t("a-col",{attrs:{sm:24}},[t("a-table",{attrs:{columns:e.exampleColumns,dataSource:e.entity.examples,pagination:!1,size:"small",rowKey:"id"},scopedSlots:e._u([{key:"usageValue",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入示例值"},model:{value:e.entity.examples[n].usageValue,callback:function(t){e.$set(e.entity.examples[n],"usageValue",t)},expression:"entity.examples[index].usageValue"}})]}},{key:"usageContext",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入使用场景"},model:{value:e.entity.examples[n].usageContext,callback:function(t){e.$set(e.entity.examples[n],"usageContext",t)},expression:"entity.examples[index].usageContext"}})]}},{key:"note",fn:function(a,s,n){return[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.entity.examples[n].note,callback:function(t){e.$set(e.entity.examples[n],"note",t)},expression:"entity.examples[index].note"}})]}},{key:"action",fn:function(a,s,n){return[t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>e.removeExample(n)}})]}}])})],1)],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建人"}},[t("span",[e._v(e._s(e.entity.createdBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"创建时间"}},[t("span",[e._v(e._s(e.entity.createdTime||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改人"}},[t("span",[e._v(e._s(e.entity.modifiedBy||"未知"))])])],1),t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{attrs:{label:"修改时间"}},[t("span",[e._v(e._s(e.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},n=[],i=a(36026),o={name:"CreateOrEditUnitFoMeasure",mixins:[i.GE],data(){return{loading:!1,entity:{id:void 0,unitCode:"",name:"",symbol:"",unitType:"",baseUnit:!1,conversionRate:1,standardInfo:"",description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{unitCode:[{required:!0,message:"请输入单位编码",trigger:"change"},{pattern:/^UM\d{4}$/,message:"单位编码必须为UM开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入单位名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"单位名称不能包含前后空格",trigger:"change"}],symbol:[{required:!0,message:"请输入单位符号",trigger:"change"}],unitType:[{required:!0,message:"请选择单位类型",trigger:"change"}],conversionRate:[{required:!0,message:"请输入转换比率",trigger:"change"},{type:"number",min:1e-6,message:"转换比率必须大于0",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],standardInfo:[{required:!0,message:"请选择标准信息",trigger:"change"}]},exampleColumns:[{title:"示例值",dataIndex:"usageValue",key:"usageValue",width:"25%",scopedSlots:{customRender:"usageValue"}},{title:"使用场景",dataIndex:"usageContext",key:"usageContext",width:"30%",scopedSlots:{customRender:"usageContext"}},{title:"说明",dataIndex:"note",key:"note",width:"35%",scopedSlots:{customRender:"note"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,unitCode:"",name:"",symbol:"",unitType:"",baseUnit:!1,conversionRate:1,standardInfo:"",description:"",examples:[],status:"启用",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const e=this.ndoEditParams.row;this.entity={...this.entity,...e,examples:e.examples||[]}}},async save(){let e=await this.checkError();if(e){if(this.entity.baseUnit&&1!==this.entity.conversionRate)return void this.$message.error("基本单位的转换比率必须为1");this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500)}},inChange(e){console.log(e.target.value)},handleBaseUnitChange(e){e&&(this.entity.conversionRate=1)},addExample(){this.entity.examples.push({id:Date.now(),usageValue:"",usageContext:"",note:""})},removeExample(e){this.entity.examples.splice(e,1)}}},r=o,l=a(1001),d=(0,l.Z)(r,s,n,!1,null,"bfdd121a",null),m=d.exports}}]);
//# sourceMappingURL=995.84767bdb.js.map