"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1425],{81425:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var n=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.loading}},[e("a-form-model",{ref:"form",attrs:{model:t.entity,rules:t.rules,autocomplete:"off",layout:"vertical"}},[e("div",{staticClass:"card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"enterpriseCode",attrs:{label:"企业编码",prop:"enterpriseCode"}},[e("a-input",{attrs:{placeholder:"请输入企业编码",name:"enterpriseCode",disabled:!!t.ndoEditParams.row},on:{change:t.inChange},model:{value:t.entity.enterpriseCode,callback:function(e){t.$set(t.entity,"enterpriseCode",e)},expression:"entity.enterpriseCode"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"name",attrs:{label:"企业名称",prop:"name"}},[e("a-input",{attrs:{placeholder:"请输入企业名称",name:"name"},on:{change:t.inChange},model:{value:t.entity.name,callback:function(e){t.$set(t.entity,"name",e)},expression:"entity.name"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"industry",attrs:{label:"所属行业",prop:"industry"}},[e("a-select",{attrs:{placeholder:"请选择所属行业",name:"industry"},model:{value:t.entity.industry,callback:function(e){t.$set(t.entity,"industry",e)},expression:"entity.industry"}},[e("a-select-option",{attrs:{value:"制造业"}},[t._v("制造业")]),e("a-select-option",{attrs:{value:"电子信息"}},[t._v("电子信息")]),e("a-select-option",{attrs:{value:"汽车制造"}},[t._v("汽车制造")]),e("a-select-option",{attrs:{value:"医药制造"}},[t._v("医药制造")]),e("a-select-option",{attrs:{value:"食品加工"}},[t._v("食品加工")])],1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"scale",attrs:{label:"企业规模",prop:"scale"}},[e("a-select",{attrs:{placeholder:"请选择企业规模",name:"scale"},model:{value:t.entity.scale,callback:function(e){t.$set(t.entity,"scale",e)},expression:"entity.scale"}},[e("a-select-option",{attrs:{value:"大型"}},[t._v("大型")]),e("a-select-option",{attrs:{value:"中型"}},[t._v("中型")]),e("a-select-option",{attrs:{value:"小型"}},[t._v("小型")])],1)],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"foundDate",attrs:{label:"创立日期",prop:"foundDate"}},[e("a-date-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD",placeholder:"请选择创立日期"},model:{value:t.entity.foundDate,callback:function(e){t.$set(t.entity,"foundDate",e)},expression:"entity.foundDate"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"employeeCount",attrs:{label:"员工数量",prop:"employeeCount"}},[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入员工数量",min:1},model:{value:t.entity.employeeCount,callback:function(e){t.$set(t.entity,"employeeCount",e)},expression:"entity.employeeCount"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"registeredCapital",attrs:{label:"注册资本",prop:"registeredCapital"}},[e("a-input",{attrs:{placeholder:"请输入注册资本",name:"registeredCapital"},model:{value:t.entity.registeredCapital,callback:function(e){t.$set(t.entity,"registeredCapital",e)},expression:"entity.registeredCapital"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"status",attrs:{label:"运营状态",prop:"status"}},[e("a-select",{attrs:{placeholder:"请选择运营状态",name:"status"},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-select-option",{attrs:{value:"运营中"}},[t._v("运营中")]),e("a-select-option",{attrs:{value:"筹建中"}},[t._v("筹建中")]),e("a-select-option",{attrs:{value:"暂停运营"}},[t._v("暂停运营")]),e("a-select-option",{attrs:{value:"已关闭"}},[t._v("已关闭")])],1)],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{ref:"address",attrs:{label:"地址",prop:"address"}},[e("a-input",{attrs:{placeholder:"请输入详细地址",name:"address"},model:{value:t.entity.address,callback:function(e){t.$set(t.entity,"address",e)},expression:"entity.address"}})],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{ref:"description",attrs:{label:"企业描述",prop:"description"}},[e("a-textarea",{attrs:{placeholder:"请输入企业描述",rows:3,"max-length":500,name:"description"},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1)],1)],1)],1),e("g-collapse",{attrs:{headerName:"联系人信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:24}},[e("a-button",{staticClass:"add-contact-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.addContact}},[t._v("添加联系人")])],1),e("a-col",{attrs:{sm:24}},[e("a-table",{attrs:{columns:t.contactColumns,dataSource:t.entity.contacts,pagination:!1,size:"small",rowKey:"id"},scopedSlots:t._u([{key:"contactName",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:t.entity.contacts[i].contactName,callback:function(e){t.$set(t.entity.contacts[i],"contactName",e)},expression:"entity.contacts[index].contactName"}})]}},{key:"position",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入职位"},model:{value:t.entity.contacts[i].position,callback:function(e){t.$set(t.entity.contacts[i],"position",e)},expression:"entity.contacts[index].position"}})]}},{key:"phone",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入联系电话"},model:{value:t.entity.contacts[i].phone,callback:function(e){t.$set(t.entity.contacts[i],"phone",e)},expression:"entity.contacts[index].phone"}})]}},{key:"email",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:t.entity.contacts[i].email,callback:function(e){t.$set(t.entity.contacts[i],"email",e)},expression:"entity.contacts[index].email"}})]}},{key:"action",fn:function(a,n,i){return[e("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>t.removeContact(i)}})]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"组织架构"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:24}},[e("a-button",{staticClass:"add-dept-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.addDepartment}},[t._v("添加部门")])],1),e("a-col",{attrs:{sm:24}},[e("a-table",{attrs:{columns:t.departmentColumns,dataSource:t.entity.departments,pagination:!1,size:"small",rowKey:"id"},scopedSlots:t._u([{key:"deptName",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入部门名称"},model:{value:t.entity.departments[i].deptName,callback:function(e){t.$set(t.entity.departments[i],"deptName",e)},expression:"entity.departments[index].deptName"}})]}},{key:"deptCode",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入部门编码"},model:{value:t.entity.departments[i].deptCode,callback:function(e){t.$set(t.entity.departments[i],"deptCode",e)},expression:"entity.departments[index].deptCode"}})]}},{key:"manager",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入部门主管"},model:{value:t.entity.departments[i].manager,callback:function(e){t.$set(t.entity.departments[i],"manager",e)},expression:"entity.departments[index].manager"}})]}},{key:"staffCount",fn:function(a,n,i){return[e("a-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入人数",min:0},model:{value:t.entity.departments[i].staffCount,callback:function(e){t.$set(t.entity.departments[i],"staffCount",e)},expression:"entity.departments[index].staffCount"}})]}},{key:"description",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入描述"},model:{value:t.entity.departments[i].description,callback:function(e){t.$set(t.entity.departments[i],"description",e)},expression:"entity.departments[index].description"}})]}},{key:"action",fn:function(a,n,i){return[e("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>t.removeDepartment(i)}})]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"生产基地"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:24}},[e("a-button",{staticClass:"add-facility-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.addFacility}},[t._v("添加生产基地")])],1),e("a-col",{attrs:{sm:24}},[e("a-table",{attrs:{columns:t.facilityColumns,dataSource:t.entity.facilities,pagination:!1,size:"small",rowKey:"id"},scopedSlots:t._u([{key:"facilityName",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入基地名称"},model:{value:t.entity.facilities[i].facilityName,callback:function(e){t.$set(t.entity.facilities[i],"facilityName",e)},expression:"entity.facilities[index].facilityName"}})]}},{key:"location",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入基地位置"},model:{value:t.entity.facilities[i].location,callback:function(e){t.$set(t.entity.facilities[i],"location",e)},expression:"entity.facilities[index].location"}})]}},{key:"area",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入占地面积"},model:{value:t.entity.facilities[i].area,callback:function(e){t.$set(t.entity.facilities[i],"area",e)},expression:"entity.facilities[index].area"}})]}},{key:"purpose",fn:function(a,n,i){return[e("a-input",{attrs:{placeholder:"请输入用途"},model:{value:t.entity.facilities[i].purpose,callback:function(e){t.$set(t.entity.facilities[i],"purpose",e)},expression:"entity.facilities[index].purpose"}})]}},{key:"action",fn:function(a,n,i){return[e("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:()=>t.removeFacility(i)}})]}}])})],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"详细信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建人"}},[e("span",[t._v(t._s(t.entity.createdBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建时间"}},[e("span",[t._v(t._s(t.entity.createdTime||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改人"}},[e("span",[t._v(t._s(t.entity.modifiedBy||"未知"))])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改时间"}},[e("span",[t._v(t._s(t.entity.modifiedTime||"未知"))])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],s=a(36026),o=a(30381),r=a.n(o),l={name:"CreateOrEditEnterprise",mixins:[s.GE],data(){return{loading:!1,entity:{id:void 0,enterpriseCode:"",name:"",industry:"",scale:"",foundDate:null,employeeCount:0,registeredCapital:"",address:"",description:"",contacts:[],departments:[],facilities:[],status:"运营中",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""},rules:{enterpriseCode:[{required:!0,message:"请输入企业编码",trigger:"change"},{pattern:/^EN\d{4}$/,message:"企业编码格式不正确，应为EN开头加4位数字",trigger:"change"}],name:[{required:!0,message:"请输入企业名称",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"企业名称不能包含前后空格",trigger:"change"}],industry:[{required:!0,message:"请选择所属行业",trigger:"change"}],scale:[{required:!0,message:"请选择企业规模",trigger:"change"}],foundDate:[{required:!0,message:"请选择创立日期",trigger:"change"}],employeeCount:[{required:!0,message:"请输入员工数量",trigger:"change"},{type:"number",min:1,message:"员工数量必须大于0",trigger:"change"}],registeredCapital:[{required:!0,message:"请输入注册资本",trigger:"change"}],address:[{required:!0,message:"请输入地址",trigger:"change"}],status:[{required:!0,message:"请选择运营状态",trigger:"change"}]},contactColumns:[{title:"姓名",dataIndex:"contactName",key:"contactName",width:"20%",scopedSlots:{customRender:"contactName"}},{title:"职位",dataIndex:"position",key:"position",width:"20%",scopedSlots:{customRender:"position"}},{title:"联系电话",dataIndex:"phone",key:"phone",width:"20%",scopedSlots:{customRender:"phone"}},{title:"电子邮箱",dataIndex:"email",key:"email",width:"30%",scopedSlots:{customRender:"email"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}],departmentColumns:[{title:"部门名称",dataIndex:"deptName",key:"deptName",width:"20%",scopedSlots:{customRender:"deptName"}},{title:"部门编码",dataIndex:"deptCode",key:"deptCode",width:"15%",scopedSlots:{customRender:"deptCode"}},{title:"部门主管",dataIndex:"manager",key:"manager",width:"15%",scopedSlots:{customRender:"manager"}},{title:"人数",dataIndex:"staffCount",key:"staffCount",width:"10%",scopedSlots:{customRender:"staffCount"}},{title:"描述",dataIndex:"description",key:"description",width:"30%",scopedSlots:{customRender:"description"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}],facilityColumns:[{title:"基地名称",dataIndex:"facilityName",key:"facilityName",width:"20%",scopedSlots:{customRender:"facilityName"}},{title:"位置",dataIndex:"location",key:"location",width:"25%",scopedSlots:{customRender:"location"}},{title:"占地面积",dataIndex:"area",key:"area",width:"15%",scopedSlots:{customRender:"area"}},{title:"用途",dataIndex:"purpose",key:"purpose",width:"30%",scopedSlots:{customRender:"purpose"}},{title:"操作",key:"action",width:"10%",scopedSlots:{customRender:"action"}}]}},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.initFormData(),this.loading=!1}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={id:void 0,enterpriseCode:"",name:"",industry:"",scale:"",foundDate:null,employeeCount:0,registeredCapital:"",address:"",description:"",contacts:[],departments:[],facilities:[],status:"运营中",createdBy:"",createdTime:"",modifiedBy:"",modifiedTime:""}},initFormData(){if(this.ndoEditParams.row){const t=this.ndoEditParams.row;let e=null;t.foundDate&&(e=r()(t.foundDate));let a=[];t.contact&&a.push({id:Date.now(),contactName:"默认联系人",position:"管理员",phone:t.contact,email:"contact@example.com"});let n=[],i=[];this.entity={...this.entity,...t,foundDate:e,contacts:a,departments:n,facilities:i}}},async save(){let t=await this.checkError();t&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.name),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})}),500))},inChange(t){console.log(t.target.value)},addContact(){this.entity.contacts.push({id:Date.now(),contactName:"",position:"",phone:"",email:""})},removeContact(t){this.entity.contacts.splice(t,1)},addDepartment(){this.entity.departments.push({id:Date.now(),deptName:"",deptCode:`DEPT${this.entity.departments.length+1}`,manager:"",staffCount:0,description:""})},removeDepartment(t){this.entity.departments.splice(t,1)},addFacility(){this.entity.facilities.push({id:Date.now(),facilityName:"",location:"",area:"",purpose:""})},removeFacility(t){this.entity.facilities.splice(t,1)}}},c=l,d=a(1001),p=(0,d.Z)(c,n,i,!1,null,"31efdc90",null),m=p.exports}}]);
//# sourceMappingURL=1425.ce063fd1.js.map