"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[1251],{41251:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=function(){var e=this,t=e._self._c;return t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-model",{ref:"form",attrs:{model:e.entity,rules:e.rules,autocomplete:"off",layout:"vertical"}},[t("div",{staticClass:"card"},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("a-form-model-item",{ref:"scrapCategoryName",attrs:{label:"报废分类名称",prop:"scrapCategoryName"}},[t("a-input",{attrs:{placeholder:"请输入报废分类名称",name:"scrapCategoryName"},on:{change:e.inChange},model:{value:e.entity.scrapCategoryName,callback:function(t){e.$set(e.entity,"scrapCategoryName",t)},expression:"entity.scrapCategoryName"}})],1)],1),t("a-col",{attrs:{sm:12}},[t("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[t("a-textarea",{attrs:{placeholder:"描述",rows:4,"max-length":1e3,name:"description"},model:{value:e.entity.description,callback:function(t){e.$set(e.entity,"description",t)},expression:"entity.description"}})],1)],1)],1)],1),t("g-collapse",{attrs:{headerName:"报废原因"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-table",{attrs:{columns:e.columns,"data-source":e.reasons,bordered:"",rowKey:"reasonId"},scopedSlots:e._u([{key:"reasonName",fn:function(a,r){return[t("a-input",{model:{value:r.reasonName,callback:function(t){e.$set(r,"reasonName",t)},expression:"record.reasonName"}})]}},{key:"enabled",fn:function(a,r){return[t("a-switch",{model:{value:r.enabled,callback:function(t){e.$set(r,"enabled",t)},expression:"record.enabled"}})]}},{key:"remark",fn:function(a,r){return[t("a-input",{model:{value:r.remark,callback:function(t){e.$set(r,"remark",t)},expression:"record.remark"}})]}},{key:"operation",fn:function(a,r){return[t("a-space",[t("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.editReason(r)}}},[e._v(" 编辑 ")]),t("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(t){return e.deleteReason(r.reasonId)}}},[t("a-button",{attrs:{type:"danger",size:"small"}},[e._v(" 删除 ")])],1)],1)]}}])}),t("a-space",[t("a-button",{attrs:{type:"primary"},on:{click:e.addReason}},[e._v("新增原因")]),t("a-button",{attrs:{type:"danger"},on:{click:e.batchDeleteReasons}},[e._v("批量删除")])],1)]},proxy:!0}])}),t("g-collapse",{attrs:{headerName:"测试"},scopedSlots:e._u([{key:"content",fn:function(){return[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{sm:6}},[t("span",[e._v("admin")])]),t("a-col",{attrs:{sm:6}},[t("span",[e._v(" 2025-04-20 15:00")])])],1)]},proxy:!0}])})],1)],1)},n=[],s=a(36026),o={name:"CreateOrEditScrapCategory",mixins:[s.GE],data(){return{entity:{scrapCategoryName:""},rules:{scrapCategoryName:[{required:!0,message:"不能为空",trigger:"change"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,trigger:"change",message:"报废分类名称不能包含空格"}]},columns:[{title:"原因ID",dataIndex:"reasonId",key:"reasonId"},{title:"原因名称",dataIndex:"reasonName",key:"reasonName",width:"30%",align:"center",scopedSlots:{customRender:"reasonName"}},{title:"是否启用",dataIndex:"enabled",key:"enabled",width:"20%",align:"center",scopedSlots:{customRender:"enabled"}},{title:"备注",dataIndex:"remark",key:"remark",align:"center",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"operation",key:"operation",width:"20%",align:"center",scopedSlots:{customRender:"operation"}}],reasons:[{reasonId:1,reasonName:"原因1",enabled:!0,remark:"备注1"}]}},mounted(){},methods:{init(){console.log(this.id,"初始化"),this.loading=!0,this.id?setTimeout((()=>{this.loading=!1,this.entity={scrapCategoryName:"测试",description:"描述"}}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={scrapCategoryName:""}},editReason(e){console.log("编辑原因",e),this.currentReason={...e},this.editModalVisible=!0},addReason(){console.log("新增原因"),this.reasons.push({reasonId:this.reasons.length+1,reasonName:"",enabled:!0,remark:""})},batchDeleteReasons(){console.log("批量删除原因"),this.reasons=this.reasons.filter((e=>!e.selected))},deleteReason(e){console.log("删除原因",e),this.reasons=this.reasons.filter((t=>t.reasonId!==e))},async save(){let e=await this.checkError();e&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.scrapCategoryName),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})})))},inChange(e){console.log(e.target.value)}}},i=o,l=a(1001),c=(0,l.Z)(i,r,n,!1,null,"ac562f3e",null),d=c.exports}}]);
//# sourceMappingURL=1251.ee33af7f.js.map