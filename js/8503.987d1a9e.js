"use strict";(self["webpackChunkdata_v2"]=self["webpackChunkdata_v2"]||[]).push([[8503,1001],{99319:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal-content"},[e("a-form-model",{ref:"copyForms",attrs:{layout:"vertical",rules:t.rules,model:t.copyForm}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{name:"value",label:"数据"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"value",type:"text",disabled:""},model:{value:t.copyForm.value,callback:function(e){t.$set(t.copyForm,"value",e)},expression:"copyForm.value"}})],1)],1),e("a-col",{attrs:{span:12}},[e("a-form-model-item",{staticClass:"labelStyle",attrs:{label:"复制数据",prop:"copyValue"}},[e("a-input",{staticStyle:{width:"200px"},attrs:{name:"copyValue",type:"text","max-length":200},model:{value:t.copyForm.copyValue,callback:function(e){t.$set(t.copyForm,"copyValue",e)},expression:"copyForm.copyValue"}})],1)],1)],1)],1)],1),e("div",{staticClass:"modal-footer"},[e("g-btn",{attrs:{text:"确认",type:"primary"},on:{callback:t.save}}),e("g-btn",{attrs:{text:"取消"},on:{callback:function(e){return t.$emit("closeModal")}}})],1)])},i=[],n=(s(54612),{name:"GCopyNdo",props:{entity:{type:Object,default:()=>({})}},data(){return{copyForm:{value:"",copyValue:""},rules:{copyValue:[{required:!0,message:"请输入目标实例名称",trigger:"change"}]}}},mounted(){this.copyForm=this.entity,this.copyForm.copyValue=`Copy-of-${this.copyForm.value}`},methods:{save(){this.$refs.copyForms.validate().then((t=>{t&&(this.$emit("success",this.copyForm),this.$emit("closeModal"))}))}}}),o=n,r=s(1001),l=(0,r.Z)(o,a,i,!1,null,"04e98444",null),c=l.exports},31001:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.loading}},[e("a-form-model",{ref:"form",attrs:{model:t.entity,rules:t.rules,autocomplete:"off",layout:"vertical"}},[e("div",{staticClass:"card"},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{ref:"statusPatternName",attrs:{label:"状态模式名称",prop:"statusPatternName"}},[e("a-input",{attrs:{placeholder:"请输入状态模式名称",name:"statusPatternName"},model:{value:t.entity.statusPatternName,callback:function(e){t.$set(t.entity,"statusPatternName",e)},expression:"entity.statusPatternName"}})],1)],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[e("a-select",{attrs:{placeholder:"请选择状态"},model:{value:t.entity.status,callback:function(e){t.$set(t.entity,"status",e)},expression:"entity.status"}},[e("a-select-option",{attrs:{value:"正常"}},[t._v("正常")]),e("a-select-option",{attrs:{value:"警告"}},[t._v("警告")]),e("a-select-option",{attrs:{value:"故障"}},[t._v("故障")])],1)],1)],1),e("a-col",{attrs:{sm:12}},[e("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[e("a-textarea",{attrs:{placeholder:"请输入状态模式描述",rows:4,"max-length":1e3,name:"description"},model:{value:t.entity.description,callback:function(e){t.$set(t.entity,"description",e)},expression:"entity.description"}})],1)],1)],1)],1),e("g-collapse",{attrs:{headerName:"转换规则"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-form-model-item",{attrs:{label:"转换规则",prop:"transitions"}},[t.entity.transitions&&t.entity.transitions.length>0?e("div",t._l(t.entity.transitions,(function(s,a){return e("div",{key:a,staticClass:"transition-item"},[e("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"起始状态"},on:{change:t.onTransitionChange},model:{value:s.from,callback:function(e){t.$set(s,"from",e)},expression:"transition.from"}},[e("a-select-option",{attrs:{value:"正常"}},[t._v("正常")]),e("a-select-option",{attrs:{value:"警告"}},[t._v("警告")]),e("a-select-option",{attrs:{value:"故障"}},[t._v("故障")])],1),e("span",{staticClass:"arrow"},[t._v("→")]),e("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"目标状态"},on:{change:t.onTransitionChange},model:{value:s.to,callback:function(e){t.$set(s,"to",e)},expression:"transition.to"}},[e("a-select-option",{attrs:{value:"正常"}},[t._v("正常")]),e("a-select-option",{attrs:{value:"警告"}},[t._v("警告")]),e("a-select-option",{attrs:{value:"故障"}},[t._v("故障")])],1),e("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o"},on:{click:function(e){return t.removeTransition(a)}}})],1)})),0):t._e(),e("a-button",{staticStyle:{width:"60%"},attrs:{type:"dashed"},on:{click:t.addTransition}},[e("a-icon",{attrs:{type:"plus"}}),t._v(" 添加转换规则 ")],1)],1)]},proxy:!0}])}),e("g-collapse",{attrs:{headerName:"其他信息"},scopedSlots:t._u([{key:"content",fn:function(){return[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"创建人"}},[e("span",[t._v("admin")])])],1),e("a-col",{attrs:{sm:6}},[e("a-form-model-item",{attrs:{label:"修改时间"}},[e("span",[t._v(" 2025-04-20 15:00")])])],1)],1)]},proxy:!0}])})],1)],1)},i=[],n=s(36026),o={name:"CreateOrEditStatusPattern",mixins:[n.GE],data(){return{entity:{statusPatternName:"",status:"正常",description:"",transitions:[]},rules:{statusPatternName:[{required:!0,message:"请输入状态模式名称",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}}},mounted(){},methods:{init(){this.loading=!0,this.id?setTimeout((()=>{this.loading=!1,this.entity={statusPatternName:"测试状态模式",status:"正常",description:"这是一个测试状态模式",transitions:[{from:"正常",to:"警告"},{from:"警告",to:"故障"}]}}),500):(this.reset(),this.loading=!1)},resetFormData(){this.entity={statusPatternName:"",status:"正常",description:"",transitions:[]}},async save(){let t=await this.checkError();t&&(this.loading=!0,setTimeout((()=>{this.loading=!1,this.saveSuccess(this.entity.statusPatternName),this.handleSaveEndBackView(this.id),this.refreshParent({reset:null})})))},addTransition(){this.entity.transitions.push({from:"正常",to:"警告"})},removeTransition(t){this.entity.transitions.splice(t,1)},onTransitionChange(){for(let t=0;t<this.entity.transitions.length;t++)for(let e=t+1;e<this.entity.transitions.length;e++)if(this.entity.transitions[t].from===this.entity.transitions[e].to&&this.entity.transitions[t].to===this.entity.transitions[e].from)return this.$message.warning("不能存在循环转换规则！"),void this.entity.transitions.splice(e,1)}}},r=o,l=s(1001),c=(0,l.Z)(r,a,i,!1,null,"cc285544",null),u=c.exports},18503:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("g-body-layout",{attrs:{pageIndex:t.pageNumber,pageSize:t.pageSize,total:t.total,filterText:t.filterText},on:{"update:filterText":function(e){t.filterText=e},"update:filter-text":function(e){t.filterText=e},pageIndexChange:t.pageIndexChange,pageSizeChange:t.pageSizeChange,suffixSearchCallback:t.onFilterReady},scopedSlots:t._u([{key:"btnGroup",fn:function(){return[e("g-btn-group",{attrs:{buttonLists:t.btnList},on:{btnCallBack:t.btnGroupClick}})]},proxy:!0},{key:"table",fn:function(){return[e("g-ndo-table",{attrs:{id:t.id,handName:"设备状态模式",dataList:t.dataList,isTableLoading:t.loading,total:t.total},on:{rowClick:t.rowClick},scopedSlots:t._u([{key:"status",fn:function({row:s}){return[e("a-tag",{attrs:{color:t.getStatusColor(s.status)}},[t._v(t._s(s.status))])]}},{key:"transitions",fn:function({row:s}){return[s.transitions&&s.transitions.length>0?e("span",[t._v(" "+t._s(s.transitions.map((t=>`${t.from} -> ${t.to}`)).join(", "))+" ")]):e("span",[t._v("无")])]}}])})]},proxy:!0},{key:"content",fn:function(){return[t.isShowEdit?e("create-or-edit-resource-status-model",{attrs:{ndoEditParams:t.ndoEditParams,refreshTag:t.refreshTag,saveTag:t.saveTag,resetTag:t.resetTag},on:{childRefresh:function(e){return t.childRefresh(e)},rowClick:function(e){return t.rowClick(e)}}}):e("g-empty")]},proxy:!0}])})},i=[],n=s(31001),o=s(99319),r=s(36026),l={name:"DeviceStatusPattern",mixins:[r.He],components:{CreateOrEditResourceStatusModel:n["default"]},data(){return{isTableLoading:!1,filterText:""}},mounted(){this.$nextTick((()=>{this.$refs.table&&this.$refs.table.setColumns&&this.$refs.table.setColumns([{title:"ID",dataIndex:"id",key:"id",width:80},{title:"状态模式名称",dataIndex:"name",key:"name"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"转换规则",dataIndex:"transitions",key:"transitions",scopedSlots:{customRender:"transitions"}},{title:"描述",dataIndex:"description",key:"description"}])}))},created(){this.getBtnList()},methods:{getBtnList(){this.btnList=[{text:this.AppConst.button.create,icon:this.AppConst.icon.create,eventName:this.AppConst.button.create,display:!0},{text:this.AppConst.button.copy,icon:this.AppConst.icon.copy,eventName:this.AppConst.button.copy,display:!!this.id},{text:this.AppConst.button.delete,icon:this.AppConst.icon.delete,eventName:this.AppConst.button.delete,display:!!this.id},{text:this.AppConst.button.refresh,icon:this.AppConst.icon.refresh,eventName:this.AppConst.button.refresh,right:!0,display:this.isShowEdit},{text:this.AppConst.button.save,icon:this.AppConst.icon.save,eventName:this.AppConst.button.save,right:!0,type:"primary",display:this.isShowEdit}]},copy(){this.createModal({title:"复制",width:"600px"},{component:o.Z,props:{entity:{copyValue:this.dataList[0].name,value:this.dataList[0].name}},on:{success:t=>{console.log(t),this.loading=!0,setTimeout((()=>{this.loading=!1,this.copySuccess(t.value,t.copyValue),this.refreshGoFirstPage()}),500)}}})},delete(){this.$confirm({title:"确认删除",content:"确认删除吗?",onOk:()=>{this.loading=!0,setTimeout((()=>{this.loading=!1,this.deleteSuccess(),this.refresh()}),500)}})},fetchData(t){this.loading=!0,setTimeout((()=>{t.finishedCallback();let e=[];for(let t=0;t<25;t++)e[t]={id:t+1,name:"状态模式"+(t*this.pageNumber+1),status:["正常","警告","故障"][Math.floor(3*Math.random())],transitions:[{from:"正常",to:"警告"},{from:"警告",to:"故障"}],description:"这是一个状态模式的描述"+t};this.filterText&&(e=e.filter((t=>t.name.indexOf(this.filterText)>-1))),t.successCallback({items:e,totalCount:2*e.length})}),1e3)},getStatusColor(t){switch(t){case"正常":return"green";case"警告":return"orange";case"故障":return"red";default:return"blue"}}}},c=l,u=s(1001),p=(0,u.Z)(c,a,i,!1,null,"1e920a85",null),d=p.exports}}]);
//# sourceMappingURL=8503.987d1a9e.js.map